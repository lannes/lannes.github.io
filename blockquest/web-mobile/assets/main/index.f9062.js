window.__require=function e(t,i,o){function n(s,c){if(!i[s]){if(!t[s]){var r=s.split("/");if(r=r[r.length-1],!t[r]){var l="function"==typeof __require&&__require;if(!c&&l)return l(r,!0);if(a)return a(r,!0);throw new Error("Cannot find module '"+s+"'")}s=r}var d=i[s]={exports:{}};t[s][0].call(d.exports,function(e){return n(t[s][1][e]||e)},d,d.exports,e,t,i,o)}return i[s].exports}for(var a="function"==typeof __require&&__require,s=0;s<o.length;s++)n(o[s]);return n}({AI:[function(e,t,i){"use strict";cc._RF.push(t,"1cac9Y6yvVG3JM66e3X8w35","AI"),Object.defineProperty(i,"__esModule",{value:!0});var o=e("../data/Config"),n=e("../Profile"),a=e("./AiVsMode"),s=function(){function e(){this.actionQueue="",this.tActQueue="",this.maxScore=0,this.work2Idx=-1}return e.prototype.getGridScore=function(e,t,i,n,a,s){var c,r=e.core,l=e.aiMode,d=l.init,u=0,f=0,h=new Array(o.default.COLUMNS),m=0,p=0;for(c=0;c<o.default.COLUMNS;c++)u+=r.col_hole[c],f+=10*r.columnTop[c],h[c]=0,0==c?r.columnTop[1]>r.columnTop[0]&&(h[c]=r.columnTop[1]-r.columnTop[0]):c==o.default.COLUMNS-1?r.columnTop[c-1]>r.columnTop[c]&&(h[c]=r.columnTop[c-1]-r.columnTop[c]):r.columnTop[c+1]>r.columnTop[c]&&r.columnTop[c-1]>r.columnTop[c]&&(h[c]=Math.min(r.columnTop[c-1],r.columnTop[c+1])-r.columnTop[c]),h[c]>2&&m++,p+=h[c];var g=f/o.default.COLUMNS,_=0;for(c=0;c<o.default.COLUMNS;c++){var v=10*r.columnTop[c]-g;_+=v*v}return d+=_*l.variance,d+=5*((t-5)*(t-5)+(r.cur_x-5)*(r.cur_x-5)),d+=l.clearLine[n],d+=l.clearLine[a],d+=g*l.topAverage,d+=u*l.hole,d+=s>2?s*l.combo[0]:s*l.combo[1],r.combo>2?d+=r.combo*l.combo[0]:d+=r.combo*l.combo[1],m>=l.canyonMax&&(d+=l.canyon*p),d},e.prototype.AI_F1=function(e,t,i,a,s,c,r,l){var d,u=e.core.clone(),f=null,h=null,m="",p="";d=this.tActQueue;for(var g=n.default.info.classic?o.default.ZCOUNT_CLASSIC[e.core.currentBlock]:o.default.ZCOUNT_CRAZY[e.core.currentBlock],_=r?1:0,v=0;v<=_;v++){e.core.recycle(),e.core=u.clone(),this.tActQueue=d,0!=v&&(this.tActQueue+="S",e.saveBlk(!0)),f=e.core.clone(),m=this.tActQueue;for(var E=0;E<g;E++){e.core.recycle(),e.core=f.clone(),this.tActQueue=m;for(var S=0;S<E;S++)this.tActQueue+="T",e.moveBlk(o.default.CLOCKWISE,!0);h=e.core.clone(),p=this.tActQueue;for(var C=0;C<3;C++){if(e.core.recycle(),e.core=h.clone(),this.tActQueue=p,1==C)for(;e.moveBlk(o.default.LEFT,!0)!=o.default.REACH_BORDER;)this.tActQueue+="L",c(this,e,t,i,a,s,l);if(2==C)for(;e.moveBlk(o.default.RIGHT,!0)!=o.default.REACH_BORDER;)this.tActQueue+="R",c(this,e,t,i,a,s,l);0==C&&c(this,e,t,i,a,s,l)}h.recycle()}f.recycle()}u.recycle()},e.prototype.AI_F2=function(e,t,i,n,a,s,c){var r,l,d,u,f,h=t.core.clone();for(f=e.tActQueue;t.moveBlk(o.default.DDOWN,!0)!=o.default.REACH_BOTTOM;);e.tActQueue+="W",u=t.core.combo,d=t.core.fullRows.length,t.clearRow(!0),r=t.core.cur_x,l=t.core.cur_y,t.nextBlk(!0),e.tActQueue+="N";var m=e.getGridScore(t,r,l,d,0,s);c?e.msScan[e.msScan.length]=[m,e.tActQueue,t.core,r,l,d,u]:m>e.maxscore_scan&&e.AI_F1(t,r,l,d,u,e.AI_F3),c||t.core.recycle(),t.core=h.clone(),h.recycle(),e.tActQueue=f},e.prototype.AI_F3=function(e,t,i,n,a,s,c){var r,l,d,u;d=t.core.clone(),u=e.tActQueue;for(var f=0,h=0;h<4;h++){var m=t.core.cur_x+h;if(m>=o.default.COLUMNS)break;t.core.columnTop[m]>f&&(f=t.core.columnTop[m])}for(t.moveBlk(o.default.SET,!0);t.moveBlk(o.default.DDOWN,!0)!=o.default.REACH_BOTTOM;);e.tActQueue+="W",l=t.core.fullRows.length,t.clearRow(!0),(r=e.getGridScore(t,i,n,a,l,s))>e.maxScore&&(e.actionQueue=e.tActQueue,e.actionQueue+="N",e.maxScore=r),t.core.recycle(),t.core=d.clone(),d.recycle(),e.tActQueue=u},e.prototype.getAIAction=function(e){if(0==this.actionQueue.length&&this.work2Idx<0){this.maxScore=-9e9;var t=e.core.clone();if(this.tActQueue="",e.clearRow(!0),e.aiMode=a.default.getMode(e.core.topLine),this.msScan=[],this.AI_F1(e,0,0,0,0,this.AI_F2,!1,!0),this.msScan.sort(function(e,t){return t[0]-e[0]}),this.msScan.length>6)for(var i=0;i<6;i++){this.msScan.pop()[2].recycle()}return this.work2Idx=this.msScan.length-1,e.core.recycle(),e.core=t.clone(),void t.recycle()}if(this.work2Idx>=0){t=e.core.clone();var o=this.msScan[this.work2Idx];return e.core=o[2],this.tActQueue=o[1],this.AI_F1(e,o[3],o[4],o[5],o[6],this.AI_F3),e.core.recycle(),e.core=t.clone(),t.recycle(),this.work2Idx-=1,void(-1==this.work2Idx&&(this.msScan=null))}var n=this.actionQueue[0];return this.actionQueue=this.actionQueue.slice(1),n},e}();i.default=s,cc._RF.pop()},{"../Profile":"Profile","../data/Config":"Config","./AiVsMode":"AiVsMode"}],AdManager:[function(e,t,i){"use strict";cc._RF.push(t,"263bbOYXAhGfJ7R8N0HLVgB","AdManager"),Object.defineProperty(i,"__esModule",{value:!0});var o=function(){function e(){this.adIconBtn=null,this.adInfoList=[],this.currentAdInfo=null,this.AnimType={STATIC:1,SHAKE:2}}return e.showVidelAd=function(){},e.requestADInfo=function(){this.retryTimes--},e.prototype.getAdNode=function(){return this.adIconBtn},e.prototype.showAd=function(e){var t=this;this.genRandomFirstAdInfo(),this.currentAdInfo&&(this.adIconBtn?this.adIconBtn.active=!0:cc.resources.load("prefab/adNode",function(i,o){var n=cc.instantiate(o);n.position=cc.v2(e.x,e.y),t.adIconBtn=n,cc.game.addPersistRootNode(n),t.adIconNode(),t.adIconBtn.getChildByName("adButton").on("click",function(){t.onClickAdIconBtn()})}))},e.prototype.genRandomFirstAdInfo=function(){},e.prototype.genRandomSecondAdInfo=function(){},e.prototype.adIconNode=function(){if(this.currentAdInfo&&this.adIconBtn){var e=this.currentAdInfo.icon_type,t=this.adIconBtn.getChildByName("adIcon");this.adIconBtn.getChildByName("adButton");switch(t.stopAllActions(),t.getComponent(cc.Animation)&&t.removeComponent(cc.Animation),t.setRotation(0),e){case this.AnimType.STATIC:cc.loader.load({url:this.currentAdInfo.icon_url[0]},function(e,i){e||(t.getComponent(cc.Sprite).spriteFrame=new cc.SpriteFrame(i))});break;case this.AnimType.SHAKE:cc.loader.load({url:this.currentAdInfo.icon_url[0]},function(e,i){t.getComponent(cc.Sprite).spriteFrame=new cc.SpriteFrame(i),t.anchorX=.5,t.anchorY=.5;var o=cc.rotateBy(.06,-20),n=cc.rotateBy(.12,40),a=cc.rotateBy(.12,-40),s=cc.rotateBy(.06,20),c=cc.delayTime(1);t.runAction(cc.repeatForever(cc.sequence(o,cc.repeat(cc.sequence(n,a),4),s,c)))});break;case this.AnimType.FRAME:}}},e.prototype.onClickAdIconBtn=function(){this.genRandomSecondAdInfo(),this.resetBtnIcon()},e.prototype.resetBtnIcon=function(){this.adIconBtn&&(this.genRandomFirstAdInfo(),this.adIconNode())},e.getConfigSignStr=function(e){},e.showBannerAd=function(e){},e.destroyBannerAd=function(){},e.retryTimes=3,e}();i.default=o,o.requestADInfo(),cc._RF.pop()},{}],AiAdventureMode:[function(e,t,i){"use strict";cc._RF.push(t,"d05772fUOVFeo78g1/Udr4h","AiAdventureMode"),Object.defineProperty(i,"__esModule",{value:!0});var o=function(){function e(){}return e.getMode=function(e){return e>10?this.safe:this.normal},e.safe={init:5e3,clearLine:[0,6e3,7200,10800,14400],variance:-.5,topAverage:-300,hole:-2e3,combo:[3e5,2500],canyonMax:1,canyon:-500},e.normal={init:5e3,clearLine:[0,6e3,7200,10800,14400],variance:-.5,topAverage:-30,hole:-2500,combo:[3e5,2500],canyonMax:1,canyon:-500},e}();i.default=o,cc._RF.pop()},{}],AiVsMode:[function(e,t,i){"use strict";cc._RF.push(t,"1ae4eD/78xH1YVOdrGuAWjN","AiVsMode"),Object.defineProperty(i,"__esModule",{value:!0});var o=function(){function e(){}return e.getMode=function(e){return e>10?this.safe:this.normal},e.safe={init:5e3,clearLine:[0,6e3,7200,10800,14400],variance:-.5,topAverage:-300,hole:-2e3,combo:[3e5,2500],canyonMax:2,canyon:-500},e.normal={init:5e3,clearLine:[0,-7e3,-6400,160,240],variance:-.5,topAverage:-30,hole:-2500,combo:[3e5,2500],canyonMax:2,canyon:-500},e}();i.default=o,cc._RF.pop()},{}],AnimationMagicProgressCtrl:[function(e,t,i){"use strict";cc._RF.push(t,"dda65l3hgJOP4w6Cv5DWZtL","AnimationMagicProgressCtrl");var o=e("../core/GameEvent"),n=function(e){return e&&e.__esModule?e:{default:e}}(e("../common/NotificationCenter"));cc.Class({extends:cc.Component,properties:{},onLoad:function(){this.pauseFrameIdx=0},start:function(){},progressTo:function(e){if(9==e)this.game.gameNode.getComponent("main").yanhua.active?this.node.getComponent(cc.Animation).pause():(this.game.pauseGame(),this.pauseFrameIdx=0,n.default.trigger(o.GameEvent.MAGIC_BOTTLE_FULL,e));else if(e==this.pauseFrameIdx){this.node.getComponent(cc.Animation).pause(),n.default.trigger(o.GameEvent.MAGIC_BOTTLE_ADD,e)}else if(e>this.pauseFrameIdx){this.pauseFrameIdx=0,this.node.getComponent(cc.Animation).pause(),n.default.trigger(o.GameEvent.MAGIC_RESET_BOTTLE,0)}},setEndFrame:function(e){if(e==this.pauseFrameIdx&&9==this.pauseFrameIdx)return this.pauseFrameIdx=0,void(this.game.gameNode.getComponent("main").yanhua.active||(this.game.pauseGame(),n.default.trigger(o.GameEvent.MAGIC_BOTTLE_FULL,e)));e>this.pauseFrameIdx&&this.node.getComponent(cc.Animation).resume();this.pauseFrameIdx=e},setGame:function(e){this.game=e}}),cc._RF.pop()},{"../common/NotificationCenter":"NotificationCenter","../core/GameEvent":"GameEvent"}],Bilog:[function(e,t,i){"use strict";cc._RF.push(t,"9c300TA641PfLe6j7TmfOQ8","Bilog"),Object.defineProperty(i,"__esModule",{value:!0});var o,n=e("./Util"),a=e("../common/BlockQuest"),s=e("./HttpUtil");(function(e){e[e.UserFrom=99990001]="UserFrom",e[e.UserShare=99990002]="UserShare",e[e.ShowAdBtn=99990003]="ShowAdBtn",e[e.ShowQRCode=99990004]="ShowQRCode",e[e.DirectToMiniGameSuccess=99990005]="DirectToMiniGameSuccess",e[e.DirectToMiniGameFail=99990006]="DirectToMiniGameFail",e[e.SubmitVersionInfo=9999]="SubmitVersionInfo",e[e.clickEventWxLoginStart=10001]="clickEventWxLoginStart",e[e.clickEventWxLoginSuccess=10002]="clickEventWxLoginSuccess",e[e.clickEventWxLoginFailed=10003]="clickEventWxLoginFailed",e[e.clickEventAuthorizationStart=10004]="clickEventAuthorizationStart",e[e.clickEventAuthorizationSuccess=10005]="clickEventAuthorizationSuccess",e[e.clickEventAuthorizationFailed=10006]="clickEventAuthorizationFailed",e[e.LoginSDKStart=10007]="LoginSDKStart",e[e.LoginSDKSuccess=10008]="LoginSDKSuccess",e[e.LoginSDKFailed=10009]="LoginSDKFailed",e[e.TCPStart=10010]="TCPStart",e[e.TCPSuccess=10011]="TCPSuccess",e[e.TCPFailed=10012]="TCPFailed",e[e.PassAllQQHStage=10020]="PassAllQQHStage",e[e.PassQQHStage=10021]="PassQQHStage",e[e.EndSingleWin=10022]="EndSingleWin",e[e.EndSingleLose=10023]="EndSingleLose",e[e.EndVSLoseNE=10024]="EndVSLoseNE",e[e.EndVSWin=10025]="EndVSWin",e[e.StartVSHome=10026]="StartVSHome",e[e.StartVSRestart=10027]="StartVSRestart",e[e.StartVSNext=10028]="StartVSNext",e[e.EndVSLoseKeep=10029]="EndVSLoseKeep",e[e.EndVSLoseNoKeep=10030]="EndVSLoseNoKeep"})(o||(o={}));var c=function(){function e(){}return e.uploadLogTimely=function(e){if(a.default.StateInfo.networkConnected){if(e){var t={url:a.default.SystemInfo.errorLogServer+"?cloudname="+a.default.SystemInfo.cloudId+"."+a.default.SystemInfo.intClientId,header:["Content-Type:text/plain"],postData:e,callback:null};s.default.httpPost(t,"POST")}}else a.default.LOGD("BiLog","net error!")},e.uploadClickStatLogTimely=function(e){if(void 0!=e&&""!=e)var t={url:a.default.SystemInfo.biLogServer,headers:["Content-Type:text/plain"],postData:e,obj:this,tag:null,callback:null};s.default.httpPost(t,"POST")},e.clickStat=function(e,t){var i=[];if((t=t||[]).length<10)for(var o=0;o<9;o++)o<t.length?i.push(t[o]):i.push(0);else i=t;a.default.LOGD("BI management","eventid= "+e+" description = "+JSON.stringify(i));var n=this.assemblelog(e,i);this.uploadClickStatLogTimely(n+"\n")},e.assemblelog=function(e,t){var i=(new Date).getTime();i-this._timetag>6e4&&(this._timetag=i,this.nettype=0);var o=t.join("\t"),s=a.default.SystemInfo.cloudId+"\t1\t"+i+"\t0\t0\t"+e+"\t"+(a.default.UserInfo.userId||"0")+"\t"+a.default.SystemInfo.gameId+"\t"+a.default.SystemInfo.clientId+"\t"+n.default.getLocalUUID()+"\t#IP\t0\t0\t"+a.default.UserInfo.model+"\t0\t"+o+"\t0";return this.trimTab0(s)},e.trimTab0=function(e){return null==e||void 0==e?"":e.replace(/(\t0)*$/,"")},e.clickEvent=o,e}();i.default=c,cc._RF.pop()},{"../common/BlockQuest":"BlockQuest","./HttpUtil":"HttpUtil","./Util":"Util"}],Bitmap:[function(e,t,i){"use strict";cc._RF.push(t,"3437dv/oBpN75+hsue/M+Yo","Bitmap"),Object.defineProperty(i,"__esModule",{value:!0});var o=function(){function e(){}return e.data=["0000000000000000000022222220002222222022000333333333033333336666000666666660666677777700777777770077","0000000000202222222220222222223333333003333333330340004444444400444444444440444455055555555555555055","0000000000220222222000222222220333333333033333333340004444444044440000400044444455000055555550000055","0006666000006000060006003000606000300006600030000660001220066000000006060000006000600006000006666000","0000000000666666666060000000601322222060013000206060132020600001302060603013206000000130606060601660","0000000000022226666002222006600222010660022001066002001106600300000070033330077003333007700333377770","0000001100000000161000000166011111166011266666010002666010000026601000002260100002002010002000021000","0000200000002222200002777772002777777720277777772002222222000000300000000030000000303000000003000000","6666006666600677600666660066666000000006666600666660067760066666006666600000000666660066666006776006","0333333330377775053337775000333555050533350057773335005777333555050533377750003337777505330333333330","0000060220000060100200060100020060100502060100507030100507003005507000300007000003007000000033000000","0000070000000227220000220700200022070000002227220000055755500000070550005007055000055755000000070000","0001111000001111110000110011000010000100022222222002507705200207007020027000072002070070200250770520","4440000666440333306640322223060320550230032500523003250052300320550230703222230177033330117770000111","0424000050422240056504222056660042456665000400565005650040005666542400666502224056500422240500004240","3333330000222222200000005600000555600020056600062305610065230561165023056666502305555550230000000023","5500550000515512555005121222500512212500005125500000515000000005000000000500000000005000000000500000","0000770110000700711000703307100703333070703333330773333333370666006660066600666006660066600666666660","0002772000000777700000027720000002772000027777772000277772000002772000600022000630000000036666666666","0011111100011111111022222022222222220222333003333333000033334400004444444004444405555555500055555500","0550000550555500555555055555555500555555555055555505555555500055555500000555500000005500000000000000","0001111000011111111002220022203333003333440000004444000000440555005550055500555000666666000007777000","0003333000003333330003330033300330000330233333333023333333002330000000033300333000333333000003333000","0111033300201103304022000004402200000440000000000055000007705500000770506607707006660777000000000000","0000000033000000000011111111001111111100000000000055555555000555555500000000000006600077000660007700","0000000000000000000000002200000000220000000333300000333333000111111110011111111005555555500555555550","1200450071210034006700120045000021003400430012004554002100340043001200005400210076004300121700540021","0005555000055500555052222222255300000035503000030550033330055030000305530000003550000000050555555550","0000770000071011017001103301100005005000713022031771302203170005005000011033011007101101700000770000","0000000001000000001100000001110000001111000001111100001111100006011100006600100306666000336666660333","0000660000000600600000600006000600000060600000000602222222200200330020020333302002030030200022222200","0000770000067600676007000000700600120060700200100770010020070600210060070000007006760067600000770000","0020000200000200200000002200000777777770700000000770666666077066666607706666660770000000070777777770","7777777700077700777007770007700777007770077777770005550055500555000550055500055005550055505555555500","0007667000007622670000620026000062002600007622670000076670000000660000000766700000066660000000660000","0005005000001511510001111111102200220022222000022233330033333330000333440044004404444444400055555500","0000000000000000000033330055550003000005000300000533330055550003000005000300000533330055550000000000","3333333333300000000330000000033500000553305050550330505050033055555003300505000330000000033333333333","0011111100011111111001001100100100110010011111111000111111000001001000550111105500500005000005555000","2222222200200055552023300055522333300552200033005221100330522111003002200110330220011033020222222222","0000000000005000030005550033300050000300000000000000500003000555003330555553333305550033300050000300","0000003000000003000000550005500555505555111111111011111111002222222220022222222200777777770007700770","0000000000000011000000020020000030330300040400404050505505050606006060007077070000070070000000110000","0004444000000400400000040043335554004303505400430350540043035054004303505400430350540043035554444333","0005550000005555500005555555000055555000000555000000001003303300103300033013300000331000000000100000","0000000000000220330000022033000550000044055000004400001110000001111100001111111000111111100011101110","0000330000000011000000001100000002222000222222222204444444400004444000005555550000550055000330000330","0011111100011111111022222220222222220002330030003333000003334440004444444404444405555555500055555500","0001001000001111110002001100302200000033022055033002205503302200000033020044003000444444000004004000","0001111000001111110001101101100111111110001100110000011110000033553300033333333033033330333003333003","0110000110011111111001000000101005005001100000000110033330011003003001100333300111000000110111111110","0000050000040005000000400000000004011100000010001033010011010001001001000100111100001001100000010000","0033333300033033053003030030303050330303330333303300331133000000110000000011000005001100000001111000","0005555000005555550005555555505050550505505055050555555555550111111110010111101001110011100111001110","0000000000055555000004444440000004444000003300330000333333000022222200022000022011110011111111001111","0000000000555555500044444444000440004400033333330003333333000220000220022000022011111111101111111100","0000000000000555555000444444400444000440033000003003300000000220000000022200022000111111100001111000","0000000000555555500044444444000440004440033000033003300003300220000220022000222011111111001111111000","0000000000055555555004444444400044000440003333000000333300000022000000002200022001111111100111111110","0000000000055555555004444444400044000440003333000000333300000022000000002200000001111000000111100000","0000000000005555550004444444004440004400330000000033003333302200222220222000220001111111000011111000","0000000000555505555044440444400440004400033333330003333333000220002200022000220011110111101111011110","0000000000005555550000444444000000440000000033000000003300000000220000000022000000111111000011111100","0000000000000055555500004444440000004400000000330003300033000220002200022000220001111111000011111000","0000000000555505555044440444400440044000033033000003333300000220222000022002200011110011101111001110","0000000000555555000044444400000044000000003300000000330000000022000220002200022011111111101111111110","0000000000555000055544440044440444004440033300333003333333300220220220022022022011110011111111001111","0000000000555005555044440444400444004400033330330003303033000220222200022002220011110111001111001100","0000000000005555500004444444004440004440330000033033000003302200000220222000222001111111000011111000","0000000000055555550004444444400044000440003300033000333333300022222200002200000001111100000111110000","0055555000055000550044000004404400000440330000033033000003300220002200002222200000110000000111111110","0000000000555555500044444444000440004400033333330003333300000220222000022002220011110111101111001110","0000000000000555555004444444400440000440033330000000333333000000002220022000022001111111100111111000","0000000000055555555004444444400440440440033033033000003300000000220000000022000000111111000011111100","0000000000555505555044440444400440004400033000330003300033000220002200022000220001111111000011111000","0000000000555500555544440044440440000440003300030000330033000022002200000222200000011110000000110000","0000000000555500555544440044440440440440033033033003333333300222002220002200220000110011000011000100","0000000000555505555044440444400044044000003333300000033300000022222000002202200011110111101111011110","0000000000055555555004444444400044004400000333300000033330000000220000000022000000111111000011111100","0000000000055555550004444444000440044000033033000000033300000002202200002200220001111111000111111100","2220000222200555500220550055020555005550050000005005000000500555005550205500550220055550022220000222","0333333330340000004330222222033020220203302002020330202002033020220203302222220334000000430333333330","0011001100002200220012003300211200770021003700730000370073001200770021120033002100220022000011001100","3355005533335500553355000300555500300055000300030000300030005500030055550030005533550055333355005533","3330003330333000333033300033300003330002000333002000033302053330002050333002050733302050700002050706","0002332000000322300000032230000002332000320033002332033330233200330023232033023202323323200023333200","0003333333000300000300030000032225222003200300200320030020032003335333200000200020000020002222222000","0003553000003555530003555555300354445530035455453005544455500554554550005444550003555555300355335530","0000330000000322300000032230000550330220533500211253350021120550110220000155100000015510000000110000","0000000000006000060000600006000060000600606066060606660066600666006660006000060000600006000000000000","0220000055222000055002200055000220055000022055033000055030030055000030055000030055000030005000003333","0440000000411400000011140000001140000000414000000004140000000041400140000414111400004111140000041140","0000220000001022020001000000200000660000110666603311066660330000660000050000003000505503000000550000","0000333000000311113000313003100313000000212222220001000000002122222200031300000000313003100003111130","0222222220200000000220000500022000035002205333350220533335022000035002200005000220000000020222222220","0222222220200000000220000000022000333302200030030220003003022003303302200330330220000000020222222220","0007777700007000005007000000050000000005000000000500020000050022000030022233330000220000000002000000","0003333000000300300000033330000000000000000555500000050050000055005500001000010000010010000000110000","0003223000003244230000240042000024444200002244220000020020000006556000000655600000065560000000660000","0001200000000210000000000012000121002100122200001220220000212022221000222222100022222110001111110000","0000222222000520000200002500023333250002300250550230250522223025523050300220300030000030003333333000","0032300000032223000032777230003270723000327772300003272305000032300700000205757500030007000003000500","0555555550530033333553600666355306006635530060063553600600355306006005530060060553000600350555555550","0011111100011000011001060060101100000011110066001100062260000062002600062200226066220022262222222222","0020305000002030506000203050600022335560102000006011100000600110000060001000006000010006000001235600","1111100005000000005011111005000000005000000005000000005000200005022222005000020005000222225000002000","0000660000000632600000632126000632111260602111120600211112000321111230302111120300611116000066666600","0003333333003000000303002220033000202003300000000330111111033000000003305555550330000000030333333333","0220110220200211200220200002027200300027170030007110003333011703000071010000001000170071000701111070","0565005650566655666556666666656666666666566666666556666666650566666650005666650000056650000000050000","0003333000003000030003001100303001001003300001000330000010033001001003060011006000600006000006666000","0011111100015100001015510500011551000001155510000115555110011555555101155055510101555551100011111100","0000000000000000000000000000005555551000055525555002222222220220000222022022200230033333333303333333","0000000000000000000022222210002012222220202202222250500051205050000000666066666666066666666666666066","0000000000202222222220222222223333333003333333330340004444444400444444555550055555555005555555550555","0000000000500055555005555555550555555555044444444444400044444444444004600666666666000666666666600006","0000000000000000000000000000005555551000055525555506666666666660000666777777700770077777777707777777","0000000000000000000055555210005015255555606606666666600061206660000000666066666666066666666666666066","0000000000000033000000004400000004004000333000033304000000400030000300005055050000550055000050000500","0000000566000000705600000207050000302070011103020011011030001000110000100001000000001100000011100000","5555550555566600000556006660055600600600566600060556600066055600060065500066006500066666655055555555","2222222222250011110220010001022010000102201000010220100001022010001102211000110221100000522222222222","0001771000001000010001002200101020000201700000000770002200071000220001010200201000100001000001771000","2222222222250000000220500000522055000552200550550220005550022000050002200005500220000050022222222222","5555555555500000500555500500055000505055500050050555505550055000000005555555550550000000055555555555","0022220000002007200000200772000020000200002000020042200002242422222242200000000224000000424222222224","0000000000000377300000073370000007300000000370000000037300000377777730373000037373000000377777777777","0000070000000007770000000700700000070070000007070000777700700777770000077777000007777700000077000000","0000550000000633600000200002000200110020002100120000100001000501001050500011000505050050500050000500","0000550000000355300000012210000310000130552055025555205502550310000130000122100000035530000000550000","5000000005033333333003300003300333333330030000003003000000300333333330033000033003333333305000000005","0000000000002222220011200002111020000201010200201000020020000000220000000022000000002200000055555500","5777777775750000005770233332077023333207700000000770233202077000000007702023320775000000575777777775","0000200000000000000070302050000000000000703020506000000000007030205000000000000000002000000000000000","0000323000000326230000326162300326151623000000000000000000000326151623003261623000032623000000323000","0333323330300020000330000200033006116003300100102320210012023206116003300002000330000020030333323330","0000000000000001033000007100000777550330075555000007555503300777550000000071000000000103300000000000","5111111115150000005110766700011000637001100003370110000337011000637001107667000115000000515111111115","0010001000111110111101010010001111111110010010001001111011100100101000011110111001001010010101100111","0000600000000006000000000600000006000060060600006006060000060606000006600600060000060006000000666600","0000040000000004444400000400000044444440004000004000400000400044444440000000000004400400404004004004","0300300300003003033330033330000300300333000033300300003030300300303333030300303030030030303030330330","0000770000007777770077777777770730000370070200207007020020700702002070070200207007300003700377777730","0220000000200200000020002000000200020050002000550500020000500000500500000050505000050505050000500050","0007000000050070000005500700000555007000055550070005555500700555500700055500700005500700000500700000","0066666666006000000600600555060060005506000003050600603000060060000006666660666600600000000060000000","0000000000011100111010001100011000000001010000001001020020100102002010010000001000111111000000000000","0000000000077777777070000000077022222207722222222770222222077000022007077770207000000707000000007700","0000330000007033070007333333700037557300333500533333350053330037557300073333337000703307000000330000","0500070000565070700056570077775650066660566666226056666622605650066660565700777756507070000500070000","0100000021166666666206000021600600021260060021206006021200600621200060061200006001666666610000000010","2500660000500066000000333360000030060600003060636600360603660030600300003333330050000000052500000052","0000000000000155555700100000700100000700100000700001100007701001007007100100700701100007700000000000","0000330000000300300000300003000030000300000300300000003300000033003300030000003050000000055555555555","0000000000222200022220011000022000110002200001100221100011022101000112200010000222200112220000000000","0555555550500000000550666000655600060665560006606556000606655066600065500000000550000000050555555550","0000330000000300300005300003500530550350053055035005300003500530000350053300335033330033330000550000","0000000000000000010000011111100010000100010000000000055550000000000010001000010001111110000010000000","0000000000001100110001001100101003030301100003000110000300011000330001010000001000100001100001111000","0066000000065560066006556065560065665556000600666006660060006555665600655606556006600655600000006600","0000000007000000077000000077700000777700000777700057777770005555770000000570000000057000000005500000","7777777775777777775077077775007000775000770775000077775000007775033330775000000075000000005000000000","0000600000000006000066666666660006000000000666660000060006000006000600006000060000600006006600066000","0060006000006000600000606666606666006060006000606000666666660060006000006600600066000606000006600066","0000000000077777770000007000000000700000777777777000007000000007070000000707000000700070007700000770","0060060600006660066006006006066606666666060060060006006606060606600660060060660006006606060606600066","6666666666600600600660060060066666666666000600000000666666606606000060000060060000000660006666600000","0606000066666660660006060060000666006666060600606006660060600606006060666660606006060600606000600060","0666666660677777777667100001766710330176671033017667100001766713330176671000017667777777760666666660","0000550000033055011003300001100007007000330022007733002200770007007000044000066004402206600000220000","0000500000000050000055555555505000500050500050005055555555505000500050000050000000005000000000500000","6666666660600000006060666660606000600060606666606060006000606000606060666666666060000000606666666660","0000000000000000000000002200000000220000000333300000333333000000000000011111111000000000000555555550","0000500000000705000000007050000002070500030020705003000207050333002070030300000000300000000000000000","0222252220200030500220603005022006605002200056000220053060022050300602200030600220000600020222222220","0000000000033000330003300033000000000000555555555050000000505000000050555000555005555555000005550000","0444444440300000000130500550013000500501305050050130505005013050500501305050050130000000010777777770","0001111000001044010001002200101000000001142000024114200002411000000001010022001000104401000001111000","0050000500056666665056600006650606666060000600600000066660000600000060566000066505666666500050000500","5500550055566666666506000000600600065060560006606556000000650600000060060000006056666666655500550055","0053003500053222235053000000353200220023020200202002020020203200220023530000003505322223500053003500","0000300000000330000000323000000352300000345233333334523333330352300000003230000000033000000000300000","0011110000012222100012222221001333333100133333310015555551000155551000001111010000000000100000000001","0000000000666600002261160002326116002332611602333261160233326116002332611600023266660000220000000000","0000220000000001100000000022000000000110111111111166666666660000000660000000220000000660000000220000","0000000000000000000000010000000001700000000105000000010020000001050000000170000000010000000000000000","0000000000000000000000003000000000130000000002300000000013000000023000000013000000003000000000000000","0000000000222222222022222222201111011110111110111033000303301111101110111101111066666666606666666660","0000000000000000000000033333330001111133000000631300000636130000636013000636001300636000130036000000","0000000000000000000000200000000000100000003000600000001000000020000000000000000000000000000000000000","0000000000000000000000060000000000100000000202000000001060000002020000000010000000060000000000000000","0000000000000001000000000010000000000100010602002000000001000000001000000001000000000000000000000000","0000000000011111000001000100006777772002611111201261000126126100012612611111261261111120126777772002","0000000000000007110000007000100000100010000010007000012117000012100000012100000002100000000000000000","1515555151502000020550200002255020000205502222220550000000055002222205500211120550021102051511111151","0000000000001001000000011000002222222222110000011122000002021100000111220000020211111111115555555555","0000000000000000500000030001000013060040251300504025130050402513005040001306004000030001000000005000","0000000000011111111010000000011001100001100044000110000110011000440001100110000110000000010111111110","0000000000000000000001000000000005000000040007000000000004000100050000000400000003000000000000000000","0000000000000006100000000613000000001310442216131244221613120000001310000006130000000610000000000000","0000000000000000000000160100000016014000001601430000160143700016014300001601400000160100000000000000","0000000000000000000000000100000000017000000001770006666666600000017700000001700000000100000000000000","0000000000000000000000000300000000003000050505050000707070700101010100000000300000000300000000000000","0000000000000000000000611100000002222000000011110000000555500000111100000222200000611100000000000000","0622222600010000101001000011100200000020020121102002000000200201121020020000002001000000100622222260","0131313000030001010003000100100300011110030000003003000000300300000030030000003003000000300131313110","0111112000010001020051111100205155555510010000001001000000100600000060060000006006000000600333333330","0000000000000061000000020020000020000200010000001031000000130300610030010061001003006100300121611210","0000000000006111100000600020000060000210006000001000600000103333333333300000000330000000033333333333","0011111100007000070000100001000070000700122222222130000000033000000003301111110311700007110011111100","5151515151100000000550555555011000000005501111110110000000055000000001151015151500110000000050000000","0000000000000000000000002100000000120000000000120000000021000000210000000012000000000000000000000000","0000000000000000000000060000000006500000000652000000065210000006520000000650000000060000000000000000","0000000000000000000000777715000000001100000005070000001007000005000700001000070000000000000000000000","0500000000000000100001000001000000000010050555555500000000100100000100000000100005000000000000000000","0000000000000006000000000010000000000600000000001066666666660000000010000000060000000010000000060000","0003110000003000100000300010000030001000000301000003300011003000000010300000001030000000103000000010","0000000000006666666600111111116610000001221000000120100000012010000001201111111120000002002222222200","0000000000121212121212121212126000000006100000000160000000061000000001600000000612121212120000000000","0000000000000000000055555555557700000077103000030110010010011030110301770000007755555555550000000000","0666666660010000001001000000100100000010010000001066666666666000000006606010000660000000060666666660","0000000000077110000007711442000771144200077114420007711442000700044200070000000007000000000700000000","0000000000000121000000012100000001210000111323111022222222201113231110000121000000012100000001210000","0000000000000050000000015005000050500010510050101050005010105100501010005050001000015005000000500000","0011100000030003000010010010001013101000100100100003000310000011113300000000333000000003330000000033","0666666600010000001001061610100100000010020000002066666666661000000001100000010110000000010222222220","0000000000001110000001000100002222222222100000000150000000055000000005500000000510000000012222222222","0000000000000113110000500000500100010001010001000103000511030100000001010000000100500000500001131100","0000000000000000000000000071002222221010700000000770000000072222221010000000710000000000000000000000","0101010100666666666033333333301000000010200220002010001000102000200020100111001020000000203333333330","0000610000066600111006011660100600000010060000001006000000100600000010060000001006000000100666611110","0000000000661111111660000000066112112116600100100660010010066001001006600100100660010010066112112166","0000000000000000002200000001010000002002110001001020202002001001001000020002000000101000000002000000","0000000000051111115005000000500501111050050000005015055550511000000001100000000155555555550000000000","0000000000004014000000441440000014144100021414412022141441220214144120021400412002140041200666006660","0000000100000000505000000105010000500050000100010000500050000100010000105050000010010000005110010501","0001111000055000055005001100501000550001100000000110011100011000510001050051005005500005500001111000","0000000000000161616100016161610001000001000100000100010000010001000001061100061166110066110610000610","0002221100000211100000221100000021111220022222220000000220000000220000000020000000020000000000000000","0000110000000333300000011110000000330000000000000000033330000011111100033333333001111111100666666660","0000000000005555500001000001000100000100111111111010000000101000500010100050001010000000101111111110","0000000000000515000000100010000010001000001000100000051500000030003000030000030010000000101511511510","0000000000000010000000030300000003030000001030100000103010000300000300030030030010000000102222222220","0000000000011111110010000000101000000010100000001010000000100555500500000005050000000055000000000500","0000000000000000000077777777771000000001330000003310330033011000330001100000000110000000017777777777","0022222200012000021020200002022020000202112000021110222222011000000001100000000110000000016666666666","0001221000006000060000600006000060000600006000060000010010000030000300010000001003000000300111221110","0000000000000011000000050050000005005000001211210000101101000522222250052211225010000000011155555511","0005155150000500001000050000100005000050000500001000050000100005000050000505501000051005500005000010","0000000000000000000005550000005000502220500052000250005030020555003002001000333000011100000000000000","0001166000006001110001000666101000066611600006666610101011116606060666011010101000660606000001111000","3111111113300000000330000000033000100011300101010311100030033000010103311110001130000000033111111113","0030000000003000000003111130000100000100010111010001066601000100000100010000010003000003000066666000","0000000000211111112010000000101022222010100000001020111110201000000010102222201010000000102111111120","0000000000311110000030003300003011101000300010010030333333303000000010301111101030000000103333333330","0000000000000551100051150015005000000500500111151150500000015050000001510000005051000000505144444400","0001515151005100005101510001014444444004100000100140000040041000001001400000101010000044005151515000","0044444000011111110001100011000110001100111111111044444444402222022220333303333055555555506666666660","0011111000041111140004100014000000001400441111144044111114404411011440441101144044111114406666666660","0000000000000000000003330000001011100000333333333311111001010333000000000000000000000000000000000000","0051111100001000301030100030053100003335313000000531310000053130000005310000000530500000050055555555","0000100000000110010000111000106611101001661110010166111001016611101001001110001000011001000000100000","7100101010711010101071107777707110001000710005150071000515007100051500710005150071000515000000000000","0000000000070000000077777777777221001207721000012772100001277221001227777777777700000000000000000000","0000000000000000000003333333303333333333330100103300111111000022002200011100111002222222200000000000","0000000000177000033010700333001777330000007730000017773300001070033300177000033000000000000000000000","0003333000001100110000100001000010000100061333316006130031600613003160061300316006130031600013333100","0000000000001111100002222222001200200210120020021012220222100110701100007777700000717170000070707000","0000000000001000000002077777001000000010020777700300100002020000000101000777700300100000100007777700","3333000000300010000030300600003000001000010000060000600000100001000006000060001000000101000000006000","0000666600000300001031131130103003003006311111300030000030003000003000300000300001000100000011100000","0011111110050000000505022222050502000205050200020505022222050500000005050301030505000000050011111110","0001510000001000100001001001000301010300030303030003030303000303030300010301030000010001000000151000","0012221000010000010002055502000201110200020000020002050102000200000200020105020001000001000012221000","0000000000012222210010000000102000300020200030002020331330202000300020200030002010000000100122222100","0000000000061616160060000000601000000010600000006010161610106000000060100000001060000000600616161600","0000000000600000000061600001006161600100616161610061616161006161600100616000010060000000000000000000","0000000000000100000010012600001201266600121126666612112666661201266600100126000000010000000000000000","0000003000000003300001103333001000033030100000300310010000030101100003001111033000011000000001000000","0000100000000014000000001410000000101400000010000000001000000066100000033610000003361000000066000000","0001131000066613666006461364601666136661111100111133330033331666136661064613646006661366600001131000","0066666600012222221001200002100120000210012000021001266662100121001210012000021001220022100066666600","0060000600000660600000000600000011111100010000001001033330100103113010010333301001000000100011111100","0000001000004444100004000004000404110400040444040004000004000401010400040000040004010104000044444000","0000000000000100000000033000000301010000033300300003310001000663003000030601000000016000000001000000","0100000060611000061106110061100061161100000661100000066110000061161100061100611061100006110100000060","0000015100000010005000010000100010150050020501010000101010000502050000500010000050010000000550000000","0000000000133333333130505050533050505053305050505330505050533050505053133333333100011110000111111110","0000010000000011100000055500000011100500055500500000111005000005550000000011100000000555000000000000","0000000000011000000060066660006000000100600013333360030000016010000010110000030033333310000000000000","4044444404555000055540400004045550000555404000040455500005554040000404555000055540400004044444444444","1166666610106060060110606006011066666601100000000110666666011060000601116000060110600006011166666611","0000000000021000000012121212122000000202100220022120200100021020010001200110000210000000012111111112","3333333333300000000330666666033060660603300011000330001100033000110003300111100330000000033333333333","0001111000004000040001000000104005005004100000000110100001014001111004010000001000400004000001111000","0000005500000005055000005055110555055110005055110000055110000050111000050101100050100010005100000000","0003333000001000010003000000301001001001300033000310001100013003003003010000001000300003000001111000","0012221000020000020010000000200000000020000000002000200000200120000200122222100001200000000020000000","0000000077575757577775050505705050505050750505057007505050500075757570000000000000570057000055005500","0003333000000300300000030030000003003000033300333000400004000001001000000066000000000000001111111111","0000000000000333000000030300000003030000444606333040000000304446063330000404000000040400000004440000","0000000000000000000000000000000000000000131313131010000000101313131310000000000000000000000000000000","0000000000000033300000030030000003030330000300303000103000300100033300600010000060010000006660000000","0001111000066666666030000000032222222222030100103003010010300301001030030100103003000000300022222200","5000000000600001100050000151006111115510166666555115555666616111115510500001510060000110005000000000","0000000000000000000000011110000001001000011333311041330033144030000314403000031440130033144413333114","0000000000000000000000131000000313130000631313600163131360616303036661631313606163131360010313130000","0000000000000161000001610161000161016100616101616061610001606161616160016161610001616161000001610000","4444444444311111111310000000013113113113100100100110010010013113113113100100100110010010013113113113","0300000030003000030000030030000033333300033033033033333333333333333333303111130330300003030003003000","0111111110010000001001011110600600000010010111101051000000155555555555511111111551000000150111111110","0066600000010001000060000060006000106000600110600006000100000066601600000000161000000006160000000016","0000000000000044004000010101004440010000404001044411100100000001010100000044004000000000000000000000","0000000000050005000505001500150506150615051615561505161556150506150615050015001505000500050000000000","0000000000044444444005000000500500000550050000505005050500500500550050050050005005000000500444444440","0000000000002222200000111110000010001000000222000000001000000001010000002020200000111110000022222000","0000660006000600110000060000010076700600077677000010767710001076771000177677100007767700000076700000","0000000000000011000000001100000000000000000111000000001100000000110000000011000000011110000000000000","0000000000000110000000121000000122111110122222221012221111101222222210122211111012222222100111111110","0000000000111111110015555505101111150501155555050111111505011555550510111115010000001510000000110000","0000000000011101110010001000101444444410100000001014444444100100000100001444100000014100000000100000","0000000000000030030000050503000030303000050505050030303030300505550500030303030005050505000333333300","0000000000000131003000300030300100000130300003333030000000003000000030010000010000300030000001310000","0000000000070707070050505050505000000050500000005050707070505000000050505050505050000000505777777750","6666666666400000000430000000033000300003000006000333333330030000060003300030000340000000046666666666","0666666660400000000440111111044000000004404444440440000000044000000004011100011000001010000000660000","0000000000633333600060000060006033306360600000006060333330606000000060601111106060000000606111111160","0003333000000300350000030030500011103333001010000311505110031000001003115051100300101000030011133333","0000002200000005002000005050020005000502005000005005000005007050005000700505000077005000007777000000","0001110000005000500000503050000050305000005030500000503050000050305000000100500000000050000000110000","0016666610010000000101000000060013300006000300000600300030060300033006300030100110030001100130000000","0044400000042224000042242440000422224004042022444442000222244220000024042200024400422224400004444400","0000000000000000003000000005300000030530000053053000305305300530530530053053053005305305300530530530","0000040000000040400000000400000010030600010130606000100306000003003000003333330000033330000003333000","2000222220020000000000000000000002222222220002020002000202000200200202020200022202000000002022222222","0000020000000002000000000200000000020000000002222000000200000000020000000002000000000200002222222222","0000020000222222222220020020020222222220000200200022222222220002002000220002002200022200000000022000","0000020000200002000220000200022000020002200002000220000200022000020002200002000220000200022222222222","2222222222000020000000002000000002000000000200000000222222200220000020002000002000200000200022222220","0200222220020002002020200202000020002000020002020002002200222200002000020000200002000020000200222222","0020000020020202002020002020200222000020002002002022222020200020000022202022202000200000200220000020","0000200000000200000022222222222000000002200000000220000000022222222222200000000220000000022222222222","0222222220000000000000000000000000000000222222222200002000000000200000000200002000200022022222220002","2002222222020200000200000202002000020202020220022200000200000022222222020022020002020200202020020002","0020000200002222020000200202000200020200020002022020200202020020200200002020020002000200002000002222","0002000000222222222200020000000020000000002222222002200000202022222220002222222000200000200020002220","0000020000000002000000000200000000020000000022000000002200000002002000002000020002000000202000000002","0000020000222222222220000000022022222202000022000002220220200000202200000022202002220020020000020000","0020002000002022222202000200200200022220220000000002002222220200200002020000200002000020000200022000","0000200000222222222200020000000020020000020002000022222222220000020000222222222200000200000000020000","0020020200002002020000200202000020020200020202202020002200020000020000000002000000000200002222222222","0000000222222222202000200202002222222222200020000202222222200002000000220200020000002220000222000222","0020222220002020002022222020200020222020002022002002222200200220220020002020202000202000020022000002","0020000200002000020022222222220020000200002000020002220022200220202220002000020000200002000020000200","0000022220222020002020202222222020202002202020200222202020022020222222202002020222200202020000200222","2222222222000002000022222222222000020002202202220200000000000020022222002002222202220200022020222222","0000002000222200200020020020002002002000200222222220020020002002002000222200200000000020000000002000","0200000000020022222220000020002220002000020000200002000020002000002000000000200000200020002200222222","0222222220000002000000000200000000020000000002000022222222220000020000000002000000000200000002220000","0000000000022222222000000000000000000000000000000000000000000000000000000000000022222222220000000000","0222222222020000000202000000020222222222020000000202000000020222222222020000000220000000022000002222","0002002000222222222200020020000000000000002002000002000200222200022200020002000202000200020200022222","0222222222020000000202000000020222222222020000000202000000020222222222020000000220000000022000002222","0002002000222222222200020020000200020000002002222020002202000200022000020022222002002000202000222220","0000200000022222222002000000200200020020020000222002000000000222222222222222220200000000020000002222","0000002000222022222220200200202020020020202022222220202020022020022220202002202022200222200000002000","2222222222000002000022222222222000020002202202220200000000000020022222002002222202220200022020222222","2000020200020222222200000202002002222222020002020000022222220002020202020222202202020000022002000022","2222222222000002000000000200000000020000022222222000000200000000220000000200200000200002002200000022","2000222222020000200000000020002000002000020000200000000020000000002000020000200002000020002000222222","0020222220002020002022222020200020222020002022002002222200200220220020002020202000202000020022000002","2000020000020002220000002002002002222222020020200200002222220000202002020022222202000000002002222222","0000020000000002000002000200200020020020002002020000000200000000220000000200200000200002002200000022","0000000020222220002000002000200000222222200200002002020200200020002020020020002020002000200000002220","0000220200222202020200020202022222220200020200202002022020202002020002020202002002020002022002222202","2222022222200202000220020200022222022222200202020020020202002222022222200202020222220202020000220020","0200002000020000200022222222220202002000020200200002020020000202022220002002002002020200200202022220","0020002000222222222200200020000000200000022222220000002002000000200200200200020200020002000220022200","0200000202020000020002002222222220200200020020020002002202020200220202022022002022020200220002020002","0020002000002222200000200220000200022000020002220020202020200002202002000200200000020020000020002000","0000020000222222222220020020020222222220000200200022222222220002002000220002002200022200000000022000","0000020000200002000220000200022000020002200002000220000200022000020002200002000220000200022222222222","0000020000022222222000000200000000020000222222222200000002002222222222000200020000000002000000022200","0000020000222222222200200200000020022220020002002002002020202202000200020000200002000202000200220022","0200020020002002002000200202000000020000022222222000000200000000020000000002000000000200000000020000","0200002000022000200020002222220000202002222020200202002020020200202002020000200002000020000220002000","0000020000222222222200000200000222222220000000000002222222200200020020020000000002000000002000000000","2222220002002000020202000202022222220202000200020200020002022222220202000200020200022200022222000222","0000020000222222222220020000022002222002002200200002002200000022002200020000002002000000200222222220","0020022220022222002002002200200220220020020022000222222000000200222220020022002002002200202002222220","0022020000222002222000200000202222220200002000200002220200000220202222002002202000200002000020022000","0000200000022222222002000000200200200020020002002002000000202222222222020020002002000200202000000220","2000002000020002000000002222222000200002020020000200002000020000222222020020000202002000022000222222","0020222222202020000220222020022020222222202020200200202020020020220202020222002202022000022000222222","2000020002020022220200000200202000020200020222222200000200000000022220020202222002000200202000022220","0222222220020000002002000000200200000020020000002002222222200200000020020000002002000000200222222220","0002002000222222222200020020000222222220020000002002222222200200000020022000022020200002020022222200","0000020000222222222220020000022002222002002200200002002200000022002200020000002002000000200222222220","0000220200222202020200020202022222220200020200202002022020202002020002020202002002020002022002222202","0020000022222222220002020200000202020000222222222200200200202222220020022202002020202200200020020020","2222222222202020000222222020202020200200202022222222222002020020000202002000020000222002002220002200","0000000200222202222220020200002002020000200202000022220200002002020000200202000022222000000000200000","2222222222000002000000000200000000020000022222222000000200000000220000000200200000200002002200000022","0020000022002022220002002020000200202000220022222202002020000200202000020222020202000000200200222200","0200000020020222002022220222220202020020020202002002020220202220200220020222002002020200200202022220","2000222222020000200000000020002000002000020000200000000020000000002000020000200002000020002000222222","2000020000020222222000000200002002222220020002000000222222220002000020020200002002022222202002000020","0222222222020000000202000000020222222222020000000202000000020222222222020000000220000000022000002222","2000000220020022200000002000000000200000220022222202002002000200200200020200020002000000002022222222","0000020000000002000000000200000000020000000022000000002200000002002000002000020002000000202000000002","0020020000002002000002222222202000020000000002000022222222220002022000002002020022000200220000020000","0200020020020002002020002220020000020000000222000022200200000222222222022222222002000200000222222222","0200000222020022200022200020000200222222020002020002000200202220220022020002002002002000200200200020","2000020000020002000000022222220000020002220002000202000200020200200002020200022202000000002022222222","2222222222202020000222222020202020200200202022222222222002020020000202002000020000222002002220002200","0002002000222222222200020020000222222220020000002002222222200200000020000002000022222222220000020000","0002002000222222222200020020000000000000002002000002000200222200022200020002000202000200020200022222","0000200000022222222002000000200200020020020000222002000000000222222222222222220200000000020000002222","0000020000222222222200002200000000220002000202000200020020200022002020200200020000020200200222200002","0002002000022222222000020020002222222222000200200000222222000200002020002000002000200000200022222220","0000000000222222222220000000022000000002200000000220000000022000000002200000000222222222220000000000","0002000000000222222200200000020020000002020200000220002200200000002020000000200000000200000002200000","2222222222200022000220020200022020020002200202000220002222222000220002222202000220000200022000022222","0020000020020202002020002020200222000020002002002022222020200020000022202022202000200000200220000020","2000222222200020000220002000022000200002200020000220002222222000200002200020000220002000022000222222","0000000200222200020020020222222002000200200200020022220202002002020200200200020022220002000000022200","2222222222000002000000000200000000020000000002000022222222220000020000000002000000000200002222222222","2000200020020222002000020200202202222222020202002002022220200202020220020002002002202200202202020220","0200020020002002020022222222222000000002202222220200200002000022222200022222222000000200002222222222","0020000200000200200022222222220000000000022220002002002200200222220020022222002002002000200202202220","0020000200222222222200200002000022222200222000022200202202000220220202000000000002020200202000202002","2222222000000000200200000020200000002200000000202000000020020000002000000000200200000002020000000020","0022220000000002000000000200000000020000000022000000002200000002002000002000020002000000202000000002","0222222220000000002002222222200000000020222222222200000002002222222222000200020000002202000000002200","0020020200222222222220000000022022222202002000020000222222000000020000020002002002000202200000020000","2222222222000002000000002000000222222220020000002002000000200222222220020000002002000000200222222220","0200020200020002020022220222220202020200020200020002020002000202022222002000020002020002000202022222","0000020000222222222220000000022022222202000022000002220220200000202200000022202002220020020000020000","0020002000002000200022222022220020020020002002002000200220202222202020200020020020002020202222220002","0000020000000002000000000200000000020000000022000000002200000002002000002000020002000000202000000002","2222222222000200200000020020002222222222200200200220020020022002002002220000000220000000022222222222","0002200200222002222200200000002222202020002000000000200222222222200200200022222220002002002222200200","0002002000022222222000020020002222222222000002000002222222200200020020020002002002222222202200000022","0002000200222222222220200220020202002202222222202202020020000222222222022222220202020000020222220222","0200022020020000200022202222220200022020020020200222200020002200020000020002002002000222000200220022","0020222222202020000220222020022020222222202020200200202020020020220202020222002202022000022000222222","0002002000222222222200020020000000000000002002000002000200222200022200020002000202000200020200022222","0000000000222222222200000000000000000000000000000002222222200000000000000000000000000000002222222222","0222222222020000000202000000020222222222020000000202000000020222222222020000000220000000022000002222","2222222222000020000000002000000000220000000020200000002002000000200020000020000000002000000000200000","0200222220020000020022200020000200020000020022222202200202022200020202020020200202002020022202020222","0020000002002002000200200200020220220202022002002220200200220020020002002002000202000200020200000002","2220000022002022220000202200200200220020020022002002202200202200220020020022002002020220022202020002","0020022200002002020022222202002020220200202022020020202222002020220200202222020200200202020020020222","2000222220020000000000000000000002222222220002020002000202000200200202020200022202000000002022222222","0222220002020002002002222222000200020000022222000200020000202222220200022222000200020000200202022200","2222200200002002222222222200020020020002222222222200000000002222222222002222222022200000200022222220","0000020000222222222220002200022000220002000202002002200222200000000000000002000000000200002222222222","0222222220020000002002000000200222222220020000020002022002000200020200020220002020000200202000002002","0000020020222002020020202222222020200200202220020020202222222020200200222020020000002002000000222222","0222222220020000002002000000200200020020020002002002000200200200020020000022000200220200022200022222","0020000200002002200000202200000020000000222222222200200000000020200000002002000000200022000022200022","2000222222020000200000000020002000002000020000200000000020000000002000020000200002000020002000222222","2222222222000002000000000200000000020000022222222000000200000000220000000200200000200002002200000022","2220022220202000000020200000002020222222220000200020200220202020022020202020200222002020022000022000","2000020000020222222200000200002000020020020222220200000000000000220200020022020202002202022002000222","2002222222020202000200022222222002020002020222222200002000200000222220020022222002002000202000200220","0200000202020000020002002222222220200200020020020002002202020200220202022022002022020200220002020002","0020022222222222000200200200022222222222200022000222222200022000222222002002000222222200020020020222","2222222222000002000000000200002222222222200002000220200220022002020202202002200220020202022000020022","2002222220020200002000020000202002222220020000000000022222200002020020020200000002020000022002222222","0200022222222220000202000000200200000200202002202222222000000020022222222220020000200002000020022222","0000020000002002020002000200202000020002000000000000000200000000020000000002000000000200002222222222","0000020000222222222220020000022002222002002200200002002200000022002200020000002002000000200222222220","0000020000000022000000220022002200000022002222220000000200002222222222022222222002000000200222222220","0000020000222222222200000200000222222220000002000022222222220200000020020000002002222222200200000020","0000020000222222222200000200000222222220000002000022222222220200000020020000002002222222200200000020","0200020222020022020222202202020200220202020022020222202202022200220202020222022202000202000200020200","0020000000002222222002000000202222222222020002000202000200020222222222020000000202000000020222222222","0020000022222222220002020200000202020000222222222200200200202222220020022202002020202200200020020020","2222202000200022222220002020022000202002200020200202020020020202002002002002000200200200022202020222","0222222220000020002022222222220000200020022222222000020000000020000000202000002000200000200022222220","2222222222000002000002222222200200020020022222222002000200200222222220002002000000022000002220022220","0222222220020000002002000000200222222220020000020002022002000200020200020220002020000200202000002002","0000000000000000000000000000000000000000222222222200000000000000000000000000000000000000000000000000","0020022222002000020022222002000020000200002000200002220020200220222002002000200000200020000020002000","2000222222020002020000000202002000222222020022020200002202020000200222020022222202002000022000222222","2222222222000200200000020020002222222222200200200220020020022002002002220000000220000000022222222222","0000020000200002000220000200022000020002222222222200000200002000020002200002000220000200022222222222","2222222222200022000220020200022020020002200202000220002222222000220002222202000220000200022000022222","0020000200000200200002222222200000020000000002000000000200002222222222000200200000200002002200000022","0222222220000002000000000200000000020000222222222200002200000000220000000202000200200200022200022222","0020002000002000200022222022220020020020002002002000200220202222202020200020020020002020202222220002","0000020000000002000000000200000000020000000022000000002200000002002000002000020002000000202000000002","0000020000222222222220020020020222222220000200200022222222220002002000220002002200022200000000022000","2222222222000002000000000200002222222222200002000220200220022002020202202002200220020202022000020022","2000020000020222222000000200000000220000220222222002000200000200020000020002000002000000002022222222","2000222222020000200000000020002000002000020000200000000020000000002000020000200002000020002000222222","0000020000222222222200200200000020022220020002002002002020202202000200020000200002000202000200220022","0022220000000002000000000200000000020000000022000000002200000002002000002000020002000000202000000002","0222222220020000002002000000200222222220000000000002222222200000020000000022000000020020002220000222","2222222222000002000002000200200020020020002002020000000200002222222222000002000000000200000000020000","0000022222222202000220020200022002022222200202000222220200022002022222200202000222220200020000020222","2000200200020002200000022222200000020000220002000002022222200200022000020200002002000000002022222222","0000020000222222222220020000022002222002002200200002002200000022002200020000002002000000200222222220","0020000200222222222200200002000222002220202022020200000000002222222222020002222002000200002022222222","0000020000200002000220000200022000020002200002000220000200022000020002200002000220000200022222222222","2220000022002022220000202200200200220020020022002002202200202200220020020022002002020220022202020002","2000020000020002222000002000202002020200020002200000000202000002200022020020002002002000202000222220","2222222222200022000220020200022020020002200202000220002222222000220002222202000220000200022000022222","0000020000022222222000200002000002002000222222222200000200000222222220002002020002000200202000220002","0002000000222222222200020000000002000000000222222000220000200020200200020002000002002222002022000022","0200000000020002222222222200020200220002020022000220002200022002020002002002000202020200022000222222","0020022222002002000222222200020020022222002002000202220200020220222222002002000200200200020020022222","2002222222020000000200000000022002222002200200200220020020022002002002200222200220000000022000000222","0000000000000000000000000000000000000000222222222200000000000000000000000000000000000000000000000000","0200020000020002000002000200000222222222020000000002000000000222222000020000200020000020002000002000","2000002000020000200002022220020000022020000002220000000222000200202020020200200220020020022000022000","0000200000000002000000000200000002020200020202002002020000200202000002200200200200020020000002222000","0000200000222222222200002000000002000000000200200000200020000220222222002000200000200020000020222222","2222222222000002000000000200000000020000000002000022222222220000020000000002002000000200002222222222","0000020000222222222200000200000222222220000000000022222222222002002002002200220000020020002222222222","0222222200020000020002000202000202020200020022020002000202000200020200020202020220000202022000000020","0222222200200000020002222222200000000020022222222000000000200222222220020202002002020002022002222202","2222222222000002000000000200000000020000022222222000000200000000220000000200200000200002002200000022","0000020000222222222200200002000022222200000000000022222222222000000002200200200220022220022000000222","2002002000020202222000200020000220222222202002002000200200200220022220002002020220202200200200022002","0000002000222022222020200020202022222222202000202020202222202020002000222022220200002220220002002002","0000020000222222222200000000000222222220020000002002000000200222222220002200202022020002000022220022","2000020002020022220200000200202000020200020222222200000200000000022220020202222002000200202000022220","2000020000020222222000000200002002222220020002000000222222220002000020020200002002022222202002000020","2000020000020202002000020200202002020020022002000200200200020000020000020000020002000220002002220000","0000200000000200000022222222222000000002200000000220000000022222222222200000000220000000022222222222","0000020000002222220000200002000020200200002002020000200022000020000000000000000222222200020000000222","2222222000000000200200000020200000002200000000202000000020020000002000000000200200000002020000000020","2222222222200000000220000000022002222002200200200220020020022002002002200000000220000000022222222222","0222222220000002000000000200000000020000222222222200002200000000220000000202000200200200022200022222","2000020000020002000000022222220000020002220002000202000200020200200002020200022202000000002022222222","0002002000222222222200020020000200020000002002222020002202000200022000020022222002002000202000222220","0000020000000002000022222222220002022000000202200000200202000020020200200002000200000200000000020000","0002002000222222222200020220000022222200000002020022222222220000020200002002002000202200202202022020","0002002000222222222200020220000022222200000002020022222222220000020200002002002000202200202202022020","2222222222000020000000002000000000220000000020200000002002000000200020000020000000002000000000200000","2222222222000002000000000200000000220000000202220000200200202200020002000002000000000200000000020000","0222222220020000002002000000200222222220020000020002022002000200020200020220002020000200202000002002","0020000200002002200000202200000020000000222222222200200000000020200000002002000000200022000022200022","2000222222020000200000000020002000002000020000200000000020000000002000020000200002000020002000222222","2000020000020222222200002000202002020002020002020000002220200000020000020022020002020220202000020002","2000020000020222222200002000202002020002020002020000002220200000020000020022020002020220202000020002","0000020000022222222000000200000200020020002002020000000200002222222222002002020022000200220000020000","2222222222002000000000200000000020000000002000000000222222200020000020020000002002000000202000022220","0222222220020002002002000200200222222220020002002002000200200222222220022222222000000200002222222222","0002002000222200222200020020002222002222000200200022220022220002002000020202002002020002022002222202","0002202000222000200000200220202222222020002002202000200020000222020200202002002000200200200020200002","0020020200222222222220000000022022222202002000020000222222000000020000020002002002000202200000020000","0020020000002002222202002200000200220000220202222202000200000200020000020002000002000200000200020000","0000020000222222222220020000022002222002002200200002002200000022002200020000002002000000200222222220","2222222222000002000000002000000222222220020000002002000000200222222220020000002002000000200222222220","0200000000022222222202000200002000020000002222222000200200000020020000000002000000000200000000020000","0000020000000022220002220002000000202000000002000000022022222220020002000002002000000022000022220000","0000020000022222222202000000002202222222020002000002022222222202020002020220020220020000022002000022","0020002000202000200002002222222020202002002020200200202020020220222222002000202020200020200200222202","0222220000000022020002020020200020220200220000002202222222200200000020002000020000020020002222222222","0000200000000020020000020000200020022202222222000200000000000222222220020000002002000000200222222220","0000022220222202002000020222202002020020200202222002020220020202022020002002020002020200202000020002","2220020200002002222220202002002022200200202022222220202002000200200200202020020020202002002020222222","0002002000222222222200020020000000020000222222222200000200000000020000020000002002000000200222222220","0020222220002020002020202222202022200020202020002020202222202020202002002020020000202022000020220022","0200000200222222022202020222022222220202020202002002222202020020022000222222220200200202002200020022","2222222222000002000022222222222000020002202202220200000000000020022222002002222202220200022020222222","0222220022020000220022222200220200202200222222222220200000020022222200222222222200020020002220000222","2000020000020222222200020202022000200020020222222200002000200000222220020022222002002200202002020002","0022222002002002020202002202020202222202220002020202000202020202222202020002020202000220020202220022","0020000022222222220002020200000202020000222222222200200200202222220020022202002020202200200020020020","0020002000002022222202000200200200022220220000000002002222220200200002020000200002000020000200022000","2000020000020002000000022222202002020020020202002000020200200002222220020002002002000200202002222202","2000222222020002020000000202002000222222020022020200002202020000200222020022222202002000022000222222","0020022222002000020022222002000020000200002000200002220020200220222002002000200000200020000020002000","2222222222000020000002222222200002002000222222222200200002000222222220002222220000200002000022222200","2222022222200202000220020200022222022222200202020020020202002222022222200202020222220202020000220020","2222222222000002000000000200000000220000000202220000200200202200020002000002000000000200000000020000","0200200020002002020022222222222000000002022222222002000000200200020020000022000000020200022220002222","0000020000222202222220022200002002002020200200020222220220202002000000200202020022220202020000220222","0020000200002222020000200202000200020200020002022020200202020020200200002020020002000200002000002222","0020000200002222020000200202000200020200020002022020200202020020200200002020020002000200002000002222","2002222222020000000200222222022002002002200222200220020020022002222002202222200220000020022000000222","0000002000222022222220200200202020020020202022222220202020022020022220202002202022200222200000002000","0000020000002222220000200002000020200200002002020000200022000020000000000000000222222200020000000222","0000020000222222222200200200000020022220020002002002002020202202000200020000200002000202000200220022","0000020000022222222000000200000200020020002002020000000200002222222222002002020022000200220000020000","0222222200020000020002000202000202020200020022020002000202000200020200020202020220000202022000000020","2222222222000002000000000200002222222222200002000220200220022002020202202002200220020202022000020022","0000020000222222222200000200000222222220000000000002222222200200020020020000000002000000002000000000","0002002000222222222200020020000000000000002002000002000200222200022200020002000202000200020200022222","0002002000222222222200020020000200020000002002222020002202000200022000020022222002002000202000222220","2000000000222222222220200200022020020002002002000222222200020020020002020202000202002222222000200000","0000020000000022220002220002000000202000000002000000022022222220020002000002002000000022000022220000","0000020000002002020000200202000200020020020002002020000200020000020200000000200000000200000222200000","0020022222222222000200200200022222222222200022000222222200022000222222002002000222222200020020020222","0002200200222002222200200000002222202020002000000000200222222222200200200022222220002002002222200200","0000200000000200000022222222222000000002200000000220000000022222222222200000000220000000022222222222","0000020000222222222200200002000002002000222222222220000200020222222220020002002002000202200000020000","0222222220000000000000000000000000000000222222222200002000000000200000000200002000200022022222220002","2002222222020000000200000000022002222002200200200220020020022002222002200200200220022220022000000222","0000000220022222200000000200000000020000000002000022222222220000020000000002000000000200000000020000","0222222220020002002002000200200222222220020002002002000200200222222220022222222000000200002222222222","2000222222020000200000000020002000002000020000200000000020000000002000020000200002000020002000222222","2220002000202022222220200020002020222222220002020220202202222020020000222022020020000220002002220222","0222222220020000002002000000200200000020020000002002222222200200000020020000002002000000200222222220","2002222222020000200000000200000000020000220022020002020200220200020000020002000002000000002022222222","2222222222000200200000020020002222222222200200200220020020022002002002220002002220000000022000000022","2000020002200002000222222222220000000000222222222220000000002002222220202222222220000200002000020000","2002002000020202222000200020000220222222202002002000200200200220022220002002020220202200200200022002","0000020000222222222200000200000222222220000000000002222222200200020020020000000002000000002000000000","0000002000222022222220200200202020020020202022222220202020022020022220202002202022200222200000002000","2222222222000002000000000200000000220000000202220000200200202200020002000002000000000200000000020000","0020020000002000200002002222220200002000220000200002000020000200222222020000200002000020000200222222","0200022222222220000202000000200200000200202002202222222000000020022222222220020000200002000020022222","0000200000022222222002000000200200200020020002002002000000202222222222020020002002000200202000000220","2222222220000000002000000000202000000020200000002022222222202000000000200000000020000000022222222222","2000000200020000020000022222220000000200220020020002000202000200020200020002220002000000002022222222","2222222222002000000000200000000020000000002000000000222222200020000020020000002002000000202000022220","0222222220000002000022222222220200020020022222222002000200200222222220022222222000000200002222222222","0000020000200002000220000200022000020002200002000220000200022000020002200002000220000200022222222222"],e}();i.default=o,cc._RF.pop()},{}],BlockClassic:[function(e,t,i){"use strict";cc._RF.push(t,"25e25x3zuFFC5UBMzwVDmJj","BlockClassic"),Object.defineProperty(i,"__esModule",{value:!0}),i.BlockClassic=void 0,function(e){e.data=[[[0,0,0,0,1,1,1,1,0,0,0,0,0,0,0,0],[0,0,1,0,0,0,1,0,0,0,1,0,0,0,1,0],[0,0,0,0,1,1,1,1,0,0,0,0,0,0,0,0],[0,0,1,0,0,0,1,0,0,0,1,0,0,0,1,0]],[[0,0,0,0,0,2,2,0,0,2,2,0,0,0,0,0],[0,0,0,0,0,2,2,0,0,2,2,0,0,0,0,0],[0,0,0,0,0,2,2,0,0,2,2,0,0,0,0,0],[0,0,0,0,0,2,2,0,0,2,2,0,0,0,0,0]],[[0,0,0,0,0,0,3,0,0,3,3,3,0,0,0,0],[0,0,0,0,0,0,3,0,0,0,3,3,0,0,3,0],[0,0,0,0,0,0,0,0,0,3,3,3,0,0,3,0],[0,0,0,0,0,0,3,0,0,3,3,0,0,0,3,0]],[[0,0,0,0,0,4,0,0,0,4,4,4,0,0,0,0],[0,0,0,0,0,0,4,4,0,0,4,0,0,0,4,0],[0,0,0,0,0,0,0,0,0,4,4,4,0,0,0,4],[0,0,0,0,0,0,4,0,0,0,4,0,0,4,4,0]],[[0,0,0,0,0,0,5,5,0,5,5,0,0,0,0,0],[0,0,0,0,0,0,5,0,0,0,5,5,0,0,0,5],[0,0,0,0,0,0,0,0,0,0,5,5,0,5,5,0],[0,0,0,0,0,5,0,0,0,5,5,0,0,0,5,0]],[[0,0,0,0,0,0,0,6,0,6,6,6,0,0,0,0],[0,0,0,0,0,0,6,0,0,0,6,0,0,0,6,6],[0,0,0,0,0,0,0,0,0,6,6,6,0,6,0,0],[0,0,0,0,0,6,6,0,0,0,6,0,0,0,6,0]],[[0,0,0,0,0,7,7,0,0,0,7,7,0,0,0,0],[0,0,0,0,0,0,0,7,0,0,7,7,0,0,7,0],[0,0,0,0,0,0,0,0,0,7,7,0,0,0,7,7],[0,0,0,0,0,0,7,0,0,7,7,0,0,7,0,0]],[[0,0,0,0,0,8,8,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,8,0,0,0,8,0,0,0,0,0,0],[0,0,0,0,0,8,8,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,8,0,0,0,8,0,0,0,0,0,0]],[[0,0,0,0,0,9,0,0,0,9,9,0,0,0,0,0],[0,0,0,0,0,9,9,0,0,9,0,0,0,0,0,0],[0,0,0,0,0,9,9,0,0,0,9,0,0,0,0,0],[0,0,0,0,0,0,9,0,0,9,9,0,0,0,0,0]]]}(i.BlockClassic||(i.BlockClassic={})),cc._RF.pop()},{}],BlockCrazy:[function(e,t,i){"use strict";cc._RF.push(t,"3685bwuXEtMfLRjwTw/df8J","BlockCrazy"),Object.defineProperty(i,"__esModule",{value:!0}),i.BlockCrazy=void 0,function(e){e.data=[[[0,0,0,0,0,1,1,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,1,0,0,0,1,0,0,0,0,0,0],[0,0,0,0,0,1,1,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,1,0,0,0,1,0,0,0,0,0,0]],[[0,0,0,0,0,0,2,0,0,2,0,0,0,0,0,0],[0,0,0,0,0,2,0,0,0,0,2,0,0,0,0,0],[0,0,0,0,0,0,2,0,0,2,0,0,0,0,0,0],[0,0,0,0,0,2,0,0,0,0,2,0,0,0,0,0]],[[0,0,0,0,0,3,0,0,0,3,3,0,0,0,0,0],[0,0,0,0,0,3,3,0,0,3,0,0,0,0,0,0],[0,0,0,0,0,3,3,0,0,0,3,0,0,0,0,0],[0,0,0,0,0,0,3,0,0,3,3,0,0,0,0,0]],[[0,4,0,0,0,0,4,0,0,0,4,0,0,0,0,0],[0,0,0,0,0,0,0,4,0,4,4,0,0,0,0,0],[0,0,0,0,0,4,0,0,0,4,0,0,0,0,4,0],[0,0,0,0,0,4,4,0,4,0,0,0,0,0,0,0]],[[0,0,5,0,0,5,0,0,0,5,0,0,0,0,0,0],[0,0,0,0,0,5,5,0,0,0,0,5,0,0,0,0],[0,0,0,0,0,0,5,0,0,0,5,0,0,5,0,0],[0,0,0,0,5,0,0,0,0,5,5,0,0,0,0,0]],[[0,0,0,0,0,6,6,6,0,0,0,0,0,0,0,0],[0,0,6,0,0,0,6,0,0,0,6,0,0,0,0,0],[0,0,0,0,0,6,6,6,0,0,0,0,0,0,0,0],[0,0,6,0,0,0,6,0,0,0,6,0,0,0,0,0]],[[0,0,0,0,7,7,7,7,0,0,0,0,0,0,0,0],[0,0,7,0,0,0,7,0,0,0,7,0,0,0,7,0],[0,0,0,0,7,7,7,7,0,0,0,0,0,0,0,0],[0,0,7,0,0,0,7,0,0,0,7,0,0,0,7,0]],[[0,8,0,0,0,8,8,0,0,8,8,0,0,0,0,0],[0,0,0,0,0,8,8,8,0,8,8,0,0,0,0,0],[0,0,0,0,0,8,8,0,0,8,8,0,0,0,8,0],[0,0,0,0,0,8,8,0,8,8,8,0,0,0,0,0]],[[0,0,9,0,0,9,9,0,0,9,9,0,0,0,0,0],[0,0,0,0,0,9,9,0,0,9,9,9,0,0,0,0],[0,0,0,0,0,9,9,0,0,9,9,0,0,9,0,0],[0,0,0,0,9,9,9,0,0,9,9,0,0,0,0,0]]]}(i.BlockCrazy||(i.BlockCrazy={})),cc._RF.pop()},{}],BlockQuest:[function(e,t,i){"use strict";cc._RF.push(t,"a3b0abE6R5MLa+BeSNR9yKo","BlockQuest"),Object.defineProperty(i,"__esModule",{value:!0});var o=function(){function e(){}return Object.defineProperty(e,"isInWXChat",{get:function(){return"wechatgame"==cc.sys.browserType},enumerable:!1,configurable:!0}),e.timeFormat=function(e){var t,i,o;return void 0===e&&(e=0),i=("0"+((t=e>0?new Date((new Date).getTime()+24*e*3600*1e3):new Date((new Date).getTime()-24*e*3600*1e3)).getMonth()+1)).slice(-2),o=("0"+t.getDate()).slice(-2),t.getFullYear()+"-"+i+"-"+o},e.skinServer2Local=function(e){return{201:0,202:1,203:2,204:3,205:4}[e]},e.propLocal2Server=function(e){switch(e){case 0:return 1018;case 1:return 1017;case 2:return 1019;case 3:return 1020}return-1},e.propServer2Local=function(e){switch(e){case 1017:return 1;case 1018:return 0;case 1019:return 2;case 1020:return 3}return-1},e.LOGD=function(e,t){if(this.debugMode){var i=(e=e||"global")+" : "+t;console.log(i)}},e.LOGE=function(e,t){if(this.debugMode){var i=(e=e||"global")+" : "+t;console.error(i)}},e.IsWechatPlatform=function(){return!1},e.debugMode=!1,e.StateInfo={networkConnected:!0,networkType:"none",isOnForeground:!0},e.SystemInfo={clientId:"",intClientId:24132,webSocketUrl:"wss://elsfkwss.nalrer.cn",loginUrl:"https://openelsfk.nalrer.cn/",shareManagerUrl:"https://market.touch4.me/",deviceId:"wechatGame",appId:9999,gameId:20082,cdnPath:"https://marketqn.nalrer.cn/teris/",remotePackPath:"remote_res/res.zip",biLogServer:"https://cbi.touch4.me/api/bilog5/text",errorLogServer:"https://clienterr.touch4.me/api/bilog5/clientlog",isReadyState:!0},e.UserInfo={userId:0,userName:"",userPic:"",authorCode:"",systemType:0,model:"Unknown device",system:"iOS 10.0.1",loc:"",scene_id:"",scene_param:"",invite_id:0,wxgame_session_key:""},e}();i.default=o,cc._RF.pop()},{}],CTimer:[function(e,t,i){"use strict";cc._RF.push(t,"ae839v12m9DlJJqR5t0D8/F","CTimer"),Object.defineProperty(i,"__esModule",{value:!0});var o=e("../Engine"),n=function(){function e(){this.timers={}}return e.prototype.setup=function(e,t,i){this.timers[e]={time_init:Math.ceil(t*o.default.framehz),time:0,cancel_cb:i,exdata:0,firstRender:!1}},e.prototype.getFirstRenderFlag=function(e){return this.timers[e]&&this.timers[e].firstRender},e.prototype.resetFirstRenderFlag=function(e){this.timers[e]&&(this.timers[e].firstRender=!1)},e.prototype.trigger=function(e,t){this.timers[e].firstRender=!0,this.timers[e].time=this.timers[e].time_init,this.timers[e].exdata=t},e.prototype.cancel=function(e){this.timers[e].time=0,this.timers[e].firstRender=!1,this.timers[e].cancel_cb&&this.timers[e].cancel_cb()},e.prototype.getStat=function(e){return this.timers[e].time},e.prototype.getExtendData=function(e){return this.timers[e].exdata},e.prototype.update=function(){for(var e in this.timers)this.timers[e].time>0&&(this.timers[e].time--,0==this.timers[e].time&&this.cancel(e))},e}();i.default=n,cc._RF.pop()},{"../Engine":"Engine"}],CaptureToNative:[function(e,t,i){"use strict";cc._RF.push(t,"93cdbvI3zlPQrmmsMm+zkt5","CaptureToNative");var o=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function o(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),n=this&&this.__decorate||function(e,t,i,o){var n,a=arguments.length,s=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,o);else for(var c=e.length-1;c>=0;c--)(n=e[c])&&(s=(a<3?n(s):a>3?n(t,i,s):n(t,i))||s);return a>3&&s&&Object.defineProperty(t,i,s),s};Object.defineProperty(i,"__esModule",{value:!0});var a=cc._decorator,s=a.ccclass,c=(a.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._width=0,t._height=0,t}return o(t,e),t.prototype.capture=function(e){var t=this;this.init(),this.camera.enabled=!0,this.schedule(function(){var i=t.initImage();t.saveFile(i,e),t.camera.enabled=!1},1,0)},t.prototype.initImage=function(){var e=this.texture.readPixels();return this._width=this.texture.width,this._height=this.texture.height,this.filpYImage(e,this._width,this._height)},t.prototype.createCanvasWithData=function(e){var t=new cc.Texture2D;t.initWithData(e,32,this._width,this._height);var i=new cc.SpriteFrame;i.setTexture(t);var o=new cc.Node;o.addComponent(cc.Sprite).spriteFrame=i,o.zIndex=cc.macro.MAX_ZINDEX,o.parent=cc.director.getScene();var n=cc.winSize.width,a=cc.winSize.height;o.x=n/2,o.y=a/2,o.on(cc.Node.EventType.TOUCH_START,function(){o.parent=null,o.destroy()}),this.captureAction(o,n,a)},t.prototype.saveFile=function(e,t){},t.prototype.filpYImage=function(e,t,i){for(var o=new Uint8Array(t*i*4),n=4*t,a=0;a<i;a++)for(var s=(i-1-a)*t*4,c=a*t*4,r=0;r<n;r++)o[c+r]=e[s+r];return o},t=n([s],t)}(e("./TextureRenderUtils").default));i.default=c,cc._RF.pop()},{"./TextureRenderUtils":"TextureRenderUtils"}],ComboAnimation:[function(e,t,i){"use strict";cc._RF.push(t,"42f87r4+u9ImZ3ylIXyKSjq","ComboAnimation"),cc.Class({extends:cc.Component,properties:{nodeGood:cc.Node,nodeCombo:cc.Node,nodeAwesome:cc.Node},onLoad:function(){this.comboNumber=0,this.playAnimationCount=0,this.isCombo=!1,this.nodeGood.active=!1,this.nodeCombo.active=!1,this.nodeAwesome.active=!1},start:function(){this.play()},init:function(e,t){if(this.comboNumber=t,this.isCombo=e,e){var i=this.nodeCombo.getChildByName("heji").getChildByName("label").getComponent(cc.Label);i&&(i.string=t+"")}},play:function(){this.playAnimationCount=0,this.isCombo?this.comboNumber>=3&&this.showCombo():3==this.comboNumber?this.showGood():this.comboNumber>=4?this.showAwesome():this.node.removeFromParent()},showGood:function(){var e=this;this.nodeGood.active=!0;var t=this.nodeGood.getComponent(cc.Animation);t.play(),this.playAnimationCount++,t.on("finished",function(t,i){e.animationEnd()},this)},showAwesome:function(){var e=this;this.nodeAwesome.active=!0;var t=this.nodeAwesome.getComponent(cc.Animation);t.play(),this.playAnimationCount++,t.on("finished",function(t,i){e.animationEnd()},this)},showCombo:function(){var e=this;this.nodeCombo.active=!0;var t=this.nodeCombo.getComponent(cc.Animation);t.play(),this.playAnimationCount++,t.on("finished",function(t,i){e.animationEnd()},this)},animationEnd:function(){this.playAnimationCount--,this.playAnimationCount<=0&&this.node.removeFromParent()}}),cc._RF.pop()},{}],Config:[function(e,t,i){"use strict";cc._RF.push(t,"e3f10G/mm9JcKH5Mjj/IKE2","Config"),Object.defineProperty(i,"__esModule",{value:!0});var o=e("./Bitmap"),n=e("./BlockClassic"),a=e("./BlockCrazy"),s=function(){function e(){}return e.getBitmap=function(e){for(var t=o.default.data[e],i=[],n=0,a=0;a<10;a++){for(var s=[],c=0;c<10;c++)s[c]=parseInt(t[n]),n++;i.push(s)}return i},Object.defineProperty(e,"isDebug",{get:function(){return cc.sys.os==cc.sys.OS_OSX},enumerable:!1,configurable:!0}),e.COLUMNS=10,e.ROWS=21,e.GRIDW=14,e.GRIDH=23,e.GRIDSIZE=322,e.WENDING=15,e.MAX_BLOCK_QUEUE=500,e.MAX_MAGIC=cc.sys.os==cc.sys.OS_OSX?100:350,e.CONFIG_LOCAL={openEmergency:!1,auto_attack:{stage:[0,50,100,150,200,250,300,1e6],step:[12,11,9,8,7,7,6]},auto_attack_endless:{stage:[0,5,10,15,20,25,30,35,40,45,1e6],step:[12,11,9,8,7,7,6,5,4,3]},gem_endless:{level:[0,5,10,15,20,25,30,50,1e6],gem:[{deep:2,d1:1},{deep:4,d1:1,d2:1},{deep:6,d1:1,d2:1,d3:1},{deep:8,d1:1,d2:1,d3:1},{deep:10,d1:2,d2:1,d3:1},{deep:10,d1:2,d2:2,d3:1},{deep:10,d1:2,d2:2,d3:2},{deep:10,d1:3,d2:2,d3:3}]},winline:{stage:[0,15,50,1e6],line:[6,4,2]},winstep_new:{stage:[0,50,100,150,200,250,300,350,400,450,500,550,600,1e6],step:[30,25,20,18,16,14,12,10,8,6,4,2,0]},winstep_difficulty:{stage:[[50,15],[100,15],[150,15],[200,20],[250,20],[300,20],[350,25],[400,25],[450,25],[500,30],[550,30],[580,30],[590,35],[600,35],[610,35],[615,40]]},winstep:{stage:[0,50,1e6],step:["unlimited","config"]},add_magic:{clear:[0,1,5,10,15],combo:2},bgm:43},e.SHARE_TYPE={DELIVERY:"delivery",GAME:"game",HOMEPAGE:"homepage",GAME_QQH_MAKE:"game_qqh_make",HOMEPAGE_GROUP_RANK:"homepage_group_rank",GAME_QQH_WIN:"game_qqh_win",GAME_KEEP_STAR:"game_keep_star",GAME_SHARE_ADD5:"game_share_add5",GAME_SHARE_DEL5:"game_share_del5",GAME_SINGLE_WIN:"game_single_win",GAME_VS_WIN:"game_vs_win",SHARE_GIFT:"share_gift",UNLOCK_GIFT:"unlock_gift",SHARE_REVIVE:"share_revive",HOME_REWARD:"home_reward"},e.PRODUCT_CONFIG={1301:{url:"image/prop_icons/g01",scale:.35,y:5.65},1302:{url:"image/prop_icons/g02",scale:.39,y:5.65},1303:{url:"image/prop_icons/g03",scale:.3,y:14.2},1304:{url:"image/prop_icons/g04",scale:.39,y:7},1305:{url:"image/prop_icons/g05",scale:.4,y:2.3},1306:{url:"image/prop_icons/g06",scale:.34,y:1.95},1307:{url:"image/prop_icons/g07",scale:1,y:5.9},101:{url:"image/prop_icons/item_box",scale:1,rotation:0},201:{url:"image/prop_icons/pifu00",scale:1,rotation:0},202:{url:"image/prop_icons/pifu02",scale:1,rotation:0},203:{url:"image/prop_icons/pifu03",scale:1,rotation:0},204:{url:"image/prop_icons/pifu04",scale:1,rotation:0},1017:{url:"image/prop_icons/FangKuai_daodan",scale:1,rotation:0},1018:{url:"image/prop_icons/FangKuai_chueizi",scale:.9,rotation:0},1019:{url:"image/prop_icons/FangKuai_mobang",scale:.6,rotation:-25},1020:{url:"image/prop_icons/FangKuai_bingdan",scale:.9,rotation:0}},e.SHADOW_POS_X=216,e.SHADOW_POS_Y=200,e.USER_POS_Y=200,e.USER_POS_X=214,e.AI_POS_X=10,e.AI_POS_Y=796,e.SHARE_LOCK_TAG={REVIVE_AND_GIFT:"revive_and_gift"},e.ENDLESS_VALUES={GetGemAddScore:1e3,ReviveMaxTimes:3},e.GAME_STATE={HOMEPAGE:0,PREPARE:1,PLAYING:2,KEEPSTAR:3,RESULT_LOSE:4,RESULT_WIN:5,PAUSE:6,SEARCH_AI:7,HELP:8,RANK:9,SHOW_MASK:10,SHOW_REVIVE:11},e.GAME_LAYER={HOMEPAGE:0,GAME_COMMON:1,GAME_SINGLE:2,GAME_VS:3,GAME_HELP:4,GAME_PAUSE:5,SEARCH_AI:6,HELP:7,RANK:8,GAME_SEARCH_AI:9},e.MODE_SINGLE=0,e.MODE_ADVENTURE=1,e.MODE_AI=2,e.CLOCKWISE=0,e.COUNTER_CLOCKWISE=1,e.DOWN=2,e.LEFT=3,e.RIGHT=4,e.SET=5,e.CLEAR=6,e.DDOWN=7,e.NORMAL=0,e.READY_BOTTOM=1,e.REACH_BORDER=2,e.REACH_BOTTOM=3,e.DOWN_TIME=[1.6,.95,.9,.85,.8,.75,.7,.65,.6,.55,.5,.45,.4,.35,.3,.25,.2,.15,.1,.05],e.DOWN_TIME_NET=[1,.95,.9,.85,.8,.75,.7,.65,.6,.55,.5,.45,.4,.35,.3,.25,.2,.15,.1,.05],e.UPGRADE_STANTARD=[0,269,728,1473,2651,4472,7241,11500,14500,18500,23e3,29368,36387,45e3,55e3,7e4,9e4,12e4,16e4,3e5,16e5],e.AI_SPEED=[800,750,700,650,600,550,500,450,400,350,300,250,200,150,100,90,80,70,60],e.LEVEL_K=[1.5,1.3,1.1,1,.98,.96,.94,.92,.9,.86,.82,.78,.66,.5,.4,.3,.2,.15,.1],e.TIMER_COUNT=80,e.BLK_C_OFFSET=[[[0,.5],[.5,0],[0,.5],[.5,0]],[[0,0],[0,0],[0,0],[0,0]],[[.5,0],[1,-.5],[.5,-1],[0,-.5]],[[.5,0],[1,-.5],[.5,-1],[0,-.5]],[[.5,0],[1,-.5],[.5,-1],[0,-.5]],[[.5,0],[1,-.5],[.5,-1],[0,-.5]],[[.5,0],[1,-.5],[.5,-1],[0,-.5]],[[0,.5],[-.5,0],[0,.5],[-.5,0]],[[0,0],[0,0],[0,0],[0,0]]],e.ADJ_CLASSIC=[[-.5,0],[0,0],[-.5,0],[-.5,0],[-.5,0],[-.5,0],[-.5,0],[0,.5],[0,0]],e.ADJ_CRAZY=[[0,.5],[0,0],[0,0],[0,.5],[0,.5],[-.5,.5],[0,.5],[0,.5],[0,.5]],e.ZCOUNT_CLASSIC=[2,1,4,4,4,4,4,2,4],e.ZCOUNT_CRAZY=[2,2,4,4,4,2,2,4,4],e.BLKDAT_CLASSIC=n.BlockClassic.data,e.BLKDAT_CRAZY=a.BlockCrazy.data,e.BITMAP_STAGE=[[25,12],[234,13],[257,14],[237,15],[623,17],[318,18],[332,18],[87,19],[192,19],[168,21],[305,22],[222,23],[231,23],[65,24],[183,24],[239,24],[335,24],[57,25],[106,25],[188,25],[126,26],[172,26],[264,26],[488,26],[61,27],[217,27],[258,27],[304,27],[55,28],[182,28],[187,28],[247,28],[36,29],[66,29],[194,29],[200,29],[277,29],[290,29],[293,29],[520,29],[46,30],[71,30],[212,30],[218,30],[611,30],[19,31],[195,31],[317,31],[62,32],[85,32],[181,32],[226,32],[484,32],[43,33],[54,33],[63,33],[266,33],[306,33],[307,33],[319,33],[579,33],[15,34],[201,34],[263,34],[426,34],[600,34],[18,35],[39,35],[60,35],[111,35],[121,35],[199,35],[515,35],[540,35],[595,35],[9,36],[276,36],[279,36],[310,36],[362,36],[435,36],[532,36],[14,37],[41,37],[53,37],[67,37],[68,37],[86,37],[287,37],[315,37],[326,37],[551,37],[622,37],[29,38],[77,38],[99,38],[233,38],[256,38],[280,38],[420,38],[448,38],[487,38],[24,39],[125,39],[211,39],[253,39],[281,39],[303,39],[353,39],[516,39],[619,39],[49,40],[98,40],[132,40],[244,40],[245,40],[360,40],[376,40],[491,40],[34,41],[37,41],[89,41],[91,41],[120,41],[179,41],[219,41],[291,41],[324,41],[341,41],[535,41],[552,41],[618,41],[33,42],[45,42],[47,42],[58,42],[64,42],[79,42],[150,42],[156,42],[175,42],[240,42],[267,42],[274,42],[497,42],[539,42],[542,42],[572,42],[573,42],[7,43],[93,43],[95,43],[97,43],[109,43],[127,43],[148,43],[313,43],[331,43],[525,43],[21,44],[35,44],[76,44],[140,44],[149,44],[171,44],[221,44],[227,44],[308,44],[364,44],[401,44],[407,44],[432,44],[442,44],[452,44],[521,44],[530,44],[541,44],[546,44],[585,44],[590,44],[88,45],[138,45],[142,45],[208,45],[252,45],[359,45],[365,45],[369,45],[397,45],[429,45],[433,45],[436,45],[469,45],[5,46],[40,46],[83,46],[94,46],[129,46],[130,46],[163,46],[251,46],[300,46],[327,46],[478,46],[550,46],[587,46],[606,46],[136,47],[213,47],[259,47],[261,47],[292,47],[316,47],[338,47],[342,47],[375,47],[395,47],[404,47],[466,47],[616,47],[69,48],[73,48],[78,48],[103,48],[123,48],[147,48],[159,48],[160,48],[170,48],[206,48],[229,48],[417,48],[428,48],[430,48],[463,48],[476,48],[509,48],[608,48],[621,48],[17,49],[70,49],[75,49],[101,49],[107,49],[186,49],[193,49],[209,49],[248,49],[262,49],[265,49],[284,49],[347,49],[372,49],[438,49],[464,49],[475,49],[490,49],[500,49],[527,49],[537,49],[560,49],[569,49],[603,49],[610,49],[20,50],[32,50],[56,50],[134,50],[137,50],[162,50],[185,50],[189,50],[230,50],[242,50],[298,50],[314,50],[357,50],[368,50],[402,50],[409,50],[415,50],[425,50],[447,50],[467,50],[474,50],[479,50],[512,50],[591,50],[605,50],[8,51],[100,51],[203,51],[220,51],[288,51],[345,51],[391,51],[419,51],[431,51],[434,51],[440,51],[443,51],[493,51],[554,51],[563,51],[568,51],[583,51],[592,51],[11,52],[13,52],[26,52],[44,52],[139,52],[154,52],[184,52],[196,52],[260,52],[346,52],[354,52],[405,52],[480,52],[499,52],[502,52],[558,52],[602,52],[241,53],[273,53],[285,53],[309,53],[336,53],[356,53],[358,53],[377,53],[392,53],[416,53],[453,53],[485,53],[514,53],[533,53],[557,53],[598,53],[613,53],[74,54],[81,54],[176,54],[210,54],[270,54],[329,54],[349,54],[350,54],[355,54],[387,54],[412,54],[439,54],[451,54],[468,54],[481,54],[495,54],[556,54],[16,55],[38,55],[118,55],[228,55],[254,55],[299,55],[321,55],[322,55],[374,55],[382,55],[454,55],[472,55],[473,55],[489,55],[492,55],[580,55],[593,55],[601,55],[4,56],[12,56],[22,56],[59,56],[72,56],[80,56],[157,56],[164,56],[197,56],[223,56],[396,56],[414,56],[449,56],[456,56],[518,56],[544,56],[570,56],[50,57],[124,57],[135,57],[155,57],[161,57],[180,57],[216,57],[283,57],[393,57],[408,57],[445,57],[459,57],[461,57],[519,57],[549,57],[584,57],[104,58],[145,58],[169,58],[204,58],[207,58],[378,58],[389,58],[411,58],[427,58],[457,58],[486,58],[543,58],[545,58],[620,58],[27,59],[82,59],[165,59],[166,59],[275,59],[289,59],[333,59],[361,59],[366,59],[367,59],[380,59],[418,59],[441,59],[460,59],[505,59],[511,59],[528,59],[553,59],[561,59],[586,59],[614,59],[249,60],[351,60],[373,60],[385,60],[424,60],[437,60],[498,60],[507,60],[510,60],[534,60],[578,60],[581,60],[6,61],[48,61],[84,61],[102,61],[131,61],[144,61],[225,61],[243,61],[246,61],[250,61],[255,61],[271,61],[311,61],[343,61],[371,61],[477,61],[483,61],[529,61],[567,61],[589,61],[153,62],[190,62],[198,62],[302,62],[344,62],[352,62],[400,62],[462,62],[482,62],[496,62],[504,62],[564,62],[588,62],[599,62],[604,62],[205,63],[388,63],[399,63],[575,63],[582,63],[597,63],[28,64],[96,64],[146,64],[152,64],[272,64],[348,64],[410,64],[536,64],[562,64],[571,64],[151,65],[167,65],[178,65],[297,65],[334,65],[384,65],[446,65],[501,65],[523,65],[566,65],[615,65],[3,66],[23,66],[52,66],[177,66],[339,66],[370,66],[383,66],[386,66],[471,66],[517,66],[576,66],[612,66],[105,67],[141,67],[278,67],[282,67],[403,67],[406,67],[526,67],[594,67],[596,67],[617,67],[51,68],[122,68],[158,68],[202,68],[320,68],[398,68],[422,68],[538,68],[295,69],[312,69],[323,69],[494,69],[522,69],[609,69],[92,70],[108,70],[325,70],[379,70],[421,70],[513,70],[565,70],[577,70],[174,71],[232,71],[524,71],[574,71],[191,72],[269,72],[470,72],[215,73],[238,73],[330,73],[465,73],[30,74],[236,74],[547,74],[90,75],[394,75],[214,76],[268,76],[413,76],[458,76],[340,77],[559,77],[224,78],[294,78],[444,78],[531,78],[42,79],[110,79],[235,79],[607,79],[450,80],[455,80],[31,81],[296,81],[508,81],[133,82],[173,82],[390,82],[555,82],[119,83],[503,83],[363,84],[128,86],[143,86],[328,86],[423,86],[10,93],[548,96],[286,101]],e.PLAYER_TITLE=[[1,"Bronze 1"],[2,"Bronze 2"],[3,"Bronze 3"],[3,"Silver 1"],[3,"Silver 2"],[3,"Silver 3"],[4,"Gold 1"],[4,"Gold 2"],[4,"Gold 3"],[5,"Platinum 1"],[5,"Platinum 2"],[5,"Platinum 3"],[6,"Diamond 1"],[6,"Diamond 2"],[6,"Diamond 3"],[7,"King 1"],[7,"King 2"],[7,"King 3"],[1e7,"Legend"]],e.SOUND={READY_GO:"sounds/readygo",WIN:"sounds/win",LOSE:"sounds/lose",DROP:"sounds/drop",MOVE:"sounds/move",TURN:"sounds/turn",CLEAR:"sounds/clear",COMBO:["sounds/combo3","sounds/combo4","sounds/combo5","sounds/combo6","sounds/combo7","sounds/combo8","sounds/combo9","sounds/combo10","sounds/combo11","sounds/combo12","sounds/combo13","sounds/combo14"],ATTACK:"sounds/attack",BOX:"sounds/box",CHUI:"sounds/chui",ROCKET:"sounds/daodan"},e}();i.default=s,cc._RF.pop()},{"./Bitmap":"Bitmap","./BlockClassic":"BlockClassic","./BlockCrazy":"BlockCrazy"}],Data:[function(e,t,i){"use strict";cc._RF.push(t,"2be9b2Jz8JPWa4b2ivLtj+Z","Data"),Object.defineProperty(i,"__esModule",{value:!0});var o=function(){function e(){}return e.StoreList=null,e}();i.default=o,cc._RF.pop()},{}],EncodeDecode:[function(e,t,i){"use strict";cc._RF.push(t,"3ad34UiogVIia9xg69pMdoY","EncodeDecode"),Object.defineProperty(i,"__esModule",{value:!0});var o=function(){function e(){}return e.base64Encode=function(e){for(var t,i,o,n,a,s,c,r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",l="",d=0,u=(e=this.utf8Encode(e)).length;d<u;)n=(t=e.charCodeAt(d++))>>2,a=(3&t)<<4|(i=e.charCodeAt(d++))>>4,s=(15&i)<<2|(o=e.charCodeAt(d++))>>6,c=63&o,isNaN(i)?s=c=64:isNaN(o)&&(c=64),l=l+r.charAt(n)+r.charAt(a)+r.charAt(s)+r.charAt(c);return l},e.base64Decode=function(e){for(var t,i,o,n,a,s,c="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",r=0,l=(e=e.replace(/[^A-Za-z0-9\+\/\=]/g,"")).length,d=[];r<l;)t=c.indexOf(e.charAt(r++))<<2|(n=c.indexOf(e.charAt(r++)))>>4,i=(15&n)<<4|(a=c.indexOf(e.charAt(r++)))>>2,o=(3&a)<<6|(s=c.indexOf(e.charAt(r++))),d.push(t),64!=a&&d.push(i),64!=s&&d.push(o);return d},e.utf8Encode=function(e){for(var t="",i=0,o=(e=e.replace(/\r\n/g,"\n")).length;i<o;i++){var n=e.charCodeAt(i);n<128?t+=String.fromCharCode(n):n>127&&n<2048?(t+=String.fromCharCode(n>>6|192),t+=String.fromCharCode(63&n|128)):(t+=String.fromCharCode(n>>12|224),t+=String.fromCharCode(n>>6&63|128),t+=String.fromCharCode(63&n|128))}return t},e.utf8Decode=function(e){for(var t,i,o="",n=0,a=t=0,s=e.length;n<s;)(a=e[n])<128?(o+=String.fromCharCode(a),n++):a>191&&a<224?(t=e[n+1],o+=String.fromCharCode((31&a)<<6|63&t),n+=2):(t=e[n+1],i=e[n+2],o+=String.fromCharCode((15&a)<<12|(63&t)<<6|63&i),n+=3);return o},e}();i.default=o,cc._RF.pop()},{}],Engine:[function(e,t,i){"use strict";cc._RF.push(t,"9cf9b6rqthI7p/Smn+CBvnJ","Engine"),Object.defineProperty(i,"__esModule",{value:!0});var o=function(){function e(){}return e.run=function(e){var t=Date.now();if(this._previousTick+this._tickLengthMs<=t){var i=t-this._previousTick;this._previousTick=t,e.scheduleUpdate(i)}},e.clone=function(e){for(var t=[],i=0,o=e.length;i<o;i++)t.push(e[i]);return t},e.srand=function(e){this.next=e>>>0},e.rand=function(){return this.next=214013*this.next+2531011&2147483647,this.next>>16&32767},e.framehz=30,e._tickLengthMs=1e3/30,e._previousTick=Date.now(),e.next=0,e}();i.default=o,cc._RF.pop()},{}],EventType:[function(e,t,i){"use strict";cc._RF.push(t,"606e6CSBDRA5JMECooL06UU","EventType"),Object.defineProperty(i,"__esModule",{value:!0}),i.EventType=void 0,function(e){e.TCP_ERROR="tcp_error",e.TCP_CLOSE="tcp_close",e.TCP_OPENED="tcp_opened",e.TCP_RECONNECT="tcp_reconnect",e.TCP_RECEIVE="tcp_receive",e.SDK_LOGIN_SUCCESS="sdk_login_success",e.SDK_LOGIN_FAIL="sdk_login_fail",e.WEIXIN_LOGIN_SUCCESS="weixin_login_success",e.WEIXIN_LOGIN_FAIL="weixin_login_fail",e.GET_USER_FEATURE_SUCCESS="GET_USER_FEATURE_SUCCESS",e.GET_USER_FEATURE_FAIL="GET_USER_FEATURE_FAIL",e.GET_SHARE_CONFIG_SUCCESS="GET_SHARE_CONFIG_SUCCESS",e.GET_SHARE_CONFIG_FAIL="GET_SHARE_CONFIG_FAIL",e.GET_OPEN_DATA_RESULT_SUCCESS="GET_OPEN_DATA_RESULT_SUCCESS",e.GET_OPEN_DATA_RESULT_FAIL="GET_OPEN_DATA_RESULT_FAIL",e.GET_OPEN_DATA_RESULT_TIMEOUT="GET_OPEN_DATA_RESULT_TIMEOUT",e.SEND_HEART_BEAT="SEND_HEART_BEAT",e.GAME_SHOW="GAME_SHOW",e.GAME_HIDE="GAME_HIDE",e.START_AUTHORIZATION_SUCCESS="START_AUTHORIZATION_SUCCESS",e.START_AUTHORIZATION_FAILED="START_AUTHORIZATION_FAILED",e.GET_SECRET_LANGUAGE_IMAGE_SUCCESS="GET_SECRET_LANGUAGE_IMAGE_SUCCESS",e.GET_SECRET_LANGUAGE_IMAGE_FAIL="GET_SECRET_LANGUAGE_IMAGE_FAIL",e.SECRET_LANGUAGE_TO_GAME="SECRET_LANGUAGE_TO_GAME",e.GET_STORE_LIST_SUCCESS="GET_STORE_LIST_SUCCESS",e.GET_STORE_LIST_FAIL="GET_STORE_LIST_FAIL",e.CMD_USER_INFO="user_info5",e.CMD_UPDATE_NOTIFY="update_notify5",e.CMD_BIND_USER="bind_user5",e.CMD_BIND_GAME="bind_game5",e.CMD_GAME_DATA="game_data5",e.CMD_HALL_INFO="hall_info5",e.CMD_STORE="store5",e.CMD_ITEM="item5",e.CMD_STORE_LIST="sc_list",e.MSG_SERVER_MESSAGE="server_message",e.CMD_BLOCKQUEST="elswx",e.CMD_ACTION_REWARD_INFO="reward_info",e.CMD_ACTION_ADD_DIAMOND="add_diamond",e.CMD_ACTION_ADD_ITEMS="add_items",e.CMD_ACTION_ENTER_GAME="enter_game",e.CMD_ACTION_NEXT_ADREWARD="next_adreward",e.CMD_ACTION_SYNC_ITEMS="sync_items",e.CMD_ACTION_CONSUME_ITEMS="consume_items",e.CMD_ACTION_REWARD_ITEMS="reward_items",e.CMD_ACTION_WHISPER_PASS="whisper_pass",e.CMD_ACTION_WHISPER_START="whisper_start",e.CMD_ACTION_WHISPER_INFO="whisper_info",e.CMD_ACTION_DAILY_LOGIN="daily_login",e.CMD_ACTION_GET_BAG="get_bag"}(i.EventType||(i.EventType={})),cc._RF.pop()},{}],Facebook:[function(e,t,i){"use strict";cc._RF.push(t,"bb21fBsotJBn4E8gMLfa1Gq","Facebook"),Object.defineProperty(i,"__esModule",{value:!0});var o,n=e("./Sdkbox");(function(e){e[e.NONE=0]="NONE",e[e.INVITE=1]="INVITE",e[e.SHARE=2]="SHARE"})(o||(o={}));var a=function(){function e(){}return e.action=function(){switch(this.state){case o.INVITE:this.invite();break;case o.SHARE:this.share()}this.state=o.NONE},e.login=function(){sdkbox.PluginFacebook.isLoggedIn()||sdkbox.PluginFacebook.login(["public_profile","email","user_friends"])},e.logout=function(){sdkbox.PluginFacebook.isLoggedIn()&&sdkbox.PluginFacebook.logout()},e.share=function(e,t){n.default.checkSdkbox()&&(this.callback=t,sdkbox.PluginFacebook.isLoggedIn()?(sdkbox.PluginFacebook.dialog(e),console.log("share: facebook isLoggedIn")):(this.state=o.SHARE,this.login()))},e.getFriends=function(){var e=new Object,t=sdkbox.PluginFacebook.getUserID();sdkbox.PluginFacebook.api(t+"/friends","GET",e,t+"/friends")},e.invite=function(){n.default.checkSdkbox()&&(sdkbox.PluginFacebook.isLoggedIn()?(console.log("invite: facebook isLoggedIn"),sdkbox.PluginFacebook.fetchFriends()):(this.state=o.INVITE,this.login()))},e.initPlugin=function(){if(n.default.checkSdkbox()){var e=this;sdkbox.PluginFacebook.setListener({onLogin:function(t,i){t?(console.log("login successful"),e.action()):console.log("login failed")},onAPI:function(e,t){console.log(e),console.log(JSON.stringify(t))},onSharedSuccess:function(t){e.callback&&e.callback(!0)},onSharedFailed:function(t){e.callback&&e.callback(!1),console.log("share failed")},onSharedCancel:function(){e.callback&&e.callback(!1)},onPermission:function(e,t){e?console.log("request permission successful"):console.log("request permission failed")},onFetchFriends:function(e,t){console.log(e+" : "+t,"onFetchFriends")},onRequestInvitableFriends:function(e){console.log(JSON.stringify(e))},onInviteFriendsWithInviteIdsResult:function(e,t){console.log("onInviteFriendsWithInviteIdsResult result="+(e?"ok":"error")+" "+t)},onInviteFriendsResult:function(e,t){console.log("onInviteFriendsResult result="+(e?"ok":"error")+" "+t)}}),sdkbox.PluginFacebook.init()}},e.state=o.NONE,e.callback=null,e}();i.default=a,cc._RF.pop()},{"./Sdkbox":"Sdkbox"}],GameConfig:[function(e,t,i){"use strict";cc._RF.push(t,"f6f0csksbpDjqMZbKwBigbD","GameConfig"),Object.defineProperty(i,"__esModule",{value:!0});var o=e("../data/Config"),n=function(){return function(){this.isReplay=!1,this.isWhisper=!1,this.isEndless=!1,this.canRun=!0,this.mode=o.default.MODE_SINGLE}}();i.default=n,cc._RF.pop()},{"../data/Config":"Config"}],GameCore:[function(e,t,i){"use strict";cc._RF.push(t,"ff0c5NqJvRPg5sg47r8ptun","GameCore"),Object.defineProperty(i,"__esModule",{value:!0});var o=e("./data/Config"),n=function(){function e(){this._pool=[],this.grid=new Uint8Array(o.default.GRIDSIZE),this.columnTop=new Array(o.default.COLUMNS),this.col_hole=new Array(o.default.COLUMNS),this.combo=0,this.cur_x=this.cur_y=this.cur_z=0,this.currentBlock=0,this.nextBlock=0,this.saveBlock=0,this.topLine=0,this.tdx=this.tdy=0,this.fullRows=[],this.clingBlocks=[],this.blockIndex=0,this.attack=new Array(2),this.aiMode="",this.saveLock=!1,this.gameOver=!1,this.gameResult=0,this.gemCount=new Map([[112,0],[113,0],[114,0]]),this.gemMax=new Map([[112,0],[113,0],[114,0]])}return e.prototype.clone=function(){var t=void 0;return t=this._pool.length>0?this._pool.pop():new e,this._assign(this,t),t},e.prototype.recycle=function(){this._pool.push(this)},e.prototype._assign=function(e,t){t.combo=e.combo,t.cur_x=e.cur_x,t.cur_y=e.cur_y,t.cur_z=e.cur_z,t.currentBlock=e.currentBlock,t.nextBlock=e.nextBlock,t.saveBlock=e.saveBlock,t.topLine=e.topLine,t.tdx=e.tdx,t.tdy=e.tdy,t.blockIndex=e.blockIndex,t.aiMode=e.aiMode,t.saveLock=e.saveLock,t.gameOver=e.gameOver,t.gameResult=e.gameResult;var i=t.columnTop,o=e.columnTop;i[0]=o[0],i[1]=o[1],i[2]=o[2],i[3]=o[3],i[4]=o[4],i[5]=o[5],i[6]=o[6],i[7]=o[7],i[8]=o[8],i[9]=o[9],i=t.col_hole,o=e.col_hole,i[0]=o[0],i[1]=o[1],i[2]=o[2],i[3]=o[3],i[4]=o[4],i[5]=o[5],i[6]=o[6],i[7]=o[7],i[8]=o[8],i[9]=o[9],t.attack[0]=e.attack[0],t.attack[1]=e.attack[1],t.fullRows=e.fullRows.slice(),t.grid.set(e.grid),t.gemCount.set(112,e.gemCount.get(112)),t.gemCount.set(113,e.gemCount.get(113)),t.gemCount.set(114,e.gemCount.get(114)),t.gemMax.set(112,e.gemMax.get(112)),t.gemMax.set(113,e.gemMax.get(113)),t.gemMax.set(114,e.gemMax.get(114))},e}();i.default=n,cc._RF.pop()},{"./data/Config":"Config"}],GameEvent:[function(e,t,i){"use strict";cc._RF.push(t,"712d8VV4jxLq53pvrGzeBzB","GameEvent"),Object.defineProperty(i,"__esModule",{value:!0}),i.GameEvent=void 0,function(e){e.MAGIC_BOTTLE_ADD="magic_bottle_add",e.MAGIC_BOTTLE_FULL="magic_bottle_full",e.MAGIC_RESET_BOTTLE="reset_bottle",e.ADD_PROP="add_prop",e.HIDE_GIFT="hide_gift",e.ADD_MAGIC="add_magic",e.SET_MAGIC_BUSY="set_magic_busy",e.SHOW_MAGIC_ADD_EFFECT="show_magic_add_effect",e.GIFT_PROP="gift_prop",e.REWARD_INFO="reward_info",e.UPDATE_BAG="update_bag",e.CONSUME_ITEM_SUCCESS="consume_item_success",e.ADD_ITEM_SUCCESS="add_item_success",e.UPDATE_ITEMS="update_items",e.DAILY_LOGIN_GIFT_SUCCESS="daily_login_gift_success",e.SELECT_GIFT="select_gift",e.REFRESH_LOCAL_SKIN="refresh_local_skin",e.SHOW_GIFT_ANIMATION="show_gift_animation",e.CLEAR_GIFT_ANIMATION="clear_gift_animation",e.CLEAR_GIFT="clear_gift",e.CLEAR_MALL="clear_mall",e.WHISPER_START="whisper_start",e.REFRESH_GEM_COUNT="refresh_gem_count",e.SHOW_CLEAR_ROW_EFFECT="show_clear_row_effect",e.SHOW_ICE_EFFECT="show_ice_effect",e.ON_SHOW_ENDLESS_LEVEL_UP="on_show_endless_level_up",e.REFRESH_GEM_ANIMATION_POS="refresh_gem_animation_pos",e.DELETE_GEM_ANIMATION="delete_gem_animation",e.RESET_GEM_ANIMATION_POOL="reset_gem_animation_pool",e.ADD_GEM_ANIMATION="add_gem_animation",e.ENDLESS_SHOW_LEVEL_END="endless_show_level_end",e.ENDLESS_ON_GEM_CHANGE="endless_on_gem_change"}(i.GameEvent||(i.GameEvent={})),cc._RF.pop()},{}],GameGrid:[function(e,t,i){"use strict";cc._RF.push(t,"8abdbXI+vBMKK61OApjhClK","GameGrid"),Object.defineProperty(i,"__esModule",{value:!0});var o=e("./data/Config"),n=e("./GameCore"),a=e("./Engine"),s=e("./GameUtil"),c=e("./GameEvent"),r=e("../common/Timer"),l=e("./model/GameState"),d=e("./model/GameTimer"),u=e("../common/NotificationCenter"),f=function(){function e(e,t){this.model=e,this.index=t,this.core=new n.default,this.timer=new d.default,this.state=new l.default,this.isActive=!1,this.queue=null,this.blockData=null,this.needDraw=!0,this.pendAttack=!1}return e.prototype.setBitmap=function(e){var t=this,i={},n={};u.default.trigger(c.GameEvent.RESET_GEM_ANIMATION_POOL,null);for(var a=0;a<o.default.ROWS;a++)for(var r=0;r<o.default.COLUMNS;r++){var l=a*o.default.GRIDW+2+r;this.core.grid[l]=a>=o.default.ROWS-o.default.COLUMNS?100+e[a-(o.default.ROWS-o.default.COLUMNS)][r]:0,100==this.core.grid[l]&&(this.core.grid[l]=0),this.core.grid[l]>100?(i[a]=i[a]||[],i[a].push([a,r])):(n[a]=n[a]||[],n[a].push([a,r]))}if(this.model.config.isEndless&&0==this.index){var d=new Map([["d1",112],["d2",113],["d3",114]]),f=this.model.getRandomGemConfig();if(-1!=f){var h=f.deep,m=Object.keys(f),p=0;m.forEach(function(e){"deep"!=e&&(p+=f[e])});for(var g=Object.keys(i),_=[],v=[],E=Math.min(parseInt(g[0])+h-1,o.default.ROWS-1),S=E-3;S<=E;S++){var C=i[S],A=n[S];C&&_.push.apply(_,C),A&&v.push.apply(v,A)}if(v=s.default.shuffle(v),_.length<p){var I=p-_.length;for(a=0;a<I;a++)_.push(v[a])}_=s.default.shuffle(_);var y=0;m.forEach(function(e){if(d.has(e)){var i=d.get(e),n=f[e];t.core.gemCount.set(i,0),t.core.gemMax.set(i,n);for(var a=0;a<n;a++){var s=_[y][0],r=_[y][1],l=s*o.default.GRIDW+2+r;t.core.grid[l]=i;var h={row:o.default.ROWS-s-1,col:r,type:i};u.default.trigger(c.GameEvent.ADD_GEM_ANIMATION,h),y++}}}),u.default.trigger(c.GameEvent.REFRESH_GEM_COUNT,null)}else console.log("grid/gem","Get gem config error.")}this.updateColHoleTop(2,11,!1)},e.prototype.setLevel=function(e){this.state.level=e},e.prototype.setBlkDat=function(e){this.blockData=e},e.prototype.setQueue=function(e){this.queue=e},e.prototype.reset=function(){var e=this,t=this;this.core=new n.default,this.timer=new d.default,this.timer.setup("next-block",.8),this.timer.setup("clear-row",.3,function(){0==t.index&&(t.model.playMusic(o.default.SOUND.CLEAR,!1),u.default.trigger(c.GameEvent.SHOW_MAGIC_ADD_EFFECT,null)),t.clearRow(!1)}),this.timer.setup("game-over",.12,function(){t.core.gameOver=!0}),this.timer.setup("fall",.01,function(){t.fall()}),this.timer.setup("combo",.8),this.timer.setup("attack",.8),this.timer.setup("endless-clear",1.5,function(){e.model.endlessClear=!1});for(var i=0;i<o.default.ROWS+2;i++)for(var a=0;a<o.default.COLUMNS+4;a++)this.core.grid[i*o.default.GRIDW+a]=200;for(i=0;i<o.default.ROWS;i++)for(a=0;a<o.default.COLUMNS;a++)this.core.grid[i*o.default.GRIDW+2+a]=0;this.core.currentBlock=this.queue[0],this.core.nextBlock=this.queue[1],this.core.saveBlock=-1,this.core.saveLock=!1,this.core.cur_x=5,this.core.cur_y=0,this.core.cur_z=0,this.core.gameOver=!1,this.core.blockIndex=0,this.core.blockAttackIndex=0,this.core.gameResult=0,this.variance=[]},e.prototype.nextBlk=function(e,t){if(e||0==this.index&&(this.model.tou.maxDAction=0,this.model.tou.maxRLAction=0),this.core.blockIndex++,this.core.currentBlock=this.core.nextBlock,t||this.timer.trigger("next-block",.8),this.core.cur_x=5,this.core.cur_y=0,this.core.cur_z=0,this.moveBlk(o.default.SET,e),this.core.nextBlock=this.queue[(this.core.blockIndex+1)%o.default.MAX_BLOCK_QUEUE],e||0!=this.index||(this.variance[this.core.blockIndex]=this.calcVariance()),0==this.index&&this.model.config.mode==o.default.MODE_SINGLE){if(this.core.nextAttack>=1)return this.core.nextAttack--,void u.default.trigger(c.GameEvent.SHOW_ICE_EFFECT,this.core.nextAttack);var i=this.model.getAutoAttackStep();0!=this.core.blockAttackIndex&&this.core.blockAttackIndex%i==0?0!=this.core.fullRows.length?this.pendAttack=!0:(this.attack(this,1,Math.round(1e4*Math.random()),!0),this.updateColHoleTop(2,11)):this.pendAttack&&(this.attack(this,1,Math.round(1e4*Math.random()),!0),this.updateColHoleTop(2,11),this.pendAttack=!1)}this.core.blockAttackIndex++},e.prototype.calcVariance=function(){for(var e=0,t=0;t<o.default.COLUMNS;t++)e+=10*this.core.columnTop[t];var i=e/o.default.COLUMNS,n=0;for(t=0;t<o.default.COLUMNS;t++){var a=10*this.core.columnTop[t]-i;n+=a*a}return n},e.prototype.isUserGiveUp=function(){var e=!1,t=this.variance[this.variance.length-1],i=0;this.variance.length>5&&(i=this.variance.length-6);var o=this.variance[i];return(t>13e3||Math.abs(t-o)>7e3)&&(e=!0),e},e.prototype.saveBlk=function(e){if(this.core.saveLock=!0,this.moveBlk(o.default.CLEAR,e),this.core.saveBlock>=0){var t=this.core.currentBlock;this.core.currentBlock=this.core.saveBlock,this.core.saveBlock=t,this.core.cur_x=5,this.core.cur_y=0,this.core.cur_z=0,this.moveBlk(o.default.SET,e)}else this.core.saveBlock=this.core.currentBlock,this.nextBlk(e,!1)},e.prototype.clearBottomLinesByCount=function(e){if(0==this.index){for(var t=o.default.ROWS-e;t<o.default.ROWS;t++)for(var i=2;i<o.default.COLUMNS+2;i++)this.core.grid[t*o.default.GRIDW+i]=101+Math.floor(1e3*Math.random())%6;this.core.fullRows=[];for(t=20;t>20-e;t--)this.core.fullRows.push(t);this.timer.trigger("clear-row",a.default.clone(this.core.fullRows))}},e.prototype.clearAllRows=function(e){for(var t=this,i=0,n=[],a=function(a){for(var l=[],d=0;d<o.default.COLUMNS;d++){var f=a*o.default.GRIDW+2+d;s.core.grid[f]>100&&s.core.grid[f]<200&&l.push(f)}l.length>0&&n.push(a),l.length>0&&(i++,r.default.setTimer(cc.director.getScene(),function(){u.default.trigger(c.GameEvent.SHOW_CLEAR_ROW_EFFECT,{row:o.default.ROWS-a-1,cb:function(){l.forEach(function(e){t.core.grid[e]=0}),0==--i&&e&&e()}})},.1*i,0,.1*i))},s=this,l=0;l<o.default.ROWS;l++)a(l);n.length>0&&this.clearBottomLinesByCount(1)},e.prototype.clearRow=function(e){if(e||(this.needDraw=!0,this.timer.getStat("game-over")&&(this.timer.cancel("game-over"),this.core.gameOver=!1)),this.state.clearLines+=this.core.fullRows.length,this.core.fullRows.length%100){var t=void 0,i=void 0,n=void 0;for(n=0;n<this.core.fullRows.length%100;n++){for(t=this.core.fullRows[n];t>=0;t--)for(i=0;i<o.default.COLUMNS;i++){if(0==this.index&&t==this.core.fullRows[n]){var a=t*o.default.GRIDW+i+2;if(this.model.config.isEndless&&s.default.isGem(this.core.grid[a])){var r=this.core.grid[a],l=this.core.gemCount.get(r);l++,this.core.gemCount.set(r,l);var d={x:o.default.ROWS-t-1,y:i,type:r};u.default.trigger(c.GameEvent.REFRESH_GEM_COUNT,d),this.state.addScore(o.default.ENDLESS_VALUES.GetGemAddScore);var f={row:o.default.ROWS-t-1,col:i,type:r};u.default.trigger(c.GameEvent.DELETE_GEM_ANIMATION,f)}}if(t)this.core.grid[(t-1)*o.default.GRIDW+i+2]>100||0==this.core.grid[(t-1)*o.default.GRIDW+i+2]?this.core.grid[t*o.default.GRIDW+i+2]<10&&this.core.grid[t*o.default.GRIDW+i+2]>0||(this.core.grid[t*o.default.GRIDW+i+2]=this.core.grid[(t-1)*o.default.GRIDW+i+2]):this.core.grid[t*o.default.GRIDW+i+2]<10&&this.core.grid[t*o.default.GRIDW+i+2]>0||(this.core.grid[t*o.default.GRIDW+i+2]=0);else if(!(this.core.grid[t*o.default.GRIDW+i+2]<10&&this.core.grid[t*o.default.GRIDW+i+2]>0)){a=t*o.default.GRIDW+i+2;this.core.grid[a]=0}}this.core.fullRows[n]=0}this.updateColHoleTop(2,11)}this.core.fullRows.length=0},e.prototype.sinkCol=function(e){for(var t,i=this.core.grid,n=[],a=0;a<o.default.ROWS;a++){var s=a*o.default.GRIDW+e+2;n.push(s)}for(var c=0,r=0;r<n.length;r++)0!=this.core.grid[n[r]]&&c++;for(var l=0;l<c;l++)for(r=0;r<n.length-1;r++){var d=n[r],u=n[r+1];if(i[d]>10)0==i[u]&&(t=[this.core.grid[u],this.core.grid[d]],this.core.grid[d]=t[0],this.core.grid[u]=t[1])}},e.prototype.clearTopGridByCount=function(){for(var e=this.core.columnTop,t=0;t<e.length;t++){var i=o.default.ROWS-e[t],n=i*o.default.GRIDW+t+2;if(this.core.grid[n]>100&&200!=this.core.grid[n]){if(this.model.config.isEndless&&s.default.isGem(this.core.grid[n])){var a=this.core.grid[n],r=this.core.gemCount.get(a);r++,this.core.gemCount.set(a,r);var l={x:o.default.ROWS-i-1,y:t,type:a};u.default.trigger(c.GameEvent.REFRESH_GEM_COUNT,l),this.state.addScore(o.default.ENDLESS_VALUES.GetGemAddScore);var d={row:o.default.ROWS-i-1,col:t,type:a};u.default.trigger(c.GameEvent.DELETE_GEM_ANIMATION,d)}this.core.grid[n]=0}}this.updateColHoleTop(2,11)},e.prototype.sinkAllCol=function(){for(var e=0;e<o.default.ROWS;e++)this.sinkCol(e);this.updateColHoleTop(2,11)},e.prototype.checkClearRow=function(e){for(var t=0;t<o.default.ROWS;t++)this.isRowFull(t)&&(this.core.fullRows[this.core.fullRows.length]=t);if(this.core.fullRows.length>0){if(e||this.timer.getStat("game-over")&&(this.timer.cancel("game-over"),this.core.gameOver=!1),this.core.combo++,!e){this.core.attack[0]=this.core.fullRows.length-1,this.core.combo>=3&&(this.state.totalCombo+=this.core.combo,this.core.combo>this.state.maxCombo&&(this.state.maxCombo=this.core.combo),this.state.currentCombo=this.core.combo,this.core.attack[0]++,this.timer.trigger("combo",this.core.combo),this.state.addScore(100*this.core.combo)),this.core.attack[1]=this.core.blockIndex;var i=this.core.fullRows.length>4?3:this.core.fullRows.length-1;this.state.addScore([50,150,300,500][i]),this.timer.trigger("clear-row",a.default.clone(this.core.fullRows)),this.model.config.mode==o.default.MODE_AI&&this.state.addScore(1e4*this.core.attack[0])}}else this.core.combo=0,this.state.currentCombo=0;this.updateColHoleTop(2,11)},e.prototype.isRowFull=function(e){for(var t=!0,i=0;i<o.default.COLUMNS;i++){var n=e*o.default.GRIDW+i+2;if(this.core.grid[n]<100||200==this.core.grid[n]){t=!1;break}}return t},e.prototype.randomFillGrid=function(e){return this.findFillHolePos(e)},e.prototype.fillGridByIndex=function(e){this.core.grid[e]=105},e.prototype.getGridsPosByCol=function(e){for(var t=[],i=0;i<o.default.ROWS;i++){var n=i*o.default.GRIDW+e+2;t.push(n)}return t},e.prototype.getColHoles=function(){for(var e=[],t=[],i=[],n=this.core.grid,a=function(e){for(var t=0;t<e.length;t++){if(n[e[t]]>100)for(var i=t;i<e.length;i++){if(0==n[e[i]])return!0}}return!1},s=0;s<o.default.COLUMNS;s++){a(this.getGridsPosByCol(s))?t.push(s):i.push(s)}return e.push(t),e.push(i),e},e.prototype.findFillHolePos=function(e){for(var t=[this.core,this.core.grid],i=t[0],n=t[1],a=[[],[],[],[]],c=a[0],r=a[1],l=a[2],d=a[3],u=i.col_hole,f=0;f<o.default.COLUMNS;f++)0==u[f]?r.push(f):c.push(f);for(var h=0,m=c;h<m.length;h++){var p=m[h];for(f=0;f<o.default.ROWS;f++){var g=f*o.default.GRIDW+p+2;if(n[g]>100&&200!=n[g]){for(var _=f;_<o.default.ROWS;_++){var v=_*o.default.GRIDW+p+2;0==n[v]&&(l[l.length]=[p,v])}break}}}if(e<=(l=s.default.shuffle(l)).length){for(f=0;f<e;f++)l[f][2]=!0,d[d.length]=l[f];return d}for(f=0;f<l.length;f++)l[f][2]=!0,d[d.length]=l[f];for(f=0;f<o.default.ROWS;f++){var E=o.default.ROWS-f-1;if(E<o.default.ROWS-i.topLine)return d;for(var p in r){var S=r[p],C=E*o.default.GRIDW+S+2;if(0==n[C]&&(d[d.length]=[p,C,!0],d.length>=e))return d}}return d},e.prototype.fall=function(){do{if(this.core.gameOver)break}while(this.moveBlk(o.default.DDOWN,!1)!=o.default.REACH_BOTTOM);this.nextBlk(!1),this.testDDown()},e.prototype.updateColHoleTop=function(e,t,i){var n,a;for(void 0===i&&(i=!0),n=e;n<=t;n++){for(this.core.columnTop[n-2]=0,this.core.col_hole[n-2]=0,a=o.default.ROWS;a>0;a--)if(this.core.grid[(o.default.ROWS-a)*o.default.GRIDW+n]>100){this.core.columnTop[n-2]=a;break}for(;a>0;a--)0==this.core.grid[(o.default.ROWS-a)*o.default.GRIDW+n]&&(this.core.col_hole[n-2]+=a)}for(this.core.topLine=0,n=0;n<o.default.COLUMNS;n++)this.core.columnTop[n]>this.core.topLine&&(this.core.topLine=this.core.columnTop[n]);if(i){var r=[];if(this.model.config.isEndless&&0===this.index)for(var l=0;l<o.default.ROWS;l++)for(var d=0;d<o.default.COLUMNS;d++){var f=l*o.default.GRIDW+2+d;if(s.default.isGem(this.core.grid[f])){var h={type:this.core.grid[f],row:o.default.ROWS-l-1,col:d};r.push(h)}}r.length>0&&u.default.trigger(c.GameEvent.ENDLESS_ON_GEM_CHANGE,r)}},e.prototype.testDDown=function(){for(var e=this.core.clone();this.moveBlk(o.default.DDOWN,!0)!=o.default.REACH_BOTTOM;);var t=this.core.cur_x,i=this.core.cur_y;return this.core.recycle(),this.core=e.clone(),e.recycle(),this.core.tdx=t,this.core.tdy=i,0},e.prototype.moveBlk=function(e,t){var i,n,s,c,r;if(this.core.gameOver)return e==o.default.LEFT||e==o.default.RIGHT?o.default.REACH_BORDER:o.default.REACH_BOTTOM;t||(this.needDraw=!0);var l=this.core.currentBlock,d=this.core.cur_x,u=this.core.cur_y,f=this.core.cur_z,h=0,m=0,p=0;switch(e){case o.default.CLOCKWISE:h=d,m=u,p=(f+5)%4,this.timer.readyWending=o.default.WENDING;break;case o.default.COUNTER_CLOCKWISE:h=d,m=u,p=(f+3)%4,this.timer.readyWending=o.default.WENDING;break;case o.default.DOWN:case o.default.DDOWN:h=d,m=u+1,p=f;break;case o.default.LEFT:h=d-1,m=u,p=f,this.timer.readyWending=o.default.WENDING;break;case o.default.RIGHT:h=d+1,m=u,p=f,this.timer.readyWending=o.default.WENDING;break;case o.default.SET:case o.default.CLEAR:h=d,m=u,p=f}for(i=0;i<4;i++)for(n=0;n<4;n++)this.isInGrid(u+i,d+n)&&this.core.grid[(u+i)*o.default.GRIDW+d+n]<100&&(this.core.grid[(u+i)*o.default.GRIDW+d+n]=0);if(e==o.default.CLEAR)return o.default.NORMAL;for(i=0;i<4;i++)for(n=0;n<4;n++)if(this.core.grid[(m+i)*o.default.GRIDW+h+n]&&this.blockData[l][p][4*i+n]){this.core.grid[(m+i)*o.default.GRIDW+h+n],this.blockData[l][p][4*i+n];if(e==o.default.DOWN||e==o.default.DDOWN){if(e==o.default.DOWN){if(this.timer.readyWending>=0){for(this.timer.readyWending==o.default.WENDING&&this.timer.readyWending--,s=0;s<4;s++)for(c=0;c<4;c++)this.isInGrid(u+s,d+c)&&this.blockData[l][p][4*s+c]&&(this.core.grid[(u+s)*o.default.GRIDW+d+c]=this.blockData[l][p][4*s+c]);return o.default.READY_BOTTOM}this.timer.readyWending=o.default.WENDING}for(t||(this.core.clingBlocks.length=0),s=0;s<4;s++)for(c=0;c<4;c++)this.isInGrid(u+s,d+c)&&this.blockData[l][p][4*s+c]&&(this.core.grid[(u+s)*o.default.GRIDW+d+c]=100+this.blockData[l][p][4*s+c],t||100!=this.core.grid[(u+s)*o.default.GRIDW+d+c]&&(this.core.clingBlocks[this.core.clingBlocks.length]=cc.v2(d+c-2,u+s)));for(this.updateColHoleTop(2,11,!1),s=0;s<4;s++){for(r=!0,c=0;c<o.default.COLUMNS;c++)if(this.isInGrid(u+s,c+2)&&(this.core.grid[(u+s)*o.default.GRIDW+c+2]<100||200==this.core.grid[(u+s)*o.default.GRIDW+c+2])){r=!1;break}r&&(this.core.fullRows[this.core.fullRows.length]=u+s)}if(this.core.fullRows.length>0){if(t||this.timer.getStat("game-over")&&(this.timer.cancel("game-over"),this.core.gameOver=!1),this.core.combo++,!t){this.core.attack[0]=this.core.fullRows.length-1,this.core.combo>=3&&(this.state.totalCombo+=this.core.combo,this.core.combo>this.state.maxCombo&&(this.state.maxCombo=this.core.combo),this.state.currentCombo=this.core.combo,this.core.attack[0]++,this.timer.trigger("combo",this.core.combo),this.state.addScore(100*this.core.combo)),this.core.attack[1]=this.core.blockIndex;var g=this.core.fullRows.length>4?3:this.core.fullRows.length-1;this.state.addScore([50,150,300,500][g]),this.timer.trigger("clear-row",a.default.clone(this.core.fullRows)),this.model.config.mode==o.default.MODE_AI&&this.state.addScore(1e4*this.core.attack[0])}}else this.core.combo=0,this.state.currentCombo=0;return this.core.saveLock=!1,o.default.REACH_BOTTOM}if(e==o.default.LEFT||e==o.default.RIGHT){for(i=0;i<4;i++)for(n=0;n<4;n++)this.isInGrid(u+i,d+n)&&0==this.core.grid[(u+i)*o.default.GRIDW+d+n]&&(this.core.grid[(u+i)*o.default.GRIDW+d+n]+=this.blockData[l][p][4*i+n]);return o.default.REACH_BORDER}if(e==o.default.CLOCKWISE||e==o.default.COUNTER_CLOCKWISE){for(i=0;i<4;i++)for(n=0;n<4;n++)this.isInGrid(m+i,h+n)&&0==this.core.grid[(m+i)*o.default.GRIDW+h+n]&&(this.core.grid[(m+i)*o.default.GRIDW+h+n]+=this.blockData[l][f][4*i+n]);return o.default.REACH_BORDER}return e!=o.default.SET||t||0!=this.core.fullRows.length||(this.state.isKO=!0,this.timer.trigger("game-over",.12)),o.default.NORMAL}for(i=0;i<4;i++)for(n=0;n<4;n++)this.isInGrid(m+i,h+n)&&(this.core.grid[(m+i)*o.default.GRIDW+h+n]+=this.blockData[l][p][4*i+n]);return this.core.cur_x=h,this.core.cur_y=m,this.core.cur_z=p,t||this.testDDown(),o.default.NORMAL},e.prototype.isInGrid=function(e,t){return e>=0&&e<o.default.ROWS+2&&t>=0&&t<o.default.COLUMNS+4},e.prototype.attack=function(e,t,i,n){var s,c,r,l=0;if(!(e.core.gameOver||t<=0)){n||(e.timer.getStat("clear-row")&&e.timer.cancel("clear-row"),e.timer.getStat("fall")&&e.timer.cancel("fall")),a.default.srand(i),(r=new Uint8Array(o.default.GRIDSIZE)).set(e.core.grid);e.index;for(s=0;s<o.default.ROWS-t;s++)for(c=0;c<o.default.COLUMNS;c++)r[s*o.default.GRIDW+2+c]=e.core.grid[(s+t)*o.default.GRIDW+2+c],r[s*o.default.GRIDW+2+c]<10&&r[s*o.default.GRIDW+2+c]>0&&(l=1,r[s*o.default.GRIDW+2+c]=0);for(s=0;s<t;s++){var d=a.default.rand()%o.default.COLUMNS;for(c=0;c<o.default.COLUMNS;c++)r[(o.default.ROWS-1-s)*o.default.GRIDW+2+c]=d==c?0:111}if(e.core.grid=new Uint8Array(o.default.GRIDSIZE),e.core.grid.set(r),l){var u=e.core.cur_x,f=e.core.cur_y,h=e.core.cur_z,m=e.core.currentBlock,p=!1;for(s=0;s<4;s++)for(c=0;c<4;c++)this.isInGrid(f+s,u+c)&&e.core.grid[(f+s)*o.default.GRIDW+u+c]&&e.blockData[m][h][4*s+c]&&(p=!0);for(p&&(e.core.cur_y-=t,f=e.core.cur_y),s=0;s<4;s++)for(c=0;c<4;c++)this.isInGrid(f+s,u+c)&&(e.core.grid[(f+s)*o.default.GRIDW+u+c]+=e.blockData[m][h][4*s+c])}for(s=0;s<o.default.COLUMNS;s++)e.core.columnTop[s]+=t;if(0!=e.core.fullRows.length)for(var g=0;g<e.core.fullRows.length;g++)e.core.fullRows[g]-=t}},e.prototype.update=function(){this.timer.readyWending!=o.default.WENDING&&this.timer.readyWending--,this.timer.update()},e.prototype.isEndlessLevelEnd=function(){if(!this.model.config.isEndless)return!1;for(var e=0,t=Array.from(this.core.gemMax.keys());e<t.length;e++){var i=t[e];if(this.core.gemCount.has(i)&&this.core.gemMax.get(i)!=this.core.gemCount.get(i))return!1}return!0},e.prototype.setFreezeStep=function(e){this.core.nextAttack=this.core.nextAttack>0?this.core.nextAttack:0,this.core.nextAttack+=e},e}();i.default=f,cc._RF.pop()},{"../common/NotificationCenter":"NotificationCenter","../common/Timer":"Timer","./Engine":"Engine","./GameCore":"GameCore","./GameEvent":"GameEvent","./GameUtil":"GameUtil","./data/Config":"Config","./model/GameState":"GameState","./model/GameTimer":"GameTimer"}],GameModel:[function(e,t,i){"use strict";cc._RF.push(t,"9c673LvpwVAt7SVrbp77fl5","GameModel"),Object.defineProperty(i,"__esModule",{value:!0});var o=e("../data/Config"),n=e("./GameConfig"),a=e("./GameReplay"),s=e("../GameGrid"),c=e("../Engine"),r=e("../ai/AI"),l=e("../Profile"),d=e("../../common/EventType"),u=e("../../common/AdManager"),f=e("../../common/NotificationCenter"),h=function(){function e(){this.ebdir=1,this.beginHelp1st=-1,this.grid=[],this.stage=0,this.emergency=!1,this.keepStar=!1,this.pause=!1,this.currentStage=0,this.currentStatus=o.default.GAME_STATE.HOMEPAGE,this.endlessLine=0,this.endlessClear=!1,this.endlessLevel=1,this.allowDoPopAction=!0,this.adSlot=-1,this.adSlotConf=[],this.blockQueue=new Array(o.default.MAX_BLOCK_QUEUE),this.bgAudioContext=null,f.default.listen(d.EventType.GAME_SHOW,this.onForGround,this),f.default.listen("changeAd",this.onChangeAd,this)}return e.prototype.genRandomBlockQueue=function(e){if(c.default.srand(e),l.default.info.classic)for(var t=void 0,i=-1,n=0;n<o.default.MAX_BLOCK_QUEUE;n++){for(;i==(t=c.default.rand()%9););(a=c.default.rand())%(this.config.mode,o.default.MODE_AI,2)==0&&(this.config.mode==o.default.MODE_AI&&(5!=t&&6!=t||(t=0),3!=t&&4!=t||(t=8),1!=t&&2!=t||(t=7)),this.config.mode==o.default.MODE_SINGLE&&(5==t&&(t=8),3!=t&&4!=t||(t=8),1!=t&&2!=t&&6!=t||(t=7))),this.blockQueue[n]=t,i=t}else for(n=0;n<o.default.MAX_BLOCK_QUEUE;n++){var a=c.default.rand();t=c.default.rand()%9;a%3==0&&(3!=t&&4!=t||(t=2)),this.blockQueue[n]=t}},e.prototype.getRandomGemConfig=function(){for(var e=o.default.CONFIG.gem_endless,t=e.level,i=e.gem,n=0;n<t.length;n++){var a=t[n];if(n>0&&this.endlessLevel<a&&this.endlessLevel>=t[n-1])return i[n-1]}return-1},e.prototype.init=function(e,t){if(this.config&&void 0!=this.config.mode){var i=this.config.mode,c=this.config.isWhisper,d=this.config.isEndless,u=this.config.nextAttack;this.config=new n.default,this.config.mode=i,this.config.isWhisper=c,this.config.isEndless=d,this.config.nextAttack=u}else this.config=new n.default;this.replay=new a.default,this.ai=new r.default,this.genRandomBlockQueue(t),this.keepStar=!1;for(var f=0;f<2;f++)if(this.grid[f]=new s.default(this,f),this.grid[f].config=this.config,l.default.info.classic?this.grid[f].setBlkDat(o.default.BLKDAT_CLASSIC):this.grid[f].setBlkDat(o.default.BLKDAT_CRAZY),this.grid[f].setQueue(this.blockQueue),this.grid[f].reset(),this.config.isEndless)this.currentStage=0,this.grid[f].setBitmap(o.default.getBitmap(3+this.endlessLevel-1)),this.addStep=0;else{this.currentStage=e;var h=o.default.BITMAP_STAGE;if(e>=0){var m=h[e%h.length][0];this.grid[f].setBitmap(o.default.getBitmap(m)),this.addStep=0}}},e.prototype.setGameStatus=function(e){this.currentStatus=e,f.default.trigger("STATUS_CHANGE",this.currentStatus),this.displayAd()},e.prototype.getGameStatus=function(){return this.currentStatus},e.prototype.getAutoAttackStep=function(){var e;if(this.config.isEndless)for(var t=Math.round(this.endlessLevel),i=0;i<o.default.CONFIG.auto_attack_endless.stage.length-1;i++){var n=o.default.CONFIG.auto_attack_endless.stage[i],a=o.default.CONFIG.auto_attack_endless.stage[i+1],s=o.default.CONFIG.auto_attack_endless.step[i];if(t<a&&t>=n){e=s;break}}else for(t=this.currentStage%o.default.BITMAP_STAGE.length,i=0;i<o.default.CONFIG.auto_attack.stage.length-1;i++){n=o.default.CONFIG.auto_attack.stage[i],a=o.default.CONFIG.auto_attack.stage[i+1],s=o.default.CONFIG.auto_attack.step[i];if(t<a&&t>=n){e=s;break}}return e},e.prototype.getWinStep=function(){if(this.isDifficulty=!1,this.config.isWhisper)return 50;if(this.config.isEndless)return 5e6;var e=this.currentStage%o.default.BITMAP_STAGE.length,t=o.default.BITMAP_STAGE[e][1];if(o.default.CONFIG.winstep_difficulty)for(var i=0;i<o.default.CONFIG.winstep_difficulty.stage.length;i++){if(e==o.default.CONFIG.winstep_difficulty.stage[i][0]-1)this.isDifficulty=!0,t-=o.default.CONFIG.winstep_difficulty.stage[i][1]}if(this.currentStage>=o.default.BITMAP_STAGE.length)return Math.round(2*t/3);if(o.default.CONFIG.winstep_new)for(i=0;i<o.default.CONFIG.winstep_new.stage.length-1;i++){var n=o.default.CONFIG.winstep_new.stage[i],a=o.default.CONFIG.winstep_new.stage[i+1],s=o.default.CONFIG.winstep_new.step[i];if(e<a&&e>=n){t+=s;break}}return t},e.prototype.getWinLine=function(){for(var e,t=this.currentStage%o.default.BITMAP_STAGE.length,i=0;i<o.default.CONFIG.winline.stage.length-1;i++){var n=o.default.CONFIG.winline.stage[i],a=o.default.CONFIG.winline.stage[i+1],s=o.default.CONFIG.winline.line[i];if(t<a&&t>=n){e=s;break}}return e},e.prototype.displayAd=function(){var e=this;function t(t){e.adSlot!=t&&(e.adSlot=t,u.default.showBannerAd(e.adSlotConf[e.adSlot]))}this.getGameStatus()!=o.default.GAME_STATE.HOMEPAGE&&0==this.needHelp1st?this.getGameStatus()==o.default.GAME_STATE.HOMEPAGE?t(1):this.config.mode==o.default.MODE_AI?t(2):t(3):u.default.destroyBannerAd()},e.prototype.onChangeAd=function(){u.default.showBannerAd(this.adSlotConf[this.adSlot])},e.prototype.checkPlayMusic=function(){var e=!0;return l.default.getIsMusicMute()&&(e=!1,this.stopBgMusic()),e},e.prototype.onForGround=function(){this.checkPlayMusic()&&this.bgAudioContext&&this.playBgMusic()},e.prototype.playMusic=function(e,t,i){var n=this;this.checkPlayMusic()&&cc.resources.load(e,cc.AudioClip,function(a,s){a?cc.log(a,e):e==o.default.SOUND.BG_MUSIC?(n.stopBgMusic(),n.bgAudioContext=s,n.playBgMusic()):cc.audioEngine.play(s,t,i)})},e.prototype.playBgMusic=function(){cc.audioEngine.playMusic(this.bgAudioContext,!0)},e.prototype.stopBgMusic=function(){this.bgAudioContext&&cc.audioEngine.stopMusic(),this.bgAudioContext=null},e}();i.default=h,cc._RF.pop()},{"../../common/AdManager":"AdManager","../../common/EventType":"EventType","../../common/NotificationCenter":"NotificationCenter","../Engine":"Engine","../GameGrid":"GameGrid","../Profile":"Profile","../ai/AI":"AI","../data/Config":"Config","./GameConfig":"GameConfig","./GameReplay":"GameReplay"}],GameRender:[function(e,t,i){"use strict";cc._RF.push(t,"cfdb1W+Ea1EiJ8upUonkiO1","GameRender"),Object.defineProperty(i,"__esModule",{value:!0});var o=e("./data/Config"),n=e("../core/Profile"),a=e("./GameEvent"),s=e("../common/NotificationCenter"),c=function(){function e(e,t,i){this.index=e,this.grid=t,this.gnode=i,this.fullRow={},this.clear_vr=[],this.addMagic=0}return e.prototype.drawGrid=function(){var e=this,t=this.grid.timer,i=o.default.CONFIG.add_magic.clear,n=this.gnode.getComponent("main");if(t.getFirstRenderFlag("clear-row")){this.fullRow={};for(var a,s=this.grid.timer.getExtendData("clear-row"),c=0;c<s.length;c++)this.fullRow[s[c]]=1;n.showAddMagicEffect(),a=i[s.length>=4?4:s.length],this.addMagic+=a;var r=n.gemAnimationMap;r&&r.forEach(function(t,i){var n=o.default.ROWS-1-parseInt(i.split("_")[0]);e.fullRow[n]&&(t.active=!1)}),t.resetFirstRenderFlag("clear-row");for(c=0;c<o.default.COLUMNS;c++)this.clear_vr.push([-3*(15+15*Math.random()),(80+20*Math.random())/180*3.1415926])}var l=this.grid.timer.getStat("clear-row");if(0==l){if(!this.grid.needDraw)return;this.grid.needDraw=!1}var d=this.grid.core.grid,u=n.blocks[this.index];for(c=0;c<o.default.ROWS;c++)for(var f=0;f<o.default.COLUMNS;f++){var h=d[c*o.default.GRIDW+f+2],m=u[o.default.ROWS-c-1][f],p=0,g=0,_=void 0,v=void 0,E=0,S=0,C=0;if(0!=l&&this.fullRow[c]){_=this.clear_vr[f][1],v=this.clear_vr[f][0];var A=10-l;p=0==h?0:l/2%2==0?0:250,E=-.01,S=A*v*Math.cos(_)/8,C=(A*v*Math.sin(_)-4.9*A*A)/5,g=36*A}else p=0==h?0:180;0==this.index?n.setBlockColor(!0,m,p,h%100,1,g):n.setBlockColor(!1,m,p,h%100,1,g),m.rawscale&&(m.scale=m.rawscale*(1-(10-l)*E)*10/o.default.COLUMNS),m.position=m.position.add(cc.v2(S,C))}if(0==this.index){var I=this.grid.core.currentBlock,y=this.grid.core.tdx,T=this.grid.core.tdy,M=this.grid.core.cur_z,G=475.2/o.default.COLUMNS+2;n.shadow.opacity=60,n.shadow.scale=9.6/o.default.COLUMNS,n.shadow.angle=-90*M;var N=G*o.default.BLK_C_OFFSET[I][M][0],b=G*o.default.BLK_C_OFFSET[I][M][1];n.shadow.position=cc.v2(o.default.SHADOW_POS_X+G*y+N,o.default.SHADOW_POS_Y+G*(o.default.ROWS-T)+b-980/o.default.COLUMNS),n.shadow.getComponent(cc.Sprite).spriteFrame=n.getShadowFrame(I)}},e.prototype.drawHoldNext=function(){if(0==this.index)for(var e=this.gnode.getComponent("main"),t=this.grid,i=e.holdNext,a=[t.core.saveBlock,t.queue[(t.core.blockIndex+1)%o.default.MAX_BLOCK_QUEUE],t.queue[(t.core.blockIndex+2)%o.default.MAX_BLOCK_QUEUE]],s=0;s<3;s++)if(a[s]>=0)for(var c=0;c<4;c++)for(var r=0;r<4;r++){var l=n.default.info.classic?o.default.BLKDAT_CLASSIC[a[s]][0][4*c+r]:o.default.BLKDAT_CRAZY[a[s]][0][4*c+r];(d=i[s][c][r]).opacity=0==l?50:200,d.getComponent(cc.Sprite).spriteFrame=e.getBlockFrame(!0,l%100)}else for(c=0;c<4;c++)for(r=0;r<4;r++){var d;(d=i[s][c][r]).opacity=50,d.getComponent(cc.Sprite).spriteFrame=e.getBlockFrame(!0,0)}},e.prototype.drawAttackLine=function(e,t,i,o,n){for(var a=Math.abs(t.sub(i).mag())/n,s=this.gnode.getComponent("main").attani[this.index],c=0;c<6;c++)if(s[e][c].stopAllActions(),s[e][c].setPosition(t),0==c)s[e][c].runAction(cc.sequence(cc.delayTime(o),cc.show(),cc.spawn(cc.rotateBy(n,1800),cc.moveTo(n,i)),cc.callFunc(function(){this.getComponent(cc.Sprite).setVisible(!1)},s[e][c])));else{var r=20/a;s[e][c].runAction(cc.sequence(cc.delayTime(o+r*c),cc.show(),cc.moveTo(n,i),cc.callFunc(function(){this.getComponent(cc.Sprite).setVisible(!1)},s[e][c])))}},e.prototype.drawAttack=function(){if(this.grid.timer.getFirstRenderFlag("attack")){var e=this.gnode.getComponent("main"),t=this.grid.timer.getExtendData("attack");if(e.game.model.playMusic(o.default.SOUND.ATTACK,!1),e.game.model.config.mode==o.default.MODE_AI)for(var i=[2,3,5],n=0==this.index?cc.v2(470,630):cc.v2(100,880),a=0;a<i[t-1];a++){var s=0==this.index?cc.v2(100+20*a,900+30*a):cc.v2(470+20*a,700+60*a),c=.1*Math.random();this.drawAttackLine(a,n,s,c,.3)}1!=this.grid.index&&t>=2&&e.showClearAnimation(t+1),this.grid.timer.resetFirstRenderFlag("attack")}},e.prototype.drawCombo=function(){if(this.grid.timer.getFirstRenderFlag("combo")){var e=this.gnode.getComponent("main"),t=this.grid.timer.getExtendData("combo");if(t>=4){var i=t;t>14&&(i=14),e.game.model.playMusic(o.default.SOUND.COMBO[i-4],!1)}1!=this.grid.index&&e.showCombo(t);var n=o.default.CONFIG.add_magic.combo,a=t>=4?t*n:0;this.addMagic+=a,this.grid.timer.resetFirstRenderFlag("combo")}},e.prototype.draw=function(){this.drawGrid(),this.drawHoldNext(),this.drawAttack(),this.drawCombo(),this.addMagic>0&&(s.default.trigger(a.GameEvent.ADD_MAGIC,this.addMagic),this.addMagic=0)},e}();i.default=c,cc._RF.pop()},{"../common/NotificationCenter":"NotificationCenter","../core/Profile":"Profile","./GameEvent":"GameEvent","./data/Config":"Config"}],GameReplay:[function(e,t,i){"use strict";cc._RF.push(t,"58e24mJuTZCZr1XwtsLfbBD","GameReplay"),Object.defineProperty(i,"__esModule",{value:!0});var o=function(){function e(){this.areaId=0,this.stage=0,this.act=""}return e.prototype.recordAction=function(e,t){this.act=t},e}();i.default=o,cc._RF.pop()},{}],GameState:[function(e,t,i){"use strict";cc._RF.push(t,"8bb56kBXrZN0a4hskrhED+j","GameState"),Object.defineProperty(i,"__esModule",{value:!0});var o=e("../data/Config"),n=function(){function e(){this.totalCombo=0,this.maxCombo=0,this.currentCombo=0,this.level=0,this.score=0,this.clearLines=0,this.isKO=!1}return e.prototype.addScore=function(e){this.score+=e;for(var t=0;t<o.default.UPGRADE_STANTARD.length;t++)if(this.score<=o.default.UPGRADE_STANTARD[t+1]&&this.score>=o.default.UPGRADE_STANTARD[t]){this.level=t;break}},e}();i.default=n,cc._RF.pop()},{"../data/Config":"Config"}],GameTimer:[function(e,t,i){"use strict";cc._RF.push(t,"ba7d0JmdqxLqb2Ffi5em4/B","GameTimer"),Object.defineProperty(i,"__esModule",{value:!0});var o=function(e){function t(){var t=e.call(this)||this;return t.readyWending=0,t}return __extends(t,e),t}(e("./CTimer").default);i.default=o,cc._RF.pop()},{"./CTimer":"CTimer"}],GameTouch:[function(e,t,i){"use strict";cc._RF.push(t,"4133eQS9JNMA5FiDXpKGGA+","GameTouch"),Object.defineProperty(i,"__esModule",{value:!0});var o=function(){function e(e){this.game=e,this._firstTouchPoint=cc.v2(0,0),this._lastTouchPoint=cc.v2(0,0),this._lastPointDrag=cc.v2(0,0),this._isNeedDrop=!1,this._isNeedHold=!1,this.maxRLAction=0,this.maxDAction=0,this._firstTouchTime=0,this._lastMoveTime=0,this._moveDX=0,this._moveDY=0,this._idenSizeX=0,this._idenSizeY=0,this._idenSizeDrop=0}return e.prototype.triggerPutUserAction=function(e){this.game.userAction[this.game.userAction.length]=e},e.prototype.began=function(e,t){return this._beganGesture(e,t)},e.prototype.moved=function(e,t){this._movedGesture(e,t)},e.prototype.ended=function(e,t){this._endedGesture(e,t)},e.prototype._setTouchKeyThreshold=function(e,t){this._idenSizeX=48,this._idenSizeY=40,this._idenSizeDrop=35},e.prototype._beganGesture=function(e,t){var i=(new Date).getTime();return this._lastMoveTime=i,this._firstTouchTime=i,this._firstTouchPoint.x=e,this._firstTouchPoint.y=t,this._lastTouchPoint.x=e,this._lastTouchPoint.y=t,this._lastPointDrag.x=e,this._lastPointDrag.y=t,this._isNeedDrop=!1,this._isNeedHold=!1,this._moveDX=0,this._moveDY=0,this.maxRLAction=this.game.model.grid[0].core.cur_x-5,!0},e.prototype._movedGesture=function(e,t){var i=(new Date).getTime();Math.abs(this._firstTouchPoint.x-e)>this._moveDX&&(this._moveDX=Math.abs(this._firstTouchPoint.x-e)),Math.abs(this._firstTouchPoint.y-t)>this._moveDY&&(this._moveDY=Math.abs(this._firstTouchPoint.y-t));var o=e-this._lastTouchPoint.x,n=t-this._lastTouchPoint.y;this._lastTouchPoint.x=e,this._lastTouchPoint.y=t;var a=e-this._lastPointDrag.x,s=t-this._lastPointDrag.y,c=i-this._lastMoveTime;if(this._setTouchKeyThreshold(o,c),0!=o||0!=n){if(n<-this._idenSizeDrop&&o<=.6*this._idenSizeX&&o>=.6*-this._idenSizeX&&(this._isNeedDrop=!0),n>this._idenSizeDrop&&(o<=1.1*this._idenSizeX&&o>=1.1*-this._idenSizeX&&(this._isNeedHold=!0),this._lastPointDrag.y=t),n>=-this._idenSizeDrop&&n<=this._idenSizeDrop){var r=!1;if(n>=0?r=!0:Math.abs(o)/Math.abs(n)>1?r=!0:this._lastPointDrag.x=e,a>this._idenSizeX&&r){for(var l=Math.round(a/this._idenSizeX),d=0;d<l;d++)this.maxRLAction<=5&&(this.triggerPutUserAction("R"),this.maxRLAction++);this._lastPointDrag.x+=this._idenSizeX*l,this._lastPointDrag.y=t,this._isNeedDrop=!1,this._isNeedHold=!1}if(a<-this._idenSizeX&&r){for(l=Math.round(Math.abs(a)/this._idenSizeX),d=0;d<l;d++)this.maxRLAction>=-5&&(this.triggerPutUserAction("L"),this.maxRLAction--);this._lastPointDrag.x-=this._idenSizeX*l,this._lastPointDrag.y=t,this._isNeedDrop=!1,this._isNeedHold=!1}if(s<-this._idenSizeY){for(l=Math.round(Math.abs(s)/this._idenSizeY),d=0;d<l;d++)this.maxDAction<=20&&(this.triggerPutUserAction("D"),this.maxDAction++);this._lastPointDrag.x=e,this._lastPointDrag.y-=this._idenSizeY*l}}this._lastMoveTime=i}},e.prototype._endedGesture=function(e,t){this._isNeedDrop&&(this.triggerPutUserAction("W"),this._isNeedDrop=!1),this._isNeedHold&&(this.triggerPutUserAction("S"),this._isNeedHold=!1),this._moveDX<=25&&this._moveDY<=25&&this.triggerPutUserAction("T")},e}();i.default=o,cc._RF.pop()},{}],GameUtil:[function(e,t,i){"use strict";cc._RF.push(t,"7be25AN/uNA8oGA5aaZliIg","GameUtil"),Object.defineProperty(i,"__esModule",{value:!0});var o=new Map([[112,0],[113,1],[114,2]]),n=function(){function e(){}return e.shuffle=function(e,t){var i;void 0===t&&(t=2);for(var o=e,n=0;n<t;n++)for(var a=0;a<o.length-1;a++){var s=Math.round(Math.random()*(o.length-1));i=[o[s],o[a]],o[a]=i[0],o[s]=i[1]}return o},e.delItem=function(e){cc.sys.localStorage.removeItem(e)},e.saveItem=function(e,t,i){t+="",cc.sys.localStorage.setItem(e,t)},e.loadItem=function(e,t){var i=cc.sys.localStorage.getItem(e);return i||(cc.sys.localStorage.setItem(e,t),t)},e.checkGift=function(e){return 1300<e},e.isGem=function(e){return o.has(e)},e}();i.default=n,cc._RF.pop()},{}],Game:[function(e,t,i){"use strict";cc._RF.push(t,"a9bb3DIoQ9NXbjE4AfDaL9W","Game"),Object.defineProperty(i,"__esModule",{value:!0});var o=e("./data/Config"),n=e("./GameRender"),a=e("./GameEvent"),s=e("./Profile"),c=e("../common/EventType"),r=e("../common/Bilog"),l=e("../common/ShareInterface"),d=e("../common/NotificationCenter"),u=e("../ui/UiManager"),f=e("../ui/StarControl"),h=e("../ReadyGo"),m=function(){function e(e){this.model=e,this.stage=0,this.timeoauto=0,this.timeoai=0,this.userAction=[],this.config=null,this.requestTimes=3,this.requestConfigInfo(),this.magicBusy=!1,this.isWaitingRevive=!1,this.isShowingEndlessLevelEnd=!1,this.currentReviveTimes=0,d.default.listen(c.EventType.GET_SHARE_CONFIG_SUCCESS,this.onGetShareMsg,this),d.default.listen(a.GameEvent.SET_MAGIC_BUSY,this.onMagicBusy,this)}return e.prototype.onGetShareMsg=function(e){if(e&&e.retmsg){var t=e.retmsg.delivery,i=t[Math.floor(1e4*Math.random())%t.length];i&&i.shareContent&&i.sharePicUrl&&i.sharePointId&&i.shareSchemeId&&l.default.setOnShareAppMessageInfo(i.shareContent,i.sharePicUrl,i.sharePointId,i.shareSchemeId)}},e.prototype.onMagicBusy=function(e){this.magicBusy=e},e.prototype.initGame=function(e,t,i){this.gameNode=e,this.model.stage=0;try{this.model.init(t,i),this.model.config.isEndless&&0==this.model.endlessLevel&&(this.currentReviveTimes=0)}catch(e){console.log(e)}this.render=[];for(var a=0;a<2;a++)this.render[a]=new n.default(a,this.model.grid[a],this.gameNode);this.userAction=[],this.model.config.mode==o.default.MODE_AI&&this.startTimerCountdown(o.default.TIMER_COUNT),this.playActionBase(0,"S"),this.model.grid[0].core.saveLock=!1,this.playActionBase(0,"D"),this.model.grid[0].updateColHoleTop(2,11),this.isWaitingRevive=!1},e.prototype.requestConfigInfo=function(){cc.resources.load("config/tetris",function(e,t){e?console.log(e):o.default.CONFIG=t.json.default})},e.prototype.scheduleUpdate=function(e){this.model.stage++;var t=this.model.getGameStatus(),i=this.gameNode.getComponent("main");if(t==o.default.GAME_STATE.PLAYING){if(this.updatePlayingView(e),this.model.needHelp1st&&(i.mask.opacity=200,this.model.stage%150==0&&null==i.maskidx&&(i.maskidx=0)),this.model.emergency){var n=null;this.model.config.mode==o.default.MODE_AI?(n=i.share5line,i.animShareDecLine.getComponent("shareGiftAnimationView").show()):(n=i.share5step,i.animShareIncStep.getComponent("shareGiftAnimationView").show()),n.active=!0,0==this.model.stage%6&&(this.model.ebdir=-1*this.model.ebdir)}else i.share5line.active=!1,i.animShareDecLine.getComponent("shareGiftAnimationView").hide(),i.share5step.active=!1,i.animShareIncStep.getComponent("shareGiftAnimationView").hide();this.updateScoreTitle(),this.model.config.canRun||this.show_mask()}},e.prototype.updatePlayingView=function(e){if(this.isShowingEndlessLevelEnd||this.render[0].draw(),this.model.config.mode!=o.default.MODE_SINGLE&&this.render[1].draw(),this.model.config.isReplay){if(this.model.pause)return}else switch(this.model.config.mode){case o.default.MODE_SINGLE:if(this.model.pause)return;if(!this.isShowingEndlessLevelEnd&&this.model.config.isEndless&&this.model.grid[0].isEndlessLevelEnd()&&this.model.getGameStatus()==o.default.GAME_STATE.PLAYING){this.isShowingEndlessLevelEnd=!0,this.updateEndlessScore(this.model.grid[0].state.score);var t=this;this.model.grid[0].clearAllRows(function(){t.model.endlessLevel++,s.default.info.endlessLevel=t.model.endlessLevel+"-"+t.model.grid[0].state.score,s.default.save(),t.showNextStageWhenEndless()}),d.default.trigger(a.GameEvent.ON_SHOW_ENDLESS_LEVEL_UP,null)}var i=this.model.getWinLine();if(!this.model.config.isEndless&&this.model.grid[0].core.topLine<=i&&this.model.getGameStatus()==o.default.GAME_STATE.PLAYING){if(-1==this.model.begin_win_partical){this.model.begin_win_partical=0;var n=this;setTimeout(function(){n.model.begin_win_partical=-1,n.model.playMusic(o.default.SOUND.WIN,!1),n.model.currentStage+=1,n.updateStage(n.model.currentStage),n.model.setGameStatus(o.default.GAME_STATE.RESULT_WIN),r.default.clickStat(r.default.clickEvent.EndSingleWin,[n.model.currentStage])},1200)}return}var c=this.model.getWinStep();if(!this.isWaitingRevive){if(this.model.grid[0].core.blockIndex>=c+this.model.addStep&&0==this.model.grid[0].core.fullRows.length)return this.model.playMusic(o.default.SOUND.LOSE,!1),this.model.setGameStatus(o.default.GAME_STATE.SHOW_REVIVE),this.isWaitingRevive=!0,void r.default.clickStat(r.default.clickEvent.EndSingleLose,[this.model.currentStage,this.model.addStep]);if(this.model.grid[0].core.gameOver)return this.model.playMusic(o.default.SOUND.LOSE,!1),this.model.setGameStatus(o.default.GAME_STATE.SHOW_REVIVE),void(this.isWaitingRevive=!0)}this.playAutoDownAction(e),this.playUserAction(e);break;case o.default.MODE_AI:if(this.model.pause)return;if(this.model.grid[0].core.gameOver)return this.model.playMusic(o.default.SOUND.LOSE,!1),void(o.default.CONFIG.openEmergency?this.model.setGameStatus(o.default.GAME_STATE.KEEPSTAR):(this.updatePKStar(-1),this.model.setGameStatus(o.default.GAME_STATE.RESULT_LOSE),r.default.clickStat(r.default.clickEvent.EndVSLoseNE,[this.model.pkStar,this.model.pkLevel,this.model.aiLevel])));if(this.model.grid[1].core.gameOver){if(-1==this.model.begin_win_partical){this.model.begin_win_partical=0;n=this;setTimeout(function(){n.model.begin_win_partical=-1,n.model.playMusic(o.default.SOUND.WIN,!1),n.updatePKLevel(),n.updatePKStar(1),n.model.setGameStatus(o.default.GAME_STATE.RESULT_WIN);var e=n.model.pkStar,t=n.model.pkLevel;r.default.clickStat(r.default.clickEvent.EndVSWin,[e,t,n.model.pkStar,n.model.pkLevel,n.model.aiLevel])},1200)}return}this.playAutoDownAction(e),this.playUserAction(e),this.playAIAction(e)}this.updateGrid(0,e),this.updateGrid(1,e),this.checkEmergency()},e.prototype.playAutoDownAction=function(e){var t;t=this.model.config.mode==o.default.MODE_AI?0:this.model.grid[0].state.level;var i=1e3*o.default.DOWN_TIME[t];if(this.timeoauto>i){if(this.timeoauto=0,this.model.grid[0].timer.getStat("fall"))return;this.playActionBase(0,"D")}else this.timeoauto+=e},e.prototype.playAIAction=function(e){this.model.ai.work2Idx>=0&&this.model.ai.getAIAction(this.model.grid[1]);var t=o.default.AI_SPEED[this.model.aiLevel];if(this.timeoai>t){var i=this.model.ai.getAIAction(this.model.grid[1]);this.playActionBase(1,i),this.timeoai=0}else this.timeoai+=e},e.prototype.playUserAction=function(e){for(var t=0;t<this.userAction.length;t++)this.model.config.isReplay||this.playActionBase(0,this.userAction[t]);this.userAction=[]},e.prototype.updateGrid=function(e,t){var i=this.model.grid[e].core;if(!i.gameOver){if(i.attack[0]){for(var o=0;o<2;o++)o==e||i.gameOver||(this.model.grid[e].attack(this.model.grid[o],i.attack[0],i.attack[1]),this.model.grid[o].testDDown(),this.model.grid[e].timer.trigger("attack",i.attack[0]));i.attack[0]=0}this.model.grid[e].update()}},e.prototype.checkEmergency=function(){if(o.default.CONFIG.openEmergency&&this.model.getGameStatus()==o.default.GAME_STATE.PLAYING){if(this.model.config.mode==o.default.MODE_AI)if(this.model.grid[0].core.topLine>=15)return void(this.model.emergency=!0);if(this.model.config.mode==o.default.MODE_SINGLE){var e=this.model.getWinStep();if(this.model.grid[0].core.blockIndex>=e+this.model.addStep-4)return void(this.model.emergency=!0)}this.model.emergency=!1}},e.prototype.updateScoreTitle=function(){var e=this.model.getGameStatus(),t=this.gameNode.getComponent("main").lbl_antiscore,i=this.gameNode.getComponent("main").lbl_progress,n=this.gameNode.getComponent("main").lbl_title,a=this.gameNode.getComponent("main").lbl_myscore,s=this.gameNode.getComponent("main").lbl_endless_score;if(e==o.default.GAME_STATE.HOMEPAGE||e==o.default.GAME_STATE.HELP||e==o.default.GAME_STATE.RANK?(t.active=!1,i.active=!1,n.active=!1,a.active=!1,s.active=!1):this.model.config.mode==o.default.MODE_AI?(s.active=!1,t.active=!0,i.active=!0,n.active=!0,a.active=!0,t.getComponent(cc.Label).string=this.model.grid[1].state.score,n.getComponent(cc.Label).string=o.default.PLAYER_TITLE[this.model.pkStarLevel][1],a.getComponent(cc.Label).string=this.model.grid[0].state.score):(s.active=this.model.config.isEndless,n.active=!0,a.active=!0,i.active=!1,t.active=!1,this.model.config.isEndless?n.getComponent(cc.Label).string="LV: "+this.model.endlessLevel:n.getComponent(cc.Label).string="Stage: "+(this.model.currentStage+1),a.getComponent(cc.Label).string=this.model.grid[0].state.score,a.active=!this.model.config.isEndless,s.getComponent(cc.Label).string=this.model.grid[0].state.score),e!=o.default.GAME_STATE.PLAYING)this.stopTimerCountdown(),this.gameNode.getComponent("main").timestep.active=!1,this.gameNode.getComponent("main").lbl_time.active=!1;else if(this.gameNode.getComponent("main").timestep.active=!0,this.model.config.mode==o.default.MODE_AI&&(this.gameNode.getComponent("main").lbl_time.active=!0,this.gameNode.getComponent("main").lbl_time.getComponent(cc.Label).string=this._time),this.model.config.mode==o.default.MODE_SINGLE){this.gameNode.getComponent("main").lbl_time.active=!0;var c=this.model.getWinStep(),r="";r=c>=1e5?"\u221e":c+this.model.addStep-this.model.grid[0].core.blockIndex+"",this.gameNode.getComponent("main").lbl_time.getComponent(cc.Label).string=r}},e.prototype._freshCountdown=function(e){e._time--,3==this._time&&e.gameNode.getComponent("main").lbl_time.runAction(cc.blink(3,12)),e._time<=0&&(e._time=0,e.stopTimerCountdown(),e.model.config.mode==o.default.MODE_AI&&(e.model.grid[0].state.score>e.model.grid[1].state.score?e.model.grid[1].core.gameOver=!0:e.model.grid[0].state.score<e.model.grid[1].state.score?e.model.grid[0].core.gameOver=!0:e.model.grid[1].core.gameOver=!0))},e.prototype.stopTimerCountdown=function(){this.gameNode.getComponent("main").lbl_time.stopAllActions(),this.countTimerObj&&clearInterval(this.countTimerObj),this.countTimerObj=null},e.prototype.startTimerCountdown=function(e){var t=this;this._time=e,null!=this.countTimerObj&&clearInterval(this.countTimerObj),this.countTimerObj=setInterval(function(){t._freshCountdown(t)},1e3)},e.prototype.updateStage=function(e){e>s.default.info.stage2&&(s.default.info.stage2=e,s.default.save())},e.prototype.updateEndlessScore=function(e){e>s.default.info.score&&(s.default.info.score=e,s.default.save())},e.prototype.updatePKStar=function(e){var t=this.model.pkStar;t=Math.max(0,t+e),s.default.info.pkStar=t,s.default.save(),this.model.pkStar=t;var i=this._getPKStarLevel(t);this.model.pkStarLevel=i[0],this.model.pkStarLevelReach=i[1]},e.prototype._getPKStarLevel=function(e){if(!e)return[0,0];for(var t=o.default.PLAYER_TITLE.length,i=0,n=0,a=0;a<t;a++){if((i+=o.default.PLAYER_TITLE[a][0])>=e){n=a;break}}return[n,o.default.PLAYER_TITLE[n][0]-(i-e)]},e.prototype._getPKStarLevelName=function(e){var t=this._getPKStarLevel(e)[0];return o.default.PLAYER_TITLE[t][1]},e.prototype.updatePKLevel=function(){var e=this.model.grid[0],t=this.model.grid[1];if(!e.isUserGiveUp()){var i=s.default.info.pkCount+1;s.default.info.pkCount=i,s.default.save();var n=Math.abs(e.state.score-t.state.score)/1e4,a=this.model.pkLevel,c=a-this.model.aiLevel;a+=o.default.LEVEL_K[a]*(n-c),i<=5&&n<1&&(a+=2),a<0&&(a=0),a>18&&(a=18),this.model.pkLevel=a,s.default.info.pkLevel=this.model.pkLevel,s.default.save()}},e.prototype._testTurn=function(e,t,i){for(var n=e.core.clone(),a=0;a<i.length;a++)"L"==i[a]&&e.moveBlk(o.default.LEFT,!1),"R"==i[a]&&e.moveBlk(o.default.RIGHT,!1);return e.moveBlk(t,!1)==o.default.NORMAL?(e.testDDown(),!0):(e.core.recycle(),e.core=n.clone(),n.recycle(),!1)},e.prototype.playActionBase=function(e,t){var i,n=this.model.grid[e];switch(n.timer.getStat("fall")&&n.timer.cancel("fall"),t){case"T":case"U":if(0==e&&this.model.playMusic(o.default.SOUND.TURN,!1),i="T"==t?o.default.CLOCKWISE:o.default.COUNTER_CLOCKWISE,this.model.replay&&this.model.replay.recordAction(e,t),n.moveBlk(i,!1)==o.default.NORMAL){n.testDDown();break}if(this._testTurn(n,i,"L"))break;if(this._testTurn(n,i,"LL"))break;if(this._testTurn(n,i,"R"))break;if(this._testTurn(n,i,"RR"))break;break;case"W":this.model.replay&&this.model.replay.recordAction(e,t),0==e&&this.model.playMusic(o.default.SOUND.DROP,!1),n.timer.trigger("fall",.12);break;case"D":this.model.replay&&this.model.replay.recordAction(e,t),0==e&&this.model.playMusic(o.default.SOUND.MOVE,!1),n.moveBlk(o.default.DOWN,!1)==o.default.REACH_BOTTOM&&n.nextBlk(!1),n.testDDown();break;case"L":0==e&&this.model.playMusic(o.default.SOUND.MOVE,!1),n.moveBlk(o.default.LEFT,!1),n.testDDown(),this.model.replay&&this.model.replay.recordAction(e,t);break;case"R":0==e&&this.model.playMusic(o.default.SOUND.MOVE,!1),n.moveBlk(o.default.RIGHT,!1),n.testDDown(),this.model.replay&&this.model.replay.recordAction(e,t);break;case"S":this.model.replay&&this.model.replay.recordAction(e,t),n.saveBlk(!1),n.testDDown();break;case"N":this.model.replay&&this.model.replay.recordAction(e,t)}},e.prototype.sinkAllCol=function(e){this.model.grid[e].sinkAllCol()},e.prototype.fillRandomBlock=function(e,t){return this.model.grid[e].randomFillGrid(t)},e.prototype.fillGridByIndex=function(e,t){var i=this.model.grid[e];i.fillGridByIndex(t),i.needDraw=!0},e.prototype.clearRow=function(e){this.model.grid[e].checkClearRow(!1)},e.prototype.useMagicWand=function(e){this.model.grid[e].clearTopGridByCount()},e.prototype.setFreezeStep=function(){this.model.grid[0].setFreezeStep(5)},e.prototype.updateBlock=function(){for(var e=this.gameNode.getComponent("main"),t=0;t<2;t++)for(var i=0,n=o.default.ROWS;i<n;i++)for(var a=0,s=o.default.COLUMNS;a<s;a++){var c=e.blocks[t][i][a],r=0==t?6.6/o.default.COLUMNS:2.4/o.default.COLUMNS;c.scale=r,e.setBlockColor(!0,c,0,8);var l=72*r+2;0==t&&(c.position=cc.v2(o.default.USER_POS_X+(a+.5)*l,o.default.USER_POS_Y+(i+.5)*l),c.rawpos=c.position),1==t&&(c.position=cc.v2(o.default.AI_POS_X+(a+.5)*l,o.default.AI_POS_Y+(i+.5)*l),c.rawpos=c.position)}if(10==o.default.COLUMNS)for(t=0;t<2;t++)for(i=0;i<o.default.ROWS;i++){c=e.blocks[t][i][10];e.setBlockColor(!0,c,0,0)}},e.prototype._backToHomePage=function(){this.model.config.isWhisper=!1,this.model.config.isEndless=!1,o.default.COLUMNS=10,this.updateBlock(),this.model.setGameStatus(o.default.GAME_STATE.HOMEPAGE),this.initGame(this.gameNode,0,Math.round(1e4*Math.random())),u.default.hideAllUI(),u.default.showUI(o.default.GAME_LAYER.HOMEPAGE)},e.prototype.matchAILevel=function(){this.model.pkLevel=s.default.info.pkLevel,isNaN(this.model.pkLevel)&&(this.model.pkLevel=6+6*Math.random(),s.default.info.pkLevel=this.model.pkLevel,s.default.save());var e=this.model.pkStar,t=this.model.pkLevel,i=0;e<50?i=Math.random()<=.88?t-2.8-Math.random():t+.5+Math.random():i=t-3*Math.random()+1.5;(i=parseInt(i.toFixed(0)))<0&&(i=0),i>18&&(i=18),this.model.aiLevel=i},e.prototype.setEndless=function(){this.model.config.isEndless=!0,this.model.endlessLine=0;var e=s.default.info.endlessLevel.split("-");this.model.endlessLevel=parseInt(e[0]),this.model.endless_score_save=parseInt(e[1]),this.model.endlessClear=!1,this.model.currentStage=0},e.prototype.startAiGame=function(){o.default.COLUMNS=10,this.model.config.mode=o.default.MODE_AI,u.default.hideAllUI(),u.default.showUI(o.default.GAME_LAYER.GAME_VS),this.updateBlock(),this.updateScoreTitle(),this.matchAILevel(),this.initGame(this.gameNode,-1,Math.round(1e4*Math.random())),r.default.clickStat(r.default.clickEvent.StartVSHome,[this.model.pkStar,this.model.pkLevel,this.model.aiLevel]),this.model.allowDoPopAction=!0,this.model.playMusic(o.default.SOUND.READY_GO,!1),this.model.setGameStatus(o.default.GAME_STATE.SEARCH_AI),f.default.clearNodes()},e.prototype.startClassicGame=function(){var e=this;o.default.COLUMNS=10,this.model.config.mode=o.default.MODE_SINGLE,this.updateBlock(),this.model.currentStage=s.default.info.stage2,this.updateScoreTitle(),this.initGame(this.gameNode,this.model.currentStage,Math.round(1e4*Math.random())),this.model.allowDoPopAction=!0,this.model.setGameStatus(o.default.GAME_STATE.PREPARE),f.default.clearNodes(),this.gameNode.getComponent("main").readyGo.getComponent(h.default).playCountdown(function(){e.model.setGameStatus(o.default.GAME_STATE.PLAYING),e.model.playMusic(o.default.SOUND.READY_GO,!1)})},e.prototype.startEndlessGame=function(){var e=this;o.default.COLUMNS=10,this.model.config.mode=o.default.MODE_SINGLE,this.updateBlock(),this.model.currentStage=s.default.info.score,this.setEndless(),this.model.grid[0].state.score=this.model.endless_score_save,this.updateScoreTitle(),this.initGame(this.gameNode,this.model.currentStage,Math.round(1e4*Math.random())),this.model.allowDoPopAction=!0,this.model.setGameStatus(o.default.GAME_STATE.PREPARE),f.default.clearNodes(),this.gameNode.getComponent("main").readyGo.getComponent(h.default).playCountdown(function(){e.model.playMusic(o.default.SOUND.READY_GO,!1),e.model.setGameStatus(o.default.GAME_STATE.PLAYING)})},e.prototype.loseBackToHome=function(){this.model.allowDoPopAction=!0,this.stopTimerCountdown(),this._backToHomePage(),f.default.clearNodes()},e.prototype.restartGame=function(){this.model.config.mode==o.default.MODE_AI?(this.matchAILevel(),this.model.setGameStatus(o.default.GAME_STATE.SEARCH_AI),r.default.clickStat(r.default.clickEvent.StartVSRestart,[this.model.pkStar,this.model.pkLevel,this.model.aiLevel]),this.initGame(this.gameNode,-1,Math.round(1e4*Math.random()))):(this.model.config.isEndless&&this.setEndless(),this.initGame(this.gameNode,this.model.currentStage,Math.round(1e4*Math.random())),this.model.setGameStatus(o.default.GAME_STATE.PLAYING)),this.model.allowDoPopAction=!0},e.prototype.nextStage=function(){this.model.config.mode==o.default.MODE_AI?(this.matchAILevel(),this.model.setGameStatus(o.default.GAME_STATE.SEARCH_AI),r.default.clickStat(r.default.clickEvent.StartVSNext,[this.model.pkStar,this.model.pkLevel,this.model.aiLevel]),this.initGame(this.gameNode,-1,Math.round(1e4*Math.random()))):(this.initGame(this.gameNode,this.model.currentStage,Math.round(1e4*Math.random())),this.model.setGameStatus(o.default.GAME_STATE.PLAYING),this.model.config.isEndless&&(this.isShowingEndlessLevelEnd=!1,this.model.grid[0].setBitmap(o.default.getBitmap(this.model.endlessLevel+2)))),f.default.clearNodes(),this.model.allowDoPopAction=!0},e.prototype.showNextStageWhenEndless=function(){if(this.model.config.isEndless&&this.isShowingEndlessLevelEnd){var e=this.gameNode.getComponent("main");e.shadow.active=!1,this.model.grid[0].setBitmap(o.default.getBitmap(this.model.endlessLevel+2)),this.render[0].draw();for(var t=0,i=0;i<o.default.ROWS;i++)for(var n=function(n){var c=i*o.default.GRIDW+2+n,r=o.default.ROWS-i-1;if(s.model.grid[0].core.grid[c]>100){t++;var l=e.blocks[0][r][n];e.setBlockColor(!0,l,0,s.model.grid[0].core.grid[c]%100,1,0);var u=72*(o.default.ROWS+3)+72*Math.floor(10*Math.random()),f=u/900,h=s;l.runAction(cc.sequence(cc.moveBy(0,cc.v2(0,u)),cc.callFunc(function(){l.opacity=180}),cc.moveBy(f,cc.v2(0,-u)).easing(cc.easeIn(2.5)),cc.callFunc(function(){0==--t&&(h.isShowingEndlessLevelEnd=!1,e.shadow.active=!0,d.default.trigger(a.GameEvent.ENDLESS_SHOW_LEVEL_END,null),h.model.grid[0].updateColHoleTop(2,11))})))}},s=this,c=0;c<o.default.COLUMNS;c++)n(c)}},e.prototype.show_mask=function(){this.model.getGameStatus()==o.default.GAME_STATE.PLAYING&&(this.model.setGameStatus(o.default.GAME_STATE.SHOW_MASK),this.stopTimerCountdown(),this.model.allowDoPopAction=!0)},e.prototype.hiden_mask=function(){this.model.getGameStatus()==o.default.GAME_STATE.SHOW_MASK&&(this.model.config.canRun=!0,this.continueGame())},e.prototype.pauseGame=function(){this.model.getGameStatus()==o.default.GAME_STATE.PLAYING&&(this.model.setGameStatus(o.default.GAME_STATE.PAUSE),this.stopTimerCountdown())},e.prototype.continueGame=function(){this.model.setGameStatus(o.default.GAME_STATE.PLAYING),this.model.config.mode==o.default.MODE_AI&&this.startTimerCountdown(this._time)},e.prototype.backToHomePage=function(){this.stopTimerCountdown(),this._backToHomePage()},e.prototype.cancelKeepStar=function(){this.model.keepStar=!1,this.updatePKStar(-1),f.default.clearNodes(),this.model.setGameStatus(o.default.GAME_STATE.RESULT_LOSE),r.default.clickStat(r.default.clickEvent.EndVSLoseNoKeep,[this.model.pkStar,this.model.pkLevel,this.model.aiLevel])},e.prototype.keepStarShare=function(){var e=this;l.default.shareMsg({type:o.default.SHARE_TYPE.GAME_KEEP_STAR,successCallback:function(){e.model.keepStar=!0,e.model.setGameStatus(o.default.GAME_STATE.RESULT_LOSE),r.default.clickStat(r.default.clickEvent.EndVSLoseKeep,[e.model.pkStar,e.model.pkLevel,e.model.aiLevel])},failCallback:function(){e.model.keepStar=!1,e.updatePKStar(-1),e.model.setGameStatus(o.default.GAME_STATE.RESULT_LOSE)}}),this.model.allowDoPopAction=!0,f.default.clearNodes()},e.prototype.emergencyShare=function(){var e=this;if((this.model.config.mode==o.default.MODE_AI||this.model.config.mode==o.default.MODE_SINGLE)&&this.model.emergency){var t=void 0;this.model.config.mode==o.default.MODE_AI&&(t=o.default.SHARE_TYPE.GAME_SHARE_DEL5),this.model.config.mode==o.default.MODE_SINGLE&&(t=o.default.SHARE_TYPE.GAME_SHARE_ADD5);this.pauseGame(),l.default.shareMsg({type:t,successCallback:function(){if(e.model.config.mode==o.default.MODE_AI&&e.model.grid[0].clearBottomLinesByCount(5),e.model.config.mode==o.default.MODE_SINGLE){e.model.addStep+=5;var t=e.gameNode.getComponent("main").add5step;t.opacity=255,t.runAction(cc.sequence(cc.blink(1.5,5),cc.callFunc(function(){t.opacity=0})))}e.continueGame()},failCallback:function(){e.continueGame()}}),this.model.allowDoPopAction=!0,f.default.clearNodes()}},e}();i.default=m,cc._RF.pop()},{"../ReadyGo":"ReadyGo","../common/Bilog":"Bilog","../common/EventType":"EventType","../common/NotificationCenter":"NotificationCenter","../common/ShareInterface":"ShareInterface","../ui/StarControl":"StarControl","../ui/UiManager":"UiManager","./GameEvent":"GameEvent","./GameRender":"GameRender","./Profile":"Profile","./data/Config":"Config"}],HttpUtil:[function(e,t,i){"use strict";cc._RF.push(t,"f5a59aiLO9Cy4xRKmMnHR7F","HttpUtil"),Object.defineProperty(i,"__esModule",{value:!0});var o=function(){function e(){}return e.httpPost=function(e,t){},e.httpGet=function(e,t,i){},e}();i.default=o,cc._RF.pop()},{}],IapSdk:[function(e,t,i){"use strict";cc._RF.push(t,"b180dwjs1VG7r0inXFSp3V3","IapSdk"),Object.defineProperty(i,"__esModule",{value:!0});var o=e("./Util"),n=e("../common/BlockQuest"),a=function(){function e(){}return e.createOrder=function(e,t,i,o){},e.orderCallFunc=function(e,t,i){},e.getStoreList=function(){},e.rechargeOrder=function(e){o.default.getLocalUUID(),n.default.SystemInfo.loginUrl},e}();i.default=a,cc._RF.pop()},{"../common/BlockQuest":"BlockQuest","./Util":"Util"}],Loading:[function(e,t,i){"use strict";cc._RF.push(t,"8e61aI7JPdMzJvXZ8GVhWAX","Loading");var o=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function o(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),n=this&&this.__decorate||function(e,t,i,o){var n,a=arguments.length,s=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,o);else for(var c=e.length-1;c>=0;c--)(n=e[c])&&(s=(a<3?n(s):a>3?n(t,i,s):n(t,i))||s);return a>3&&s&&Object.defineProperty(t,i,s),s};Object.defineProperty(i,"__esModule",{value:!0});var a=cc._decorator,s=a.ccclass,c=a.property,r=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.lblProgress=null,t}return o(t,e),t.prototype.onLoad=function(){cc.debug.setDisplayStats(!1)},t.prototype.start=function(){var e=this;cc.director.preloadScene("game",function(t,i){if(i>0){var o=100*t/i;e.lblProgress.string=Math.round(o)+"%"}},function(t){t||(e.lblProgress.string="100%",cc.director.loadScene("game"))})},n([c(cc.Label)],t.prototype,"lblProgress",void 0),t=n([s],t)}(cc.Component);i.default=r,cc._RF.pop()},{}],MagicBottleView:[function(e,t,i){"use strict";cc._RF.push(t,"6046cRNdZxMEbkMCe3i9yQ4","MagicBottleView");var o=s(e("../core/data/Config")),n=e("../core/GameEvent"),a=s(e("../common/NotificationCenter"));function s(e){return e&&e.__esModule?e:{default:e}}cc.Class({extends:cc.Component,properties:{nodeFull:cc.Node,nodeNormal2:cc.Node,nodeBoxMove:cc.Node,aniNormal:cc.Animation,aniFull:cc.Animation,labCurrentMagic:cc.Label,labAddMagic:cc.Label,prefabAddMagic:cc.Prefab},onLoad:function(){this.currentMagic=0,this.addValue=0,this.labAddMagic.node.active=!1,this.labCurrentMagic.string="0",this.addLabDefaultPos=this.labAddMagic.node.position,this.hide(),this.aniFull.on("finished",function(e,t){},this),a.default.listen(n.GameEvent.MAGIC_BOTTLE_ADD,this.progressTo,this),a.default.listen(n.GameEvent.MAGIC_BOTTLE_FULL,this.bottleFull,this),a.default.listen(n.GameEvent.MAGIC_RESET_BOTTLE,this.reset,this)},init:function(e){this.game=e},start:function(){},onDestroy:function(){a.default.ignoreScope(this)},reset:function(){this.nodeNormal2.active=!0,this.nodeFull.active=!1,this.currentMagic=0,this.labCurrentMagic.string="0"},addMagic:function(e){this.game.model.config.isWhisper||this.game.model.config.mode==o.default.MODE_AI||(this.currentMagic+=e,this.currentMagic=this.currentMagic>o.default.MAX_MAGIC?o.default.MAX_MAGIC:this.currentMagic,this.addValue=e)},showAddMagicEffect:function(){var e=this,t=this.nodeNormal2.getComponent("els_view_magic_bottle");if(t&&t.progressTo(this.currentMagic),this.addValue>0){var i=cc.instantiate(this.prefabAddMagic);i.parent=this.node,i.position=this.labAddMagic.node.position,i.getComponent("els_view_add_magic").init(this.addValue,function(){e.labCurrentMagic.string=""+e.currentMagic})}},animationPause:function(){},hide:function(){this.nodeFull.active=!1,this.nodeNormal2.active=!1,this.nodeBoxMove.active=!1},progressTo:function(e){this.animationPause()},bottleFull:function(e){this.nodeNormal2.active=!1,this.nodeFull.active=!0,this.aniFull.play(),this.currentMagic=0,this.showBoxMove()},showBoxMove:function(){this.nodeBoxMove.active=!0;var e=this.node.getChildByName("EndPos").position,t=this;this.nodeBoxMove.runAction(cc.sequence(cc.spawn(cc.moveTo(.5,e),cc.scaleTo(.5,1)),cc.callFunc(function(){t.nodeBoxMove.active=!1,t.nodeBoxMove.position=cc.v2(0,0),t.nodeBoxMove.scale=.5,t.nodeFull.active=!1,t.nodeNormal2.active=!0})))}}),cc._RF.pop()},{"../common/NotificationCenter":"NotificationCenter","../core/GameEvent":"GameEvent","../core/data/Config":"Config"}],Msg:[function(e,t,i){"use strict";cc._RF.push(t,"21659kHSsdPHYvi5jx86qZZ","Msg"),Object.defineProperty(i,"__esModule",{value:!0});var o=e("../core/Profile"),n=e("../common/EventType"),a=e("./TCPClient"),s=e("../common/NotificationCenter"),c=e("../common/BlockQuest"),r=function(){function e(){}return e._sendCmd=function(e){e.params=e.params||{},e.params.userId=e.params.userId||c.default.UserInfo.userId,e.params.gameId=e.params.gameId||c.default.SystemInfo.gameId,e.params.version=e.params.version||c.default.SystemInfo.version,e.params.clientId=c.default.SystemInfo.clientId,e.params.intClientId=c.default.SystemInfo.intClientId,e.apiVersion=e.apiVersion||5,a.default.sendMsg(e)},e.bindUser=function(){var e={cmd:n.EventType.CMD_BIND_USER,params:{gameId:c.default.SystemInfo.appId,authorCode:c.default.UserInfo.authorCode}};this._sendCmd(e)},e.bindGame=function(e){var t={cmd:n.EventType.CMD_BIND_GAME,params:{gameId:e||c.default.SystemInfo.gameId,authorCode:c.default.UserInfo.authorCode}};this._sendCmd(t)},e.getUserInfo=function(){var e={cmd:n.EventType.CMD_USER_INFO,params:{gameId:c.default.SystemInfo.appId}};this._sendCmd(e)},e.hallInfo=function(){var e={cmd:n.EventType.CMD_HALL_INFO,params:{gameId:c.default.SystemInfo.appId}};this._sendCmd(e)},e.hallItem5=function(e,t,i){var o={cmd:n.EventType.CMD_ITEM,params:{action:"transform",sourceItemKindId:e||1014,targetItemKindId:t,amount:i,gameId:c.default.SystemInfo.appId}};this._sendCmd(o)},e.buyProduct=function(e,t,i){o.default.updateBag(o.default.info.bag,o.default.ITEM_TYPES.COIN,-i);var a={result:{action:"product",items:t==o.default.ITEM_TYPES.ITEM_BOX?{1017:1,1018:1,1019:1,1020:1}:JSON.parse('{"'+t+'": 1}')}};s.default.trigger(n.EventType.CMD_ITEM,a)},e.getBagInfo=function(e){void 0===e&&(e=[]);var t={result:{action:n.EventType.CMD_ACTION_GET_BAG,normalItems:o.default.info.bag,recvCount:e}};s.default.trigger(n.EventType.CMD_BLOCKQUEST,t)},e.getRewardInfo=function(){s.default.trigger(n.EventType.CMD_BLOCKQUEST,{result:{action:"reward_info",shareUsers:[],dailyReward:[{getCoin:10,desc:"1st Invite"},{getCoin:10,desc:"2nd Invite"}],oneRewardDiamond:10,getReward:2}})},e.addRewardDiamond=function(e,t){var i={cmd:n.EventType.CMD_BLOCKQUEST,params:{action:n.EventType.CMD_ACTION_ADD_DIAMOND,reason:e||3,friendUserId:t||0}};this._sendCmd(i)},e.enterGame=function(e){var t=!1;o.default.info.signDay<7&&(0==o.default.info.signDay?(t=!0,o.default.info.signDay+=1,o.default.info.signTime=c.default.timeFormat(),o.default.save()):o.default.info.signTime!=c.default.timeFormat()&&(t=!0,o.default.info.signDay+=1,o.default.info.signTime=c.default.timeFormat(),o.default.save()));var i={result:{action:n.EventType.CMD_ACTION_ENTER_GAME,loginReward:{day:o.default.info.signDay-1,get:t,conf:[{nday:0,rewards:{1019:1}},{nday:1,rewards:{1017:1}},{nday:2,rewards:{1018:1}},{nday:3,rewards:{1014:5}},{nday:4,rewards:{1014:10}},{nday:5,rewards:{1014:20}},{nday:6,rewards:{1014:50,1017:2,1019:5,1018:1}}]}}};s.default.trigger(n.EventType.CMD_BLOCKQUEST,i)},e.getNextAdreward=function(){var e={cmd:n.EventType.CMD_BLOCKQUEST,params:{action:n.EventType.CMD_ACTION_NEXT_ADREWARD}};this._sendCmd(e)},e.syncItems=function(e){var t={cmd:n.EventType.CMD_BLOCKQUEST,params:{action:n.EventType.CMD_ACTION_SYNC_ITEMS,items:e||[]}};this._sendCmd(t)},e.consumeItem=function(e,t){var i=void 0!==t?-t:-1;if(!o.default.addPropByKey(e,i))return!1;var a={result:{action:n.EventType.CMD_ACTION_CONSUME_ITEMS,status:1,item:{kindId:e,itemId:e,count:1}}};return s.default.trigger(n.EventType.CMD_BLOCKQUEST,a),!0},e.getRewardItems=function(){var e={cmd:n.EventType.CMD_BLOCKQUEST,params:{action:n.EventType.CMD_ACTION_REWARD_ITEMS}};this._sendCmd(e)},e.getItemId=function(e){return e[Math.floor(3*Math.random()+0)]},e.addItems=function(e,t,i,a){void 0===a&&(a=!0),i||(i=this.getItemId(a?[1017,1018,1020]:[1017,1018,1019]),o.default.addPropByKey(i,1));var c={result:{action:n.EventType.CMD_ACTION_ADD_ITEMS,status:1,reason:e,item:{kindId:i,itemId:i,count:1}}};return s.default.trigger(n.EventType.CMD_BLOCKQUEST,c),i},e.getStoreList=function(){s.default.trigger(n.EventType.CMD_STORE,{result:{action:"consume",products:[{kindId:1014,itemId:1014,displayName:"+500",price:.9},{kindId:1014,itemId:1015,displayName:"+10000",price:9},{kindId:201,itemId:201,displayName:"Lego skin",priceCoin:500},{kindId:202,itemId:202,displayName:"Crystal skin",priceCoin:500},{kindId:203,itemId:203,displayName:"Gem1 skin",priceCoin:500},{kindId:204,itemId:204,displayName:"Gem2 skin",priceCoin:500},{kindId:1017,itemId:1017,displayName:"Rocket",priceCoin:100},{kindId:1018,itemId:1018,displayName:"Hammer",priceCoin:100},{kindId:1019,itemId:1019,displayName:"Magic wand",priceCoin:100},{kindId:1020,itemId:1020,displayName:"Ice Boom",priceCoin:100},{kindId:101,itemId:101,displayName:"Items box",priceCoin:350},{kindId:1301,itemId:1301,displayName:"Candy",priceCoin:100},{kindId:1302,itemId:1302,displayName:"Kiss",priceCoin:100},{kindId:1303,itemId:1303,displayName:"Rose",priceCoin:100},{kindId:1304,itemId:1304,displayName:"Ring",priceCoin:100},{kindId:1305,itemId:1305,displayName:"Car",priceCoin:100},{kindId:1306,itemId:1306,displayName:"Rocket",priceCoin:100},{kindId:1307,itemId:1307,displayName:"Chocolate",priceCoin:100}],coin:{products:[2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17]},cash:{products:[0,1]},gift:{products:[]}}})},e.whisperStart=function(e,t,i){var o={cmd:n.EventType.CMD_BLOCKQUEST,params:{action:n.EventType.CMD_ACTION_WHISPER_START,whisperId:e||"",itemId:t||[],amount:i||1}};this._sendCmd(o)},e.whisperPass=function(e,t){var i={cmd:n.EventType.CMD_BLOCKQUEST,params:{action:n.EventType.CMD_ACTION_WHISPER_PASS,shareUserId:e||0,whisperId:t||""}};this._sendCmd(i)},e.whisperPassInfo=function(){var e={cmd:n.EventType.CMD_BLOCKQUEST,params:{action:n.EventType.CMD_ACTION_WHISPER_INFO}};this._sendCmd(e)},e.requestDailyLogin=function(){var e={result:{action:n.EventType.CMD_ACTION_DAILY_LOGIN,items:c.default.UserInfo.loginReward.conf[c.default.UserInfo.loginReward.day].rewards}};s.default.trigger(n.EventType.CMD_BLOCKQUEST,e)},e}();i.default=r,cc._RF.pop()},{"../common/BlockQuest":"BlockQuest","../common/EventType":"EventType","../common/NotificationCenter":"NotificationCenter","../core/Profile":"Profile","./TCPClient":"TCPClient"}],NotificationCenter:[function(e,t,i){"use strict";cc._RF.push(t,"bc553nHqJdMvZQV0WUQEz+N","NotificationCenter"),Object.defineProperty(i,"__esModule",{value:!0});var o=function(){function e(){}return e.listen=function(e,t,i){this.events[e]=this.events[e]||[],this.events[e].push({scope:i||this,handler:t})},e.ignore=function(e,t,i){i=i||this;var o=this.events[e];o&&(this.events[e]=o.filter(function(e){return e.scope!=i||e.handler!=t}))},e.ignoreScope=function(e){for(var t in this.events){var i=this.events[t];i&&(this.events[t]=i.filter(function(t){return t.scope!=e}))}},e.trigger=function(e,t){var i=this.events[e];if(i)for(var o,n=0;n<i.length;n++)(o=i[n]).handler.call(o.scope,t)},e.events={},e}();i.default=o,cc._RF.pop()},{}],Profile:[function(e,t,i){"use strict";cc._RF.push(t,"18facmimlVFZIvxn85R/2HT","Profile"),Object.defineProperty(i,"__esModule",{value:!0});var o,n,a;(function(e){e[e.ITEM_ID=0]="ITEM_ID",e[e.KIND_ID=1]="KIND_ID",e[e.COUNT=2]="COUNT"})(o||(o={})),function(e){e[e.FULL_BOTTLE=6]="FULL_BOTTLE",e[e.UNLOCK_ITEM=7]="UNLOCK_ITEM"}(n||(n={})),function(e){e[e.COIN=1014]="COIN",e[e.COLLAPSE_HAMMER=1018]="COLLAPSE_HAMMER",e[e.FILL_ROCKET=1017]="FILL_ROCKET",e[e.MAGIC_WAND=1019]="MAGIC_WAND",e[e.ICE_BOOM=1020]="ICE_BOOM",e[e.ITEM_BOX=101]="ITEM_BOX"}(a||(a={}));var s=function(){function e(){}return e.load=function(){var e=this,t=cc.sys.localStorage.getItem("bq");t?this.info=JSON.parse(t):this.save(),0==this.info.shareTimeStamp&&(this.info.shareTimeStamp=this.currentTimeMillis()),this.info.bag.some(function(t){var i=e.getKindId(t);if(e.isCoin(i))return e.info.coin=e.getCount(t),!0}),this.info.bag=this.info.bag.sort(function(t,i){return e.getKindId(i)-e.getKindId(t)})},e.save=function(){cc.sys.localStorage.setItem("bq",JSON.stringify(this.info))},e.getIsMusicMute=function(){return this.info.isMute},e.setIsMusicMute=function(e){this.info.isMute=e,this.save()},e.switchMusicMute=function(){this.setIsMusicMute(!this.info.isMute)},e.setShareTimeStamp=function(){this.info.shareTimeStamp=this.currentTimeMillis(),this.save()},e.getLastShareTimeStamp=function(){return this.info.shareTimeStamp},e.currentTimeMillis=function(){return(new Date).getTime()},e.getKindId=function(e){return e[o.KIND_ID]},e.getCount=function(e){return e[o.COUNT]},e.isCoin=function(e){return e==a.COIN},e.itemIsKind=function(e,t){return e[o.KIND_ID]==t},e.updateCount=function(e,t){return e[o.COUNT]+t>=0?(e[o.COUNT]+=t,!0):(e[o.COUNT]=0,!1)},e.updateBag=function(e,t,i){var o=this,n=!0;return e.some(function(e){if(o.itemIsKind(e,t))return n=o.updateCount(e,i),o.isCoin(t)&&(o.info.coin=o.getCount(e)),!0})?n:i>0&&(e.push([t,t,i]),this.isCoin(t)&&(this.info.coin=i),!0)},e.addPropByKey=function(e,t){void 0===t&&(t=1);var i=this.updateBag(this.info.bag,e,t);return this.save(),i},e.getPropByKey=function(e){var t=this,i=0;return this.info.bag.some(function(o){if(t.getKindId(o)==e)return i=t.getCount(o),!0}),i},e.isSkin=function(e){return 300>e&&e>200},e.isCurrentSkin=function(e){return this.info.defaultSkin==e},e.saveSkin=function(e){this.info.defaultSkin=e,this.save()},e.ITEM_POS=o,e.ADD_TYPES=n,e.ITEM_TYPES=a,e.info={classic:!0,isMute:!1,shareTimeStamp:0,defaultSkin:205,bag:[[205,205,1]],coin:0,signTime:"",signDay:0,help1st:0,stage2:0,score:0,endlessLevel:"1-0",pkstar:0,pkLevel:0,pkCount:0},e}();i.default=s,cc._RF.pop()},{}],PropagateInterface:[function(e,t,i){"use strict";cc._RF.push(t,"d3239KuAI9CBbaUWZK9iL+t","PropagateInterface"),Object.defineProperty(i,"__esModule",{value:!0});var o=e("../common/BlockQuest"),n=e("../common/EventType"),a=e("./HttpUtil"),s=e("../common/NotificationCenter"),c=function(){function e(){}return e.getShareConfigInfo=function(e){"object"!=typeof e&&(e={});var t=(new Date).getTime();e.act="api.getShareConfig",e.time=t,e.game_mark=o.default.SystemInfo.cloudId+"-"+o.default.SystemInfo.gameId;var i=this.getConfigSignStr(e),c=[];for(var r in e)c.push(r+"="+e[r]);c.push("sign="+i);var l=o.default.SystemInfo.shareManagerUrl+"?"+c.join("&");a.default.httpGet({url:l},function(e){for(var t in e.retmsg)this.ShareConfig[t]=e.retmsg[t];s.default.trigger(n.EventType.GET_SHARE_CONFIG_SUCCESS,e)},function(e){s.default.trigger(n.EventType.GET_SHARE_CONFIG_FAIL,e)})},e.getShareConfigInfoAutoWeight=function(){void 0==this._cachedShareConfig?this._pendingFlag=!0:s.default.trigger(n.EventType.GET_SHARE_CONFIG_SUCCESS,this._shuffleByWeights())},e._shuffleByWeights=function(){var e={};for(var t in this._cachedShareConfig)if("shareExt"!=t){var i=this._cachedShareConfig[t];if(0==i.length)e[t]={};else if(1==i.length)e[t]=i[0];else for(var o=i.reduce(function(e,t){return e+t.weight},0),n=Math.random()*o,a=0;a<i.length;a++)if((n-=i[a].weight)<=0){e[t]=i[a];break}}return e},e.getConfigSignStr=function(e){},e.ShareConfig={},e._cachedShareConfig=void 0,e._pendingFlag=!1,e}();i.default=c,cc._RF.pop()},{"../common/BlockQuest":"BlockQuest","../common/EventType":"EventType","../common/NotificationCenter":"NotificationCenter","./HttpUtil":"HttpUtil"}],ReadyGo:[function(e,t,i){"use strict";cc._RF.push(t,"47d18Hqdj9JZabmfBD9U8tP","ReadyGo");var o=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function o(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),n=this&&this.__decorate||function(e,t,i,o){var n,a=arguments.length,s=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,o);else for(var c=e.length-1;c>=0;c--)(n=e[c])&&(s=(a<3?n(s):a>3?n(t,i,s):n(t,i))||s);return a>3&&s&&Object.defineProperty(t,i,s),s};Object.defineProperty(i,"__esModule",{value:!0});var a=cc._decorator,s=a.ccclass,c=a.property,r=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.spriteFrames=[],t.currentIndex=0,t.finishCallback=null,t}return o(t,e),t.prototype.start=function(){},t.prototype.onEnable=function(){this.node.scale=0,this.node.opacity=0,this.currentIndex=0},t.prototype.playCountdown=function(e){this.finishCallback=e,this.schedule(this.countdownAction.bind(this),1,this.spriteFrames.length-1)},t.prototype.countdownAction=function(){var e=this;this.currentIndex>=this.spriteFrames.length&&(this.currentIndex=0),this.node.getComponent(cc.Sprite).spriteFrame=this.spriteFrames[this.currentIndex++],this.node.opacity=255,this.node.scale=6,this.node.runAction(cc.sequence(cc.scaleTo(.15,1,1),cc.delayTime(.5),cc.spawn(cc.scaleTo(.25,1.5,1.5),cc.fadeOut(.25)),cc.callFunc(function(){e.finishCallback&&e.currentIndex>=e.spriteFrames.length&&e.finishCallback()})))},n([c([cc.SpriteFrame])],t.prototype,"spriteFrames",void 0),t=n([s],t)}(cc.Component);i.default=r,cc._RF.pop()},{}],Receiver:[function(e,t,i){"use strict";cc._RF.push(t,"bc730YUCcRMdqDWDoi6aLFS","Receiver"),Object.defineProperty(i,"__esModule",{value:!0});var o=e("../core/GameEvent"),n=e("../core/Profile"),a=e("./Msg"),s=e("../common/EventType"),c=e("../common/NotificationCenter"),r=e("../common/BlockQuest"),l=e("../util/Toast"),d=e("./Data");(function(){function e(){}return e.init=function(){c.default.listen(s.EventType.TCP_OPENED,this._onMsgTcpOpen,this),c.default.listen(s.EventType.TCP_ERROR,this._onMsgTCPErr,this),c.default.listen(s.EventType.TCP_CLOSE,this._onMsgTCPErr,this),c.default.listen(s.EventType.CMD_UPDATE_NOTIFY,this._onMsgUpdateNotify,this),c.default.listen(s.EventType.TCP_RECEIVE,this._onMsgServerMessage,this),this.register(s.EventType.CMD_USER_INFO,this._onMsgUserInfo),this.register(s.EventType.CMD_GAME_DATA,this._onMsgGameData),this.register(s.EventType.CMD_USER_INFO,this._onMsgUserInfo),this.register(s.EventType.CMD_ITEM,this._onMsgItem),this.register(s.EventType.CMD_BLOCKQUEST,this._onMsgBlockQuest),this.register(s.EventType.CMD_STORE,this._onMsgStore)},e.onDestroy=function(){c.default.ignoreScope(this)},e.register=function(e,t){c.default.listen(e,t,this)},e._onMsgTcpOpen=function(){a.default.bindUser()},e._onMsgTCPErr=function(){console.log("Link broken....")},e._onMsgServerMessage=function(e){var t=(e=e||{}).cmd;if(t){var i=this._map[t];"function"==typeof i&&(i.call(this,e),console.log("_onMsgServerMessage::",JSON.stringify(e))),c.default.trigger(t,e)}},e._onMsgUserInfo=function(e){console.log("_onMsgUserInfo",JSON.stringify(e)),a.default.bindGame(r.default.SystemInfo.gameId)},e._onMsgGameData=function(e){if(console.log("_onMsgGameData",JSON.stringify(e)),d.default.StoreList||a.default.getStoreList(),a.default.hallInfo(),a.default.getBagInfo(),a.default.enterGame(r.default.UserInfo.invite_id),r.default.UserInfo.user_add_item>0&&(a.default.addItems(6,0,r.default.UserInfo.user_add_item),r.default.UserInfo.user_add_item=-1),r.default.UserInfo.select_gift_item){var t=r.default.UserInfo.select_gift_item?r.default.UserInfo.select_gift_item.content.items[0].itemId.substr(-4):"",i=r.default.UserInfo.select_gift_item.uuid;a.default.whisperStart(i,t,1),r.default.UserInfo.select_gift_item=void 0}r.default.UserInfo.showQuery&&c.default.trigger(s.EventType.SECRET_LANGUAGE_TO_GAME,r.default.UserInfo.showQuery)},e._onMsgHallInfo=function(e){console.log("_onMsgHallInfo",JSON.stringify(e))},e._onMsgItem=function(e){if("product"==e.result.action){if(e.error&&e.error.info)return void l.default.show("Buy item is failed",2e3);a.default.getBagInfo(e.result.items),l.default.show("Buy item successful",2e3)}},e._onMsgUpdateNotify=function(e){for(var t=e.result.changes||[],i=0;i<t.length;i++)"udata"==t[i]?a.default.getUserInfo():"item"==t[i]?a.default.getBagInfo():"redpoint5"==t[i]&&(a.default.getUserInfo(),a.default.getBagInfo())},e._onMsgStore=function(e){if("consume"==e.result.action){var t=[],i=[],n=[],a=e.result,s=a.coin.products||[],r=a.cash.products||[],l=a.gift.products||[],u=a.products,f=[];s.forEach(function(e){t.push(u[e]),f.push(u[e])}),r.forEach(function(e){i.push(u[e]),f.push(u[e])}),l.forEach(function(e){n.push(u[e]),f.push(u[e])}),d.default.StoreList={coin:t,gift:n,cash:i,items:f},c.default.trigger(o.GameEvent.UPDATE_BAG,f)}},e._onMsgBlockQuest=function(e){if(e.result.action!=s.EventType.CMD_ACTION_REWARD_INFO)if(e.result.action!=s.EventType.CMD_ACTION_CONSUME_ITEMS)if(e.result.action!=s.EventType.CMD_ACTION_ADD_ITEMS){if(e.result.action!=s.EventType.CMD_ACTION_ADD_DIAMOND){if(e.result.action==s.EventType.CMD_ACTION_ENTER_GAME)return r.default.UserInfo.whisperResult=e.result.whisperResult,r.default.UserInfo.loginReward=e.result.loginReward,void(r.default.UserInfo.openId=e.result.openId);if(e.result.action==s.EventType.CMD_ACTION_DAILY_LOGIN)return a.default.getBagInfo(e.result.items),void c.default.trigger(o.GameEvent.DAILY_LOGIN_GIFT_SUCCESS,e);if(e.result.action==s.EventType.CMD_ACTION_GET_BAG){var t=[];for(var i in e.result.normalItems.forEach(function(e){var i=n.default.getKindId(e),o=n.default.getCount(e);n.default.isCoin(i)&&(n.default.info.coin=o),t.push([i,i,o])}),e.result.recvCount){var l=parseInt(i),d=e.result.recvCount[i];n.default.updateBag(t,l,d)}n.default.info.bag=t.sort(function(e,t){return n.default.getKindId(t)-n.default.getKindId(e)}),n.default.save(),c.default.trigger(o.GameEvent.UPDATE_BAG,t)}}}else 1==e.result.status&&c.default.trigger(o.GameEvent.ADD_ITEM_SUCCESS,e);else 1==e.result.status&&c.default.trigger(o.GameEvent.CONSUME_ITEM_SUCCESS,e);else c.default.trigger(o.GameEvent.REWARD_INFO,e)},e._map={},e})().init(),cc._RF.pop()},{"../common/BlockQuest":"BlockQuest","../common/EventType":"EventType","../common/NotificationCenter":"NotificationCenter","../core/GameEvent":"GameEvent","../core/Profile":"Profile","../util/Toast":"Toast","./Data":"Data","./Msg":"Msg"}],Sdkbox:[function(e,t,i){"use strict";cc._RF.push(t,"538b6Ufu9tERIKr0EgkS8h+","Sdkbox"),Object.defineProperty(i,"__esModule",{value:!0});var o=function(){function e(){}return e.checkSdkbox=function(){return"undefined"==typeof sdkbox?(console.log("sdkbox is undefined"),!1):void 0!==sdkbox.PluginFacebook||(console.log("sdkbox.PluginFacebook is undefined"),!1)},e}();i.default=o,cc._RF.pop()},{}],ShareInterface:[function(e,t,i){"use strict";cc._RF.push(t,"bab63yPvOtGl591m9PExsEv","ShareInterface"),Object.defineProperty(i,"__esModule",{value:!0});var o=e("../core/data/Config"),n=e("./PropagateInterface"),a=e("../thirdparty/Facebook"),s=function(){function e(){}return e.setOnShareAppMessageInfo=function(e,t,i,o){this.OnShareAppMessageInfo={title:e,imageUrl:t,sharePointId:i,shareSchemeId:o}},e.getOnShareAppMessageInfo=function(){return this.OnShareAppMessageInfo},e.getRandomOnShareAppMessageInfo=function(){var e=[];for(var t in n.default._cachedShareConfig)e.push(t);if(e&&e.length>0){var i=Math.floor(1e4*Math.random())%e.length,o=e[i],a=n.default._cachedShareConfig[o];if(a&&a.length>0)return{title:a[i=Math.floor(1e4*Math.random())%a.length].shareContent,imageUrl:a[i].sharePicUrl,sharePointId:a[i].sharePointId,shareSchemeId:a[i].shareSchemeId}}return null},e.shareMsg=function(e){if(o.default.isDebug)e.successCallback&&e.successCallback();else if(e.type!=o.default.SHARE_TYPE.GAME_VS_WIN){if(e.type==o.default.SHARE_TYPE.UNLOCK_GIFT||e.type==o.default.SHARE_TYPE.SHARE_REVIVE||e.type==o.default.SHARE_TYPE.GAME_KEEP_STAR||e.type==o.default.SHARE_TYPE.GAME_SHARE_DEL5||e.type==o.default.SHARE_TYPE.GAME_SHARE_ADD5){var t=new Object;return t.type="link",t.link="https://www.cocos.com/",t.title="Block Quest",t.text="Block Quest Magic",t.image="https://hiepsibaotap.com/wp-content/uploads/2018/07/into-the-breach-review-intothebreach.jpg",void a.default.share(t,function(t){t?e.successCallback&&e.successCallback():e.failCallback&&e.failCallback()})}var i=void 0;if(n.default.ShareConfig.hasOwnProperty(e.type)){i=n.default.ShareConfig[e.type];var s=Math.floor(1e4*Math.random())%i.length;i[s].shareContent,i[s].sharePicUrl,i[s].sharePointId,i[s].shareSchemeId}else e.failCallback&&e.failCallback()}},e.OnShareAppMessageInfo=null,e}();i.default=s,cc._RF.pop()},{"../core/data/Config":"Config","../thirdparty/Facebook":"Facebook","./PropagateInterface":"PropagateInterface"}],StarControl:[function(e,t,i){"use strict";cc._RF.push(t,"571bcSQdOJOR61P3fSkz2uP","StarControl"),Object.defineProperty(i,"__esModule",{value:!0});var o=function(){function e(){}return e.init=function(){var e=this;this.nodePool=new cc.NodePool,this.curNodeArray=[],this.isAniPlay=!1,this.prefabStar=null,cc.resources.load("prefab/starnode",function(t,i){if(t)console.log(t);else{for(var o=10;o>=0;--o){var n=cc.instantiate(i);e.nodePool.put(n)}e.prefabStar=i}})},e.createStars=function(e,t,i,o){if(e&&!(e.getChildrenCount()>0)&&t&&!(t>1e3)&&(i||(i=0),0!=this.nodePool.size())){this.isAniPlay=!1,this.clearNodes(),this.getNum=i;for(var n=0==o?10:78,a=(t-.5)*(n+14),s=0;s<t;s++){var c=this.nodePool.get();c.getComponent("star").init(o,i>s?1:0),c.setPosition(cc.v2(.5*-a+s*(n+14),0)),this.curNodeArray.push(c),e.addChild(c)}}},e.playAddStarAni=function(){this.isAniPlay||0==this.curNodeArray.length||(this.getNum<=0||(this.isAniPlay=!0,this.curNodeArray[this.getNum-1].getComponent("star").playAniAdd()))},e.playDelStarAni=function(){if(!(this.isAniPlay||0==this.curNodeArray.length||this.getNum>=this.curNodeArray.length)){this.isAniPlay=!0;var e=this.curNodeArray[this.getNum];if(e)e.getComponent("star").playAnidel()}},e.clearNodes=function(){for(this.getNum=-1,this.isAniPlay=!1;this.curNodeArray.length>0;){var e=this.curNodeArray.shift();e.removeFromParent(),this.nodePool.put(e)}},e}();i.default=o,cc._RF.pop()},{}],TCPClient:[function(e,t,i){"use strict";cc._RF.push(t,"9666atk8LZCRK1eYz2QtKTd","TCPClient"),Object.defineProperty(i,"__esModule",{value:!0});var o=e("./Timer"),n=e("./Msg"),a=e("../common/EventType"),s=e("./Bilog"),c=e("./EncodeDecode"),r=e("../common/NotificationCenter"),l=e("../common/BlockQuest"),d=function(){function e(){}return e.timerSchedule=function(){this.tickCount=(this.tickCount+1)%3,2==this.tickCount&&this.connectStatus==this.CONNECT_STATUS_OK&&(this.updateHeartBeat(),r.default.trigger(a.EventType.SEND_HEART_BEAT)),this.reconnect()},e.updateHeartBeat=function(){var e={cmd:"heart_beat",params:{action:"heartbeat",deviceId:l.default.SystemInfo.uuid,userId:l.default.UserInfo.userId,gameId:l.default.SystemInfo.appId,clientId:l.default.SystemInfo.clientId}};console.log("updateHeartBeat .. "),n.default._sendCmd(e)},e.startCheckTimer=function(){this.isTimerInited=!0,o.default.setTimer(cc.director.getScene(),this.timerSchedule,1)},e.stopCheckTimer=function(){this.isTimerInited=!1,o.default.cancelTimer(cc.director.getScene(),this.timerSchedule)},e.connect=function(e){s.default.clickStat(s.default.clickEvent.TCPStart,[e]),this.connectStatus!=this.CONNECT_STATUS_OPENING&&this.connectStatus!=this.CONNECT_STATUS_OK&&(this.connectStatus=this.CONNECT_STATUS_OPENING)},e.decodeMessage=function(e){if("undefined"!=typeof ArrayBuffer&&e instanceof ArrayBuffer){for(var t=new Uint8Array(e),i="",o=0,n=t.length;o<n;o++){i+=String.fromCharCode(t[o])}return i}for(var a=c.default.base64Decode(e),s=a.slice(0,4),r=0,l=(a=a.slice(4)).length;r<l;r++){var d=a[r];d^=s[r%4],a[r]=d}return c.default.utf8Decode(a)},e.reconnect=function(){l.default.StateInfo.isOnForeground&&(this.connectStatus!=this.CONNECT_STATUS_FAIL&&this.connectStatus!=this.CONNECT_STATUS_CLOSING||(r.default.trigger(a.EventType.TCP_RECONNECT),this.connect(l.default.SystemInfo.webSocketUrl)))},e.sendMsg=function(e){if(this.connectStatus==this.CONNECT_STATUS_OK){var t=JSON.stringify(e);-1==this.filterCmds.indexOf(e.cmd)&&console.log(this.TAG,"TCP sendMsg:"+t)}},e.close=function(){this.connectStatus=this.CONNECT_STATUS_CLOSING,this.stopCheckTimer()},e.TAG="TCP client",e.CONNECT_STATUS_OK=1,e.CONNECT_STATUS_OPENING=2,e.CONNECT_STATUS_CLOSING=3,e.CONNECT_STATUS_FAIL=0,e.connectStatus=0,e.isTimerInited=!1,e.tickCount=0,e.filterCmds=["heart_beat"],e.MaxErrCount=5,e}();i.default=d,cc._RF.pop()},{"../common/BlockQuest":"BlockQuest","../common/EventType":"EventType","../common/NotificationCenter":"NotificationCenter","./Bilog":"Bilog","./EncodeDecode":"EncodeDecode","./Msg":"Msg","./Timer":"Timer"}],TextureRenderUtils:[function(e,t,i){"use strict";cc._RF.push(t,"e28aaMO3cdHyY1Vi4fL7NPl","TextureRenderUtils");var o=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function o(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),n=this&&this.__decorate||function(e,t,i,o){var n,a=arguments.length,s=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,o);else for(var c=e.length-1;c>=0;c--)(n=e[c])&&(s=(a<3?n(s):a>3?n(t,i,s):n(t,i))||s);return a>3&&s&&Object.defineProperty(t,i,s),s};Object.defineProperty(i,"__esModule",{value:!0});var a=cc._decorator,s=a.ccclass,c=a.property,r=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.camera=null,t}return o(t,e),t.prototype.init=function(){var e=new cc.RenderTexture;e.initWithSize(cc.visibleRect.width,cc.visibleRect.height,cc.RenderTexture.DepthStencilFormat.RB_FMT_D16),this.camera.targetTexture=e,this.texture=e},t.prototype.createImg=function(){var e=this._canvas.toDataURL("image/png"),t=document.createElement("img");return t.src=e,t},t.prototype.createCanvas=function(){var e=this.texture.width,t=this.texture.height;this._canvas?this.clearCanvas():(this._canvas=document.createElement("canvas"),this._canvas.width=e,this._canvas.height=t);var i=this._canvas.getContext("2d");this.camera.render();for(var o=this.texture.readPixels(),n=4*e,a=0;a<t;a++){for(var s=t-1-a,c=i.createImageData(e,1),r=s*e*4,l=0;l<n;l++)c.data[l]=o[r+l];i.putImageData(c,0,a)}return this._canvas},t.prototype.showImage=function(e){var t=new cc.Texture2D;t.initWithElement(e);var i=new cc.SpriteFrame;i.setTexture(t);var o=new cc.Node;o.addComponent(cc.Sprite).spriteFrame=i,o.zIndex=cc.macro.MAX_ZINDEX,o.parent=cc.director.getScene();var n=cc.winSize.width,a=cc.winSize.height;o.x=n/2,o.y=a/2,o.on(cc.Node.EventType.TOUCH_START,function(){o.parent=null,o.destroy()}),this.captureAction(o,n,a)},t.prototype.captureAction=function(e,t,i){var o=cc.scaleTo(1,.3),n=cc.v2(t-t/6,i/4),a=cc.moveTo(1,n),s=cc.spawn(o,a);e.runAction(s);var c=cc.blink(.1,1);this.node.runAction(c)},t.prototype.clearCanvas=function(){this._canvas.getContext("2d").clearRect(0,0,this._canvas.width,this._canvas.height)},n([c(cc.Camera)],t.prototype,"camera",void 0),t=n([s],t)}(cc.Component);i.default=r,cc._RF.pop()},{}],Timer:[function(e,t,i){"use strict";cc._RF.push(t,"7c086HhFS5EfZ6KU1YgzVgB","Timer"),Object.defineProperty(i,"__esModule",{value:!0});var o=e("./BlockQuest"),n=function(){function e(){}return e.setTimer=function(e,t,i,n,a){e&&e._TAG&&o.default.LOGD("Timer","----------in setTimer----------"+(e._TAG?e._TAG:""));null!=n||cc.macro.REPEAT_FOREVER;cc.director.getScheduler().schedule(t,e,i,n,a,!1)},e.cancelTimer=function(e,t){e&&e._TAG&&o.default.LOGD("Timer","----------in cancelTimer ---------"+(e._TAG?e._TAG:"")),cc.director.getScheduler().unschedule(t,e)},e.isScheduledTimer=function(e,t){return e&&e._TAG&&o.default.LOGD("Timer","----------in isScheduledTimer ---------"+(e._TAG?e._TAG:"")),cc.director.getScheduler().isScheduled(t,e)},e}();i.default=n,cc._RF.pop()},{"./BlockQuest":"BlockQuest"}],Toast:[function(e,t,i){"use strict";cc._RF.push(t,"95bafItMGJGHICE5HkZbMry","Toast"),Object.defineProperty(i,"__esModule",{value:!0});var o=function(){function e(){}return e.show=function(e,t){cc.resources.load("prefab/toast",function(t,i){if(t)console.log(t);else{var o=cc.director.getScene(),n=cc.instantiate(i);n.x=cc.winSize.width/2,n.y=0,n.parent=o,cc.find("text",n).getComponent(cc.Label).string=e,n.runAction(cc.sequence(cc.moveBy(.2,0,150),cc.moveBy(1,0,0),cc.callFunc(function(){n.runAction(cc.fadeOut(1.2),cc.callFunc(function(){n.destroy()}))})))}})},e}();i.default=o,cc._RF.pop()},{}],UiManager:[function(e,t,i){"use strict";cc._RF.push(t,"298fbCD1E9FOqHTJlGkoG9/","UiManager"),Object.defineProperty(i,"__esModule",{value:!0});var o=function(){function e(){}return e.init=function(e){this.game=e},e.registerUI=function(e,t,i){this._container[e]=this._container[e]||[],this._container[e]={node:t,jsName:i}},e.getUI=function(e){return this._container[e]},e.showUI=function(e,t,i,o){1==o&&this.popCurrentUI();var n=this._container[e];if(n&&n.node){this._curLayer=n.node;var a=n.node;if(a.active=!0,n.jsName){var s=a.getComponent(n.jsName);s&&s.showMe&&s.showMe(t)}"boolean"==typeof i&&0!=i&&this._doAction(a),this.pushCurrentUI(a)}else console.log("error:  "+e+"  not in ui manager")},e._doAction=function(e){e&&(e.setScale(0),e.runAction(cc.sequence(cc.scaleTo(.2,1.1,1.1),cc.scaleTo(.1,1,1))))},e.hideUI=function(e){var t=this._container[e];if(t&&t.node){var i=t.node;i.active=!1;var o=i.getComponent(t.jsName);o&&o.hideMe&&o.hideMe(),this.popCurrentUI()}},e.getCurrentUI=function(){if(this.uiStack.length>0)return this.uiStack[this.uiStack.length-1]},e.pushCurrentUI=function(e){e&&this.uiStack.push(e)},e.popCurrentUI=function(){this.uiStack.length>0&&this.uiStack.pop()},e.hideAllUI=function(){for(;this.uiStack.length>0;){var e=this.uiStack.pop();e&&(e.active=!1)}},e._container={},e.uiStack=[],e}();i.default=o,cc._RF.pop()},{}],Util:[function(e,t,i){"use strict";cc._RF.push(t,"64404Vqd7pMlrnqpSS9ZcD6","Util"),Object.defineProperty(i,"__esModule",{value:!0});var o=function(){function e(){}return e.createUUID=function(){for(var e=[],t=0;t<36;t++)e[t]="0123456789abcdef".substr(Math.floor(16*Math.random()),1);return e[14]="4",e[19]="0123456789abcdef".substr(3&e[19]|8,1),e[8]=e[13]=e[18]=e[23]="",e.join("")},e.checkLocalUUID=function(){return""!=this.getItemFromLocalStorage("LOCAL_UUID_KEY","")},e.getLocalUUID=function(){if(this.UUID)return this.UUID;var e=this.getItemFromLocalStorage("LOCAL_UUID_KEY","");return e||(e=this.createUUID(),this.setItemToLocalStorage("LOCAL_UUID_KEY",e)),this.UUID=e,this.UUID},e.getItemFromLocalStorage=function(e,t){var i=cc.sys.localStorage.getItem(e);return i||t},e.setItemToLocalStorage=function(e,t){cc.sys.localStorage.setItem(e,t+"")},e}();i.default=o,cc._RF.pop()},{}],WisperStartAnimation:[function(e,t,i){"use strict";cc._RF.push(t,"14a62EzwjNA5ojqqH8ED9ic","WisperStartAnimation"),cc.Class({extends:cc.Component,properties:{nodeContent:cc.Node,nodeHeard:cc.Node,labelContent:cc.Label,nodeStartTag:cc.Node},onLoad:function(){},start:function(){this.play()},init:function(e,t,i){this.labelContent.string=e,this.cb=t,this.move_star=i},play:function(){var e=this.nodeHeard.getComponent(cc.Animation),t=this.nodeContent.getComponent(cc.Animation),i=this;e.on("play",function(e,t){console.log("heart play",e,t)},this),e.on("finished",function(e,o){console.log("heart finished",e,o),i.nodeContent.active=!0,i.nodeHeard.active=!1,t.play()},this),t.on("play",function(e,t){console.log("content play",e,t)},this),t.on("finished",function(e,t){console.log("content finished",e,t),i.cb(),i.node.removeFromParent()},this);var o=this.move_star.parent.convertToWorldSpace(this.move_star.position),n=this.nodeStartTag.parent.convertToWorldSpace(this.nodeStartTag.position),a=cc.v2(n.x-o.x+50,n.y-o.y-375),s=this.move_star.position;this.move_star.runAction(cc.sequence(cc.moveBy(.2,a),cc.callFunc(function(){i.nodeHeard.active=!0,i.move_star.opacity=255,i.move_star.active=!1,e.play("tanshe02"),i.move_star.position=s})))}}),cc._RF.pop()},{}],diamond_award_cell:[function(e,t,i){"use strict";cc._RF.push(t,"d6476wHjntE5rcedcaPth8n","diamond_award_cell");var o=r(e("../../core/data/Config")),n=e("../../common/EventType"),a=r(e("../../common/Msg")),s=r(e("../../common/ShareInterface")),c=r(e("../../common/NotificationCenter"));function r(e){return e&&e.__esModule?e:{default:e}}cc.Class({extends:cc.Component,properties:{nickname:cc.Label,icon:cc.Sprite,button:cc.Button,rewardState:0,btn_Nodes:[cc.Node]},init:function(e){this.data=e,e.data&&(this.nickname.string="     +"+e.data.getCoin,e.data.url&&this.setImage(this.icon,e.data.url)),this.rewardState=e.state},onLoad:function(){for(var e=0;e<this.btn_Nodes.length;e++)this.btn_Nodes[e].active=!1;this.button.node.on("click",this.buttonClick,this),this.updateState()},buttonClick:function(){if(2!=this.rewardState){if(0==this.rewardState){if(!this.data)return void console.log("Data does not exist","userid");this.isListen||(c.default.listen(GameEvent.REWARD_INFO,this._MsgRewardInfo,this),this.isListen=!0),a.default.addRewardDiamond(2,this.data.data.userId)}1==this.rewardState&&s.default.shareMsg({type:o.default.SHARE_TYPE.HOME_REWARD})}},updateState:function(){for(var e=0;e<this.btn_Nodes.length;e++)e==this.rewardState?this.btn_Nodes[e].active=!0:this.btn_Nodes[e].active=!1},setImage:function(e,t){e.node.setContentSize(123,123),cc.assetManager.loadRemote(t,function(t,i){t||(e.node.getComponent(cc.Sprite).spriteFrame=new cc.SpriteFrame(i))})},_MsgRewardInfo:function(e){e.result.action==n.EventType.CMD_ACTION_ADD_DIAMOND&&1==e.result.status&&2==e.result.reason&&(this.rewardState=2,this.updateState())},onDestroy:function(){c.default.ignoreScope(this)}}),cc._RF.pop()},{"../../common/EventType":"EventType","../../common/Msg":"Msg","../../common/NotificationCenter":"NotificationCenter","../../common/ShareInterface":"ShareInterface","../../core/data/Config":"Config"}],diamond_cell:[function(e,t,i){"use strict";cc._RF.push(t,"238d7xw7i9Aap3R7Fz/BLtP","diamond_cell");var o=e("../../core/GameEvent"),n=e("../../common/EventType"),a=u(e("../../common/AdManager")),s=u(e("../../common/Msg")),c=u(e("../../common/NotificationCenter")),r=u(e("../UiManager")),l=u(e("../../common/BlockQuest")),d=u(e("../../common/IapSdk"));function u(e){return e&&e.__esModule?e:{default:e}}cc.Class({extends:cc.Component,properties:{count_label:cc.Label,price_label:cc.Label,free_tag:cc.Node},onDestroy:function(){c.default.ignoreScope(this)},init:function(e,t){return this.free_tag.active=!1,this.price_label.node.position=cc.v2(0,0),this.index=t,e?(this.data=e,this.price_label.string="$"+e.price,void(this.count_label.string=e.displayName)):(this.data=e,1==this.index?(this.price_label.string="Invite",void(this.count_label.string="+10")):(this.free_tag.active=!0,this.price_label.string="Free",this.count_label.string="+10",this.price_label.node.position=cc.v2(20,0),void(l.default.UserInfo.rewardInfo?this.count_label.string=l.default.UserInfo.rewardInfo.oneRewardDiamond:(c.default.listen(o.GameEvent.REWARD_INFO,this._MsgRewardInfo,this),s.default.getRewardInfo()))))},_MsgRewardInfo:function(e){e.result.action==n.EventType.CMD_ACTION_REWARD_INFO&&(l.default.UserInfo.rewardInfo=e.result,this.count_label&&(this.count_label.string="+"+e.result.oneRewardDiamond))},diamond_cell_btn_click:function(){if(this.data){if(cc.sys.os==cc.sys.OS_IOS)return void wx.showToast({title:'iOS can"t pay',duration:1e3});d.default.rechargeOrder({prodId:this.data.productId,prodName:this.data.displayName,prodCount:1,prodPrice:this.data.price,gameId:l.default.SystemInfo.gameId,chargeType:"wxapp.iap",appInfo:"",mustcharge:1})}else 0==this.index?a.default.showVidelAd():this.showAward()},showAward:function(){cc.resources.load("prefab/diamond_award/award",function(e,t){e||(cc.instantiate(t).parent=r.default.getCurrentUI())})}}),cc._RF.pop()},{"../../common/AdManager":"AdManager","../../common/BlockQuest":"BlockQuest","../../common/EventType":"EventType","../../common/IapSdk":"IapSdk","../../common/Msg":"Msg","../../common/NotificationCenter":"NotificationCenter","../../core/GameEvent":"GameEvent","../UiManager":"UiManager"}],els_gift_prop_view:[function(e,t,i){"use strict";cc._RF.push(t,"e49feEQuX1O5aCx0pZogEOE","els_gift_prop_view");var o=u(e("../core/data/Config")),n=e("../core/GameEvent"),a=u(e("../common/Msg")),s=u(e("../common/NotificationCenter")),c=u(e("../ui/UiManager")),r=u(e("../common/BlockQuest")),l=u(e("../common/ShareInterface")),d=u(e("../util/Toast"));function u(e){return e&&e.__esModule?e:{default:e}}cc.Class({extends:cc.Component,properties:{nodeGiftBox:cc.Node,nodeGiftProp:cc.Node,animGiftBox:cc.Animation,animGiftBoxRotate:cc.Animation,animGiftProp:cc.Animation,animGiftPropRotate:cc.Animation,nodePropDisplays:[cc.Node],nodeBtnClose:cc.Node,particlesInGiftBox:[cc.ParticleSystem],particlesInGiftProp:[cc.ParticleSystem],labelBtnShare:cc.Label},onLoad:function(){this.nodeGiftBox.active=!1,this.nodeGiftProp.active=!1,this.nodeBtnClose.active=!1,this.isTouchEnable=!0;var e=this;this.animGiftBox.on("finished",function(t,i){e.animGiftBoxRotate.play()},this),this.animGiftProp.on("finished",function(t,i){e.animGiftPropRotate.play()},this)},start:function(){},showParticlesInGiftBox:function(){this.particlesInGiftBox.forEach(function(e){e.resetSystem()})},hideParticlesInGiftBox:function(){this.particlesInGiftBox.forEach(function(e){e.stopSystem()})},showParticlesInGiftProp:function(){this.particlesInGiftProp.forEach(function(e){e.resetSystem()})},hideParticlesInGiftProp:function(){this.particlesInGiftProp.forEach(function(e){e.stopSystem()})},_locAddItem:function(e){this.hideGiftBox(),this.showGiftProp();var t=r.default.propServer2Local(e);this.nodePropDisplays.forEach(function(e,i){e.active=!1,i==t&&(e.active=!0)})},onDestroy:function(){s.default.ignoreScope(this)},init:function(e){this.game=e},showGiftBox:function(){this.labelBtnShare.string=o.default.CONFIG.openEmergency?"Share":"Open",this.isTouchEnable=!0,this.nodeGiftBox.active=!0,this.nodeBtnClose.active=!0,this.nodeGiftProp.active=!1,this.animGiftBox.play(),this.game.pauseGame(),this.game.model.playMusic(o.default.SOUND.BOX,!1),this.showParticlesInGiftBox()},hideGiftBox:function(){this.isTouchEnable=!1,this.nodeGiftBox.active=!1,this.animGiftBox.stop(),this.animGiftBoxRotate.stop(),this.hideParticlesInGiftBox()},showGiftProp:function(){this.nodeGiftProp.active=!0,this.animGiftProp.play(),this.showParticlesInGiftProp()},hideGiftProp:function(){this.nodeGiftProp.active=!1,this.animGiftProp.stop(),this.animGiftPropRotate.stop(),this.hideParticlesInGiftProp()},onBtnShareBox:function(){var e=this;if(this.isTouchEnable)if(this.isTouchEnable=!1,o.default.CONFIG.openEmergency)l.default.shareMsg({type:o.default.SHARE_TYPE.UNLOCK_GIFT,successCallback:function(){var t=c.default.game.model.config.isEndless,i=a.default.addItems(6,null,null,t);e._locAddItem(i)},failCallback:function(){d.default.show("Sharing failed",1e3),e.isTouchEnable=!0,e.onShareFailed()}});else{var t=c.default.game.model.config.isEndless,i=a.default.addItems(6,null,null,t);this._locAddItem(i)}},onShareFailed:function(){this.nodeBtnClose.active=!0},onBtnShareProp:function(){s.default.trigger(n.GameEvent.HIDE_GIFT,{}),this.node.active=!1,this.nodeBtnClose.active=!1},motaiCallback:function(){}}),cc._RF.pop()},{"../common/BlockQuest":"BlockQuest","../common/Msg":"Msg","../common/NotificationCenter":"NotificationCenter","../common/ShareInterface":"ShareInterface","../core/GameEvent":"GameEvent","../core/data/Config":"Config","../ui/UiManager":"UiManager","../util/Toast":"Toast"}],els_view_add_magic:[function(e,t,i){"use strict";cc._RF.push(t,"5540eRp3N1DCYGS7gtBoM1F","els_view_add_magic"),cc.Class({extends:cc.Component,properties:{labAddValue:cc.Label},start:function(){var e=this;this.node.runAction(cc.sequence(cc.spawn(cc.moveBy(.8,cc.v2(0,100)),cc.scaleBy(.8,1.5),cc.fadeOut(.8)),cc.callFunc(function(){e.ani_cb&&e.ani_cb()}),cc.removeSelf()))},init:function(e,t){this.labAddValue.string="+"+e,this.ani_cb=t}}),cc._RF.pop()},{}],els_view_block:[function(e,t,i){"use strict";cc._RF.push(t,"2d49e5iUGhIF5y1YApOWuL7","els_view_block"),cc.Class({extends:cc.Component,properties:{zhuBaoBlocks:[cc.Node],gemAnimations:[cc.Animation]},onLoad:function(){},start:function(){},showGemAnimationByIdx:function(e){this.hideAllZhuBaoAnimation(),this.zhuBaoBlocks[e].active=!0},hideAllZhuBaoAnimation:function(){this.zhuBaoBlocks.forEach(function(e){e.active=!1})}}),cc._RF.pop()},{}],els_view_daily_login_item:[function(e,t,i){"use strict";cc._RF.push(t,"dc8e8AZGTxFr69e48I+2Kbh","els_view_daily_login_item");var o=cc.Class({extends:cc.Component,properties:{prefabPropIcon:cc.Prefab,labelTitle:cc.Label,nodeContent:cc.Node,particleSys:cc.ParticleSystem,nodeMask:cc.Node,nodeGettedIcon:cc.Node},onLoad:function(){this.propDatas=null},start:function(){},init:function(e,t){this.labelTitle.string=e.day;var i=e.props;if(this.propDatas=e.props,1==i.length){var o=i[0],n=cc.instantiate(this.prefabPropIcon);n.parent=this.nodeContent;var a=-1==o.id?4:o.id;n.getComponent("els_view_daily_login_prop_icon").init({id:a,count:o.count})}else if(i.length>1){var s=cc.instantiate(this.prefabPropIcon);s.parent=this.nodeContent,s.getComponent("els_view_daily_login_prop_icon").init({id:-1,count:1})}else console.log("els_view_daily_login_item/propData","error");this.nodeMask.active=t,this.nodeGettedIcon.active=t},showWaitingGet:function(){this.particleSys.node.active=!0,this.particleSys.resetSystem()},showGetted:function(){this.particleSys.node.active=!0,this.particleSys.stopSystem(),this.nodeMask.active=!0,this.nodeGettedIcon.active=!0}});t.exports=o,cc._RF.pop()},{}],els_view_daily_login_prop_icon:[function(e,t,i){"use strict";cc._RF.push(t,"aaf5aUz0NhFtq394IqBhJhr","els_view_daily_login_prop_icon");var o=cc.Class({name:"PropDisplay",properties:{spriteFrame:cc.SpriteFrame,scale:1,rotate:0,serverId:1001,displayName:""}}),n=cc.Class({extends:cc.Component,properties:{spriteDisplay:cc.Sprite,nodeDisplay:cc.Node,labelName:cc.Label,lableCount:cc.Label,propDisplays:[o]},start:function(){},init:function(e){var t=this;this.propDisplays.some(function(i){if(i.serverId==e.id)return t.spriteDisplay.spriteFrame=i.spriteFrame,t.labelName.string=i.displayName,t.lableCount.string="+"+e.count,t.spriteDisplay.node.scale=i.scale,t.spriteDisplay.node.angle=-i.rotate,!0})}});t.exports=n,cc._RF.pop()},{}],els_view_daily_login:[function(e,t,i){"use strict";cc._RF.push(t,"ba2ecPFnolAHoEiHGSKckP5","els_view_daily_login");var o=e("../core/GameEvent"),n=c(e("../common/Msg")),a=c(e("../common/NotificationCenter")),s=c(e("../common/BlockQuest"));function c(e){return e&&e.__esModule?e:{default:e}}var r=cc.Class({name:"PropConfig",properties:{id:1014,count:5}}),l=cc.Class({name:"GiftConfig",properties:{day:"1st day",props:[r]}}),d=cc.Class({extends:cc.Component,properties:{prefabItem:cc.Prefab,nodeContent:cc.Node,giftConfigs:[l]},onLoad:function(){a.default.listen(o.GameEvent.DAILY_LOGIN_GIFT_SUCCESS,this.onGiftSuccess,this)},start:function(){},onDestroy:function(){a.default.ignoreScope(this)},loginServerId2String:function(e){return["1st day","2nd day","3rd day","4th day","5th day","6th day","7th day"][e]},init:function(){var e=this,t=s.default.UserInfo.loginReward.day,i=s.default.UserInfo.loginReward.get,o=s.default.UserInfo.loginReward.conf;this.getting_idx=t,this.giftConfigs=[],this.isGettedGift=!i,this.waitingGetItem=null,o.forEach(function(t){var i=new l;for(var o in i.day=e.loginServerId2String(t.nday),i.props=[],t.rewards){var n=new r;n.id=parseInt(o),n.count=t.rewards[o],i.props.push(n)}e.giftConfigs.push(i)}),this.giftConfigs.forEach(function(o,n){var a=cc.instantiate(e.prefabItem);a.parent=e.nodeContent,a.getComponent("els_view_daily_login_item").init(o,n<t),n==t&&(i?(a.getComponent("els_view_daily_login_item").showWaitingGet(),e.waitingGetItem=a):a.getComponent("els_view_daily_login_item").showGetted())})},btnGetClickCallback:function(){this.isGettedGift||this.giftConfigs[this.getting_idx]&&n.default.requestDailyLogin()},btnCloseClickCallback:function(){this.node.destroy()},onGiftSuccess:function(e){if(!e.error){s.default.UserInfo.loginReward.get=0,this.isGettedGift=!0,this.waitingGetItem&&this.waitingGetItem.getComponent("els_view_daily_login_item").showGetted();var t=new Map([[1014,"Coin"],[1017,"Rocket"],[1018,"Hammer"],[1019,"Magic wand"]]),i=e.result.items;if(i){var o="Congratulations on getting\r\n";for(var n in i){var a=parseInt(n);t.has(a)&&(o+=t.get(a)+" x"+i[n]+" ")}console.log(o)}}}});t.exports=d,cc._RF.pop()},{"../common/BlockQuest":"BlockQuest","../common/Msg":"Msg","../common/NotificationCenter":"NotificationCenter","../core/GameEvent":"GameEvent"}],els_view_magic_bottle:[function(e,t,i){"use strict";cc._RF.push(t,"e41e2qjmcVB5ZhRacloli8a","els_view_magic_bottle");var o=c(e("../core/data/Config")),n=e("../core/GameEvent"),a=c(e("../common/NotificationCenter")),s=c(e("../ui/UiManager"));function c(e){return e&&e.__esModule?e:{default:e}}cc.Class({extends:cc.Component,properties:{nodeProgressBar:cc.Node,nodeGiftBox:cc.Node},onLoad:function(){this.currentProgress=0,this.maxProgress=o.default.MAX_MAGIC,this.posStart=-72,this.posEnd=42,this.dis=this.posEnd-this.posStart,this.nodeProgressBar.position.y=this.posStart,this.progressTo(0)},start:function(){},setProgress:function(e){this.currentProgress=e>100?100:e,this.nodeGiftBox.opacity=parseInt(this.currentProgress/100*255)},progressTo:function(e){this.setProgress(e);var t=this.nodeProgressBar.position.y,i=this.posStart+e/this.maxProgress*this.dis;if(i-t>0){var o=this;this.nodeProgressBar.stopAllActions(),this.nodeProgressBar.runAction(cc.sequence(cc.moveTo(.2,cc.v2(0,i)),cc.callFunc(function(){o.isCallFull()&&(a.default.trigger(n.GameEvent.MAGIC_BOTTLE_FULL,o.currentProgress),o.progressTo(0))})))}else this.nodeProgressBar.position=cc.v2(0,parseInt(i)),this.isCallFull()&&(a.default.trigger(n.GameEvent.MAGIC_BOTTLE_FULL,this.currentProgress),this.progressTo(0))},isCallFull:function(){var e=this.currentProgress==this.maxProgress,t=0==s.default.game.model.begin_win_partical,i=s.default.game.model.config.isEndless&&s.default.game.isShowingEndlessLevelEnd,n=s.default.game.model.currentStatus==o.default.GAME_STATE.HOMEPAGE;return e&&!t&&!n&&!i}}),cc._RF.pop()},{"../common/NotificationCenter":"NotificationCenter","../core/GameEvent":"GameEvent","../core/data/Config":"Config","../ui/UiManager":"UiManager"}],els_view_prop_animation_display:[function(e,t,i){"use strict";cc._RF.push(t,"fbf6f/CG+FN26HBfPqSCl/K","els_view_prop_animation_display");var o=e("../core/GameEvent"),n=function(e){return e&&e.__esModule?e:{default:e}}(e("../common/NotificationCenter"));var a=new Map([[1301,0],[1302,3],[1303,2],[1304,1],[1305,4],[1306,5],[1307,6]]);cc.Class({extends:cc.Component,properties:{animationNodes:[cc.Node],nodeMoTai:cc.Node},onLoad:function(){n.default.listen(o.GameEvent.CLEAR_GIFT_ANIMATION,this.cleanSelf,this)},onDestroy:function(){n.default.ignoreScope(this)},cleanSelf:function(){this.node.destroyAllChildren(),this.node.removeAllChildren(),this.node.destroy()},init:function(e,t){if(a.has(e)){var i=a.get(e);this.hideAllAnimationNode();var o=this,n=0,s=cc.v2(0,0),c=!1,r=!1,l=null;switch(t){case 0:n=1,s=cc.v2(0,0),c=!1,r=!1,l=function(){o.node.destroy()};break;case 1:n=.5,s=cc.v2(0,-220),c=!1,r=!0,l=null;break;case 2:n=1,s=cc.v2(0,0),c=!0,r=!1}this.animationNodes[i].scale=n,this.animationNodes[i].position=s,this.nodeMoTai.active=c,this.animationNodes[i].active=!0;var d=this.animationNodes[i].getComponent(cc.Animation);d.on("finished",function(e,t){l&&l()},this),d.play().wrapMode=r?cc.WrapMode.Loop:cc.WrapMode.Normal}},motaiCallback:function(){this.node.destroy(),n.default.trigger(o.GameEvent.CLEAR_GIFT)},hideAllAnimationNode:function(){this.animationNodes.forEach(function(e){e.active=!1})}}),cc._RF.pop()},{"../common/NotificationCenter":"NotificationCenter","../core/GameEvent":"GameEvent"}],float_ani:[function(e,t,i){"use strict";cc._RF.push(t,"37443SttzFNHp6EmKprmUhU","float_ani"),cc.Class({extends:cc.Component,properties:{default_clip:cc.AnimationClip},onLoad:function(){var e=this.node.addComponent(cc.Animation);this.default_clip.name="float_ani",e.addClip(this.default_clip),setTimeout(function(){e.play("float_ani")},1e3*Math.random())}}),cc._RF.pop()},{}],gameAward:[function(e,t,i){"use strict";cc._RF.push(t,"73db6yU0OxE050gyEPj3/gf","gameAward");var o=e("../core/GameEvent"),n=l(e("../common/Msg")),a=e("../common/EventType"),s=l(e("../common/NotificationCenter")),c=l(e("../ui/UiManager")),r=l(e("../common/BlockQuest"));function l(e){return e&&e.__esModule?e:{default:e}}cc.Class({extends:cc.Component,properties:{page_view_prefab:cc.Prefab,page_view_node:cc.Node,page_view:cc.PageView,daily_reward_label:cc.Label,am_info_label:cc.Label,pm_info_label:cc.Label,reward_info_label:cc.Label,btn_content_nodes:[cc.Node],cell:cc.Prefab},onLoad:function(){this.button_state=0,this.node.getChildByName("back_btn").on("click",this.back_btn_click,this),s.default.listen(o.GameEvent.REWARD_INFO,this._MsgRewardInfo,this)},start:function(){n.default.getRewardInfo(),n.default.getNextAdreward()},onDestroy:function(){s.default.ignoreScope(this)},showWithData:function(e){var t=this;this.node.active=!0,this.update_page_view_data(e.shareUsers);var i=0;e.dailyReward.forEach(function(e,o){i+=e.getCoin,0==o?t.am_info_label.string=e.desc:1==o&&(t.pm_info_label.string=e.desc)}),this.daily_reward_label.string="Daily Reward\uff08"+i+"/2\uff09",this.reward_info_label.string="Reward\uff1a     +"+e.oneRewardDiamond,this.button_state=e.getReward,this.update_button_state()},update_button_state:function(){for(var e=0;e<this.btn_content_nodes.length;e++)e==this.button_state?this.btn_content_nodes[e].active=!0:this.btn_content_nodes[e].active=!1},update_page_view_data:function(e){for(var t=0;t<30;t++){var i=parseInt(t/6),o=e.length>t?2:1,n=void 0;2==o&&1==(n=e[t]).getCoin&&(o=0);var a=cc.instantiate(this.cell);a.getComponent("diamond_award_cell").init({state:o,data:n});var s=t%6>=3?-110:180,c=0;t%6%3==2?c=200:t%6%3==0&&(c=-200),a.position=cc.v2(c,s),a.parent=this.page_view.getPages()[i]}},right_btn_click:function(){4!=this.page_view.getCurrentPageIndex()&&this.page_view.setCurrentPageIndex(this.page_view.getCurrentPageIndex()+1)},left_btn_click:function(){0!=this.page_view.getCurrentPageIndex()&&this.page_view.setCurrentPageIndex(this.page_view.getCurrentPageIndex()-1)},award_btn_click:function(){1==this.button_state&&n.default.addRewardDiamond()},back_btn_click:function(){this.node.active=!1,this.node.removeFromParent(),this.node.destroyAllChildren(),this.node.destroy()},ad_btn_click:function(){this.showDaily()},showDaily:function(){cc.resources.load("prefab/els_view_daily_login",function(e,t){if(e)console.log(e);else{var i=cc.instantiate(t);i.getComponent("els_view_daily_login").init(),i.parent=c.default.getCurrentUI()}})},_MsgRewardInfo:function(e){if(e.result.action==a.EventType.CMD_ACTION_REWARD_INFO)return r.default.UserInfo.rewardInfo=e.result,void this.showWithData(e.result);e.result.action==a.EventType.CMD_ACTION_ADD_DIAMOND&&1==e.result.status&&3==e.result.reason&&(this.button_state=0,this.update_button_state())}}),cc._RF.pop()},{"../common/BlockQuest":"BlockQuest","../common/EventType":"EventType","../common/Msg":"Msg","../common/NotificationCenter":"NotificationCenter","../core/GameEvent":"GameEvent","../ui/UiManager":"UiManager"}],gameSinglemode:[function(e,t,i){"use strict";cc._RF.push(t,"ed2d0SklBpM3LG7EsJ4Hud3","gameSinglemode");var o=l(e("../core/data/Config")),n=e("../core/GameEvent"),a=l(e("../core/Profile")),s=l(e("../common/ShareInterface")),c=l(e("../common/NotificationCenter")),r=l(e("../ui/UiManager"));function l(e){return e&&e.__esModule?e:{default:e}}cc.Class({extends:cc.Component,properties:{gameNode:{default:null,type:cc.Node,displayName:"game common"},winline:cc.Node,lose_single:cc.Node,win_single:cc.Node,prefabMTAnima:cc.Prefab,nodeAdapterBgHome:cc.Node,nodeAdapterGame:cc.Node,prefabWisperStartAni:{default:null,type:cc.Prefab,displayName:"Whispering to start animation prefabs"},nodeWisperAniParent:{default:null,type:cc.Node,displayName:"Whisper to start animating the parent node"},btnRevive:cc.Node,nodeZhuBaoInfo:cc.Node,labelZhuBaoCounts:[cc.Label],labelBtnRevive:cc.Label},onLoad:function(){this.btnRevive.active=!1,this.gameview=this.gameNode.getComponent("game"),this.lose_single.getChildByName("sBackBtn").on(cc.Node.EventType.TOUCH_END,this.onLoseBackHandler,this),this.lose_single.getChildByName("sreGameBtn").on(cc.Node.EventType.TOUCH_END,this.onLoseRestartHandler,this),this.win_single.getChildByName("sNextBtn").on(cc.Node.EventType.TOUCH_END,this.onWinNextHandler,this),this.win_single.getChildByName("sShareBtn").on(cc.Node.EventType.TOUCH_END,this.onWinShareHandler,this),c.default.listen(n.GameEvent.REFRESH_GEM_COUNT,this.refreshGemInfo,this)},onDestroy:function(){c.default.ignoreScope(this)},start:function(){this.game=r.default.game,this.model=this.game.model,this.updateWinLine()},updateWinLine:function(){var e=r.default.game.model;if(e.config.isWhisper||e.config.isEndless)this.winline.active=!1;else{var t=e.getWinLine();this.winline.active=!0,this.winline.opacity=150,this.winline.position=cc.v2(103,50*t-434),e.getWinStep()}},showMe:function(){this.win_single.active=!1,this.lose_single.active=!1,this.updateWinLine(),this.nodeAdapterBgHome.active=!1,this.nodeAdapterGame.active=!0;var e=r.default.game.model;this.nodeZhuBaoInfo.active=e.config.isEndless,this.refreshGemInfo()},hideMe:function(){this.winline.active=!1},refreshGemInfo:function(e){var t=r.default.game.model;if(t.config.isEndless){var i=t.grid[0],o=i.core.gemCount,n=i.core.gemMax;this.labelZhuBaoCounts[0].string=o.get(112)+"/"+n.get(112),this.labelZhuBaoCounts[1].string=o.get(113)+"/"+n.get(113),this.labelZhuBaoCounts[2].string=o.get(114)+"/"+n.get(114)}},showWisperStart:function(e){this.game=r.default.game;var t=this.game.win_content.split("\n")[1][e],i=cc.instantiate(this.prefabWisperStartAni);i.getComponent("WisperStartAnimation").init(t,function(){},this.masks[this.game.cipherIndex]),i.parent=this.nodeWisperAniParent},showWin:function(){this.updateWinLine(),this.lose_single.active=!1,this.btnRevive.active=!1,this.game.model.config.mode==o.default.MODE_SINGLE&&1==this.game.model.config.isWhisper&&this.game.cipherIndex==this.game.cipherData.length||(this.win_single.active=!0)},showLose:function(){this.lose_single.active=!0,this.win_single.active=!1},showRevive:function(){this.showLose();var e=r.default.game.model.config.isEndless;e&&r.default.game.currentReviveTimes>=o.default.ENDLESS_VALUES.ReviveMaxTimes?this.btnRevive.active=!1:(this.btnRevive.active=o.default.CONFIG.openEmergency,o.default.CONFIG.openEmergency&&(this.labelBtnRevive.string=e?"Revive":"Revive +10 steps"))},mask_btn_click:function(){console.log("mask_btn_click"),this.game.hiden_mask(),this.masks[this.game.cipherIndex].active=!1},onLoseBackHandler:function(e){this.lose_single.active=!1,this.game.loseBackToHome()},onLoseRestartHandler:function(e){r.default.game.model.config.isEndless&&(a.default.info.endlessLevel="1-0"),this.lose_single.active=!1,this.game.restartGame()},onWinNextHandler:function(e){this.win_single.active=!1,this.game.model.config.mode==o.default.MODE_SINGLE&&1==this.game.model.config.isWhisper&&this.game.cipherIndex>=this.game.cipherData.length?(this.game.loseBackToHome(),this.win_content.getComponent(cc.Label).string=""):this.game.nextStage()},onWinShareHandler:function(e){this.game.model.config.mode==o.default.MODE_SINGLE&&1==this.game.model.config.isWhisper&&this.game.cipherIndex>=this.game.cipherData.length?s.default.shareMsg({type:o.default.SHARE_TYPE.GAME_QQH_WIN}):s.default.shareMsg({type:o.default.SHARE_TYPE.GAME_SINGLE_WIN})},onBtnReviveClickCallback:function(){var e=this;s.default.shareMsg({type:o.default.SHARE_TYPE.SHARE_REVIVE,successCallback:function(t){e.game.model.addStep+=10,e.game.model.grid[0].core.gameOver=!1,e.game.model.grid[0].core.topLine>=18&&e.game.model.grid[0].clearBottomLinesByCount(5),e.lose_single.active=!1,e.game.model.setGameStatus(o.default.GAME_STATE.PLAYING),e.game.isWaitingRevive=!1,e.game.currentReviveTimes++},failCallback:function(){}})}}),cc._RF.pop()},{"../common/NotificationCenter":"NotificationCenter","../common/ShareInterface":"ShareInterface","../core/GameEvent":"GameEvent","../core/Profile":"Profile","../core/data/Config":"Config","../ui/UiManager":"UiManager"}],gameVSmode:[function(e,t,i){"use strict";cc._RF.push(t,"06b2eUYww5Ov5uxFtBBGYLa","gameVSmode");var o=c(e("../core/data/Config")),n=c(e("../common/ShareInterface")),a=c(e("../ui/UiManager")),s=c(e("../ui/StarControl"));function c(e){return e&&e.__esModule?e:{default:e}}cc.Class({extends:cc.Component,properties:{gameNode:{default:null,type:cc.Node,displayName:"game common"},keepStarOK:cc.Node,keepStar:cc.Node,lose:cc.Node,win:cc.Node,prefabMTAnima:cc.Prefab,nodeAdapterBgHome:cc.Node,nodeAdapterGame:cc.Node,shareKeepStarNode:cc.Node},onLoad:function(){this.gameview=this.gameNode.getComponent("game"),this.lose=this.node.getChildByName("lose"),this.win=this.node.getChildByName("win")},start:function(){},showMe:function(){this.game=a.default.game,this.model=this.game.model,this.lose.active=!1,this.win.active=!1,this.keepStarOK.active=!1,this.keepStar.active=!1,this.nodeAdapterBgHome.active=!1,this.nodeAdapterGame.active=!0},showWin:function(){this.lose.active=!1,this.win.active=!0,this.win.getChildByName("starlevel").getComponent(cc.Label).string=o.default.PLAYER_TITLE[this.model.pkStarLevel][1];var e=this.win.getChildByName("starcontainer");s.default.createStars(e,o.default.PLAYER_TITLE[this.model.pkStarLevel][0],this.model.pkStarLevelReach,1),setTimeout(function(){s.default.playAddStarAni()},100)},showLose:function(){if(this.lose.active=!0,this.win.active=!1,this.keepStar.active=!1,this.keepStarOK.active=!1,this.model.keepStar){this.keepStarOK.active=!0,this.lose.active=!1,this.keepStarOK.getChildByName("starlevel").getComponent(cc.Label).string=o.default.PLAYER_TITLE[this.model.pkStarLevel][1];var e=this.keepStarOK.getChildByName("starcontainer");s.default.createStars(e,o.default.PLAYER_TITLE[this.model.pkStarLevel][0],this.model.pkStarLevelReach,1),setTimeout(function(){s.default.playAddStarAni()},100)}else{this.lose.active=!0,this.lose.getChildByName("starlevel").getComponent(cc.Label).string=o.default.PLAYER_TITLE[this.model.pkStarLevel][1];e=this.lose.getChildByName("starcontainer");s.default.createStars(e,o.default.PLAYER_TITLE[this.model.pkStarLevel][0],this.model.pkStarLevelReach,1)}},showKeepStar:function(){this.lose.active=!1,this.win.active=!1,this.keepStarOK.active=!1,this.keepStar.active=!0;var e=this.keepStar.getChildByName("btngiveup");e.active=!1;var t=this.keepStar.getChildByName("timettf");t.getComponent(cc.Label).string=3;var i=cc.repeat(cc.sequence(cc.scaleTo(.2,1.2,1.2),cc.scaleTo(.5,1,1),cc.delayTime(.5),cc.callFunc(function(){var e=t.getComponent(cc.Label);e.string=parseInt(e.string)-1})),3);t.runAction(cc.sequence(i,cc.callFunc(function(){e.active=!0}))),this.keepStar.getChildByName("FangKuai_shibai").getComponent(cc.Animation).play("FangKuai_shibai")},btnKeepStarOk:function(){this.game.emergencyShare()},btnLoseBack:function(){a.default.game.loseBackToHome()},btnRestarGame:function(){this.lose.active=!1,this.game.restartGame()},btnNextStage:function(){this.lose.active=!1,this.win.active=!1,this.game.nextStage()},btnKeepStarCancel:function(){this.game.cancelKeepStar()},btnKeepStarShare:function(){this.keepStar.getChildByName("timettf").stopAllActions(),this.game.keepStarShare()},btnShare:function(){n.default.shareMsg({type:o.default.SHARE_TYPE.GAME_VS_WIN})}}),cc._RF.pop()},{"../common/ShareInterface":"ShareInterface","../core/data/Config":"Config","../ui/StarControl":"StarControl","../ui/UiManager":"UiManager"}],help:[function(e,t,i){"use strict";cc._RF.push(t,"6bc5aijDodJM4ryCu5J4t84","help");var o=a(e("../core/data/Config")),n=a(e("../ui/UiManager"));function a(e){return e&&e.__esModule?e:{default:e}}cc.Class({extends:cc.Component,properties:{skeleton:{default:null,type:sp.Skeleton}},start:function(){n.default.game.model},btnCloseSelf:function(){n.default.hideUI(o.default.GAME_LAYER.HELP)}}),cc._RF.pop()},{"../core/data/Config":"Config","../ui/UiManager":"UiManager"}],homePage:[function(e,t,i){"use strict";cc._RF.push(t,"7d97cFLbn1PSod8aaBcVnnw","homePage");var o=m(e("../core/data/Config")),n=m(e("../core/Profile")),a=e("../common/EventType"),s=m(e("../common/Msg")),c=m(e("../common/AdManager")),r=m(e("../common/ShareInterface")),l=m(e("../common/NotificationCenter")),d=m(e("../ui/UiManager")),u=m(e("../ui/StarControl")),f=m(e("../util/Toast")),h=m(e("../thirdparty/Facebook"));function m(e){return e&&e.__esModule?e:{default:e}}cc.Class({extends:cc.Component,properties:{animLogo:cc.Animation,nodeAdapterBgHome:cc.Node,nodeAdapterGame:cc.Node,label_content:cc.Prefab,label_current_level:{default:null,type:cc.Label,displayName:"Break through the current level"},labelEndlessScore:{default:null,type:cc.Label,displayName:"Endless mode score"}},onLoad:function(){h.default.initPlugin(),s.default.enterGame(0),l.default.listen(a.EventType.GET_SECRET_LANGUAGE_IMAGE_SUCCESS,this.get_image_success,this),l.default.listen(a.EventType.SECRET_LANGUAGE_TO_GAME,this.secret_language_to_game,this),this.menu=this.node.getChildByName("menu"),this.show_data={}},start:function(){this.game=d.default.game,this.model=this.game.model,this.model.checkPlayMusic(),this.refreshStar()},showMe:function(){this.nodeAdapterBgHome.active=!0,this.nodeAdapterGame.active=!1,this.refreshSingleLevel(),this.refreshEndlessScore()},hideMe:function(){},refreshStar:function(){var e=this.menu.getChildByName("starcontainer"),t=o.default.PLAYER_TITLE[this.model.pkStarLevel][0];u.default.createStars(e,t,this.model.pkStarLevelReach,0),this.menu.getChildByName("starlevel").getComponent(cc.Label).string=o.default.PLAYER_TITLE[this.model.pkStarLevel][1]},refreshSingleLevel:function(){var e=n.default.info.stage2;this.label_current_level.string=""+(e+1)},refreshEndlessScore:function(){var e=n.default.info.score;this.labelEndlessScore.string="High score: "+e},onWatchVedioHandler:function(){c.default.showVidelAd()},showMall:function(){cc.resources.load("prefab/mall/mall",function(e,t){e?console.log(e):cc.instantiate(t).parent=d.default.getCurrentUI()})},showSelectGift:function(e){cc.resources.load("prefab/select_gift",function(t,i){if(t)console.log(t);else{var o=cc.instantiate(i);o.getComponent("select_gift").init(e),o.parent=d.default.getCurrentUI()}})},showDaily:function(){cc.resources.load("prefab/els_view_daily_login",function(e,t){if(e)console.log(e);else{var i=cc.instantiate(t);i.getComponent("els_view_daily_login").init(),i.parent=d.default.getCurrentUI()}})},showAward:function(){cc.resources.load("prefab/diamond_award/award",function(e,t){e?console.log(e):cc.instantiate(t).parent=d.default.getCurrentUI()})},onEndlessHandler:function(){this.game.startEndlessGame(),d.default.hideAllUI(),d.default.showUI(o.default.GAME_LAYER.GAME_SINGLE)},onSingleHandler:function(e){this.game.startClassicGame(),d.default.hideAllUI(),d.default.showUI(o.default.GAME_LAYER.GAME_SINGLE)},onVsHandler:function(e){n.default.info.stage2<5?f.default.show("Unlock after reaching stage 5",2e3):(d.default.hideAllUI(),d.default.showUI(o.default.GAME_LAYER.GAME_SINGLE),this.game.startAiGame())},onPmHandler:function(e){var t=this;r.default.shareMsg({type:o.default.SHARE_TYPE.HOMEPAGE_GROUP_RANK,successCallback:function(e){t.showRank(),n.default.setShareTimeStamp()},failCallback:function(e){console.log("share fialed ==> "+e)}})},onShareHandler:function(e){r.default.shareMsg({type:o.default.SHARE_TYPE.HOMEPAGE})},create_btn_click:function(e){this.whisper_optional_nodes.forEach(function(e,t){t<o.default.CONFIG.quietly.length?e.getChildByName("New Label").getComponent(cc.Label).string=o.default.CONFIG.quietly[t]:e.active=!1}),this.showSelectGift()},onBtnMusicClickCallback:function(){n.default.switchMusicMute()}}),cc._RF.pop()},{"../common/AdManager":"AdManager","../common/EventType":"EventType","../common/Msg":"Msg","../common/NotificationCenter":"NotificationCenter","../common/ShareInterface":"ShareInterface","../core/Profile":"Profile","../core/data/Config":"Config","../thirdparty/Facebook":"Facebook","../ui/StarControl":"StarControl","../ui/UiManager":"UiManager","../util/Toast":"Toast"}],item_cell:[function(e,t,i){"use strict";cc._RF.push(t,"139c1QgvdtM/rjQLMmBKiYQ","item_cell");var o=r(e("../../core/GameUtil")),n=r(e("../../core/Profile")),a=e("../../core/GameEvent"),s=r(e("../../core/data/Config")),c=r(e("../../common/NotificationCenter"));function r(e){return e&&e.__esModule?e:{default:e}}cc.Class({extends:cc.Component,properties:{bgs:[cc.Node],count_label:cc.Label,name_label:cc.Label,select_tag:cc.Node,icon:cc.Sprite},onLoad:function(){this.select_tag.active=!1,this.count_label.active=!1,this.bgs[0].active=!1,this.bgs[1].active=!0},start:function(){this.updateSelect()},init:function(e){if(e){this.item_data=e;var t=e.kindId,i=e.count||0;i>0&&!n.default.isSkin(t)&&(this.count_label.active=!0,this.count_label.string=i);var o=e.displayName;this.name_label.string=o,this.setImage(this.icon,t)}},setImage:function(e,t){var i=s.default.PRODUCT_CONFIG[t];if(i){var o=i.url;e.node.angle=-i.rotation||0,e.node.scale=i.scale,cc.resources.load(o,cc.SpriteFrame,function(t,i){t?console.log(t):e.getComponent(cc.Sprite).spriteFrame=i})}else console.log("item not exist",t)},updateSelect:function(){var e=this.item_data.kindId||0;n.default.isSkin(e)&&(this.count_label.active=!1,this.count_label.string="",n.default.isCurrentSkin(e)?(this.bgs[0].active=!0,this.bgs[1].active=!1):(this.bgs[0].active=!1,this.bgs[1].active=!0))},item_cell_click:function(){n.default.isSkin(this.item_data.kindId)&&(n.default.isCurrentSkin(this.item_data.kindId)||(n.default.saveSkin(this.item_data.kindId),c.default.trigger(a.GameEvent.REFRESH_LOCAL_SKIN,{idx:this.item_data.kindId}),c.default.trigger(a.GameEvent.UPDATE_ITEMS))),o.default.checkGift(this.item_data.kindId)&&c.default.trigger(a.GameEvent.SHOW_GIFT_ANIMATION,{type:0,id:this.item_data.kindId})}}),cc._RF.pop()},{"../../common/NotificationCenter":"NotificationCenter","../../core/GameEvent":"GameEvent","../../core/GameUtil":"GameUtil","../../core/Profile":"Profile","../../core/data/Config":"Config"}],main:[function(e,t,i){"use strict";cc._RF.push(t,"2c46fz8dppLeJnFfUxfHRah","main");var o=g(e("./core/Engine")),n=g(e("./core/data/Config")),a=g(e("./core/GameTouch")),s=g(e("./core/Game")),c=e("./core/GameEvent"),r=g(e("./core/Profile")),l=g(e("./core/GameUtil")),d=g(e("./common/Msg")),u=g(e("./core/model/GameModel")),f=g(e("./common/NotificationCenter")),h=g(e("./ui/UiManager")),m=g(e("./ui/StarControl")),p=g(e("./common/BlockQuest"));function g(e){return e&&e.__esModule?e:{default:e}}function _(e,t){var i;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(i=v(e))||t&&e&&"number"==typeof e.length){i&&(e=i);var o=0;return function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}return(i=e[Symbol.iterator]()).next.bind(i)}function v(e,t){if(e){if("string"==typeof e)return E(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);return"Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i?Array.from(e):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?E(e,t):void 0}}function E(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,o=new Array(t);i<t;i++)o[i]=e[i];return o}var S=cc.Class({name:"SkinConfig",properties:{skinName:"Skin name",localId:0,serverId:0,blocks:[cc.SpriteFrame]}});cc.Class({extends:cc.Component,properties:{readyGo:{default:null,type:cc.Node},hgNode:{default:null,type:cc.Node,displayName:"Home Page"},saiNode:{default:null,type:cc.Node,displayName:"Search AI"},gvsNode:{default:null,type:cc.Node,displayName:"Game VS"},gleNode:{default:null,type:cc.Node,displayName:"Game single"},helpNode:{default:null,type:cc.Node,displayName:"Help"},pause:cc.Node,prefabblock:cc.Prefab,prefabattack0:cc.Prefab,prefabattack1:cc.Prefab,p_c:cc.Prefab,mask_label:cc.Prefab,blockConfigs:[S],prefabGiftAnimation:{default:null,type:cc.Prefab,displayName:"Owl animation"},prefabCombo:{default:null,type:cc.Prefab,displayName:"Combo animation"},prefabRocketMoveParticle:{default:null,type:cc.Prefab,displayName:"Rocket moves"},prefabRocketMoveEndBoom:{default:null,type:cc.Prefab,displayName:"Rocket explosion"},prefabAimAtBlock:{default:null,type:cc.Prefab,displayName:"Scope animation"},arrPropPlaceHolder:[cc.Node],arrPropCount:[cc.Label],nodeProp0:cc.Node,nodeProp1:cc.Node,nodeProp2:cc.Node,nodeProp3:cc.Node,nodeProp1Using:cc.Node,nodeProp2Effect:cc.Node,nodeProp0Effect:cc.Node,prefabProp0Effect:{default:null,type:cc.Prefab,displayName:"Hammer effect"},nodeMaticBottle:cc.Node,prefabGiftPropView:{default:null,type:cc.Prefab,displayName:"Gift"},nodeMagicBottlePlaceHolder:cc.Node,soundTag:cc.Node,nodePop:{default:null,type:cc.Node,displayName:"Popup root"},prefabZhuBaoAnimation:cc.Prefab},onLoad:function(){var e=this;this.blockImages=[],this.opponentsBlockImages=[],this.allBlockSpriteFrames=[],r.default.load(),this.loadRes(),this.initGemAnimations(),n.default.CONFIG=n.default.CONFIG_LOCAL,f.default.listen("STATUS_CHANGE",this.onStatusChange,this),this.node.on(cc.Node.EventType.TOUCH_START,this.touchStart,this),this.node.on(cc.Node.EventType.TOUCH_MOVE,this.touchMove,this),this.node.on(cc.Node.EventType.TOUCH_END,this.touchEnd,this),this.headAtlas=void 0,cc.resources.load("image/heads/heads",cc.SpriteAtlas,function(t,i){t?console.log(t):e.headAtlas=i}),h.default.registerUI(n.default.GAME_LAYER.HOMEPAGE,this.hgNode,"homePage"),h.default.registerUI(n.default.GAME_LAYER.GAME_COMMON,this.node,"main"),h.default.registerUI(n.default.GAME_LAYER.GAME_SINGLE,this.gleNode,"gameSinglemode"),h.default.registerUI(n.default.GAME_LAYER.GAME_VS,this.gvsNode,"gameVSmode"),h.default.registerUI(n.default.GAME_LAYER.GAME_SEARCH_AI,this.saiNode,"searchAIPage"),h.default.registerUI(n.default.GAME_LAYER.HELP,this.helpNode,"help"),m.default.init(),f.default.listen(c.GameEvent.MAGIC_BOTTLE_FULL,this.showGiftProp,this),f.default.listen(c.GameEvent.CONSUME_ITEM_SUCCESS,this.refreshPropCount,this),f.default.listen(c.GameEvent.ADD_ITEM_SUCCESS,this.refreshPropCount,this),f.default.listen(c.GameEvent.UPDATE_BAG,this.refreshPropCount,this),f.default.listen(c.GameEvent.HIDE_GIFT,this.onHideGift,this),f.default.listen(c.GameEvent.ADD_MAGIC,this.addMagic,this),f.default.listen(c.GameEvent.SHOW_MAGIC_ADD_EFFECT,this.showAddMagicEffect2,this),f.default.listen(c.GameEvent.REFRESH_LOCAL_SKIN,this.onChangeBlocks,this),f.default.listen(c.GameEvent.SHOW_GIFT_ANIMATION,this.onShowGiftAnimation,this),f.default.listen(c.GameEvent.SHOW_CLEAR_ROW_EFFECT,this.onShowclearRowEffect,this),f.default.listen(c.GameEvent.REFRESH_GEM_COUNT,this.onShowAddGemEffect,this),f.default.listen(c.GameEvent.SHOW_ICE_EFFECT,this.onUpdateIceBlock,this),f.default.listen(c.GameEvent.ON_SHOW_ENDLESS_LEVEL_UP,this.onShowEndlessLevelUpEffect,this),f.default.listen(c.GameEvent.ADD_GEM_ANIMATION,this.onAddGemAnimations,this),f.default.listen(c.GameEvent.REFRESH_GEM_ANIMATION_POS,this.onRefreshGemAnimation,this),f.default.listen(c.GameEvent.DELETE_GEM_ANIMATION,this.onDeleteGemAnimation,this),f.default.listen(c.GameEvent.RESET_GEM_ANIMATION_POOL,this.resetGemAnimations,this),f.default.listen(c.GameEvent.ENDLESS_SHOW_LEVEL_END,this.onEndelssShowLevelEnd,this),f.default.listen(c.GameEvent.ENDLESS_ON_GEM_CHANGE,this.onEndlessGemChange,this)},onDestroy:function(){f.default.ignoreScope(this)},loadRes:function(){var e=this;this.allBlockSpriteFrames=new Map,this.allShadows=new Map,cc.resources.loadDir("image/blocks",cc.SpriteFrame,function(t,i,o){t?console.log(t):(i.forEach(function(t){e.allBlockSpriteFrames.set(t.name,t)}),e.initBlockSkinConfig())})},initBlockSkinConfig:function(){var e=[0,1,2,3,4];this.blockConfigs=[];for(var t=0;t<e.length;t++){for(var i=new S,o=[],n=0;n<=10;n++){var a="b_"+e[t]+"_"+n;this.allBlockSpriteFrames.has(a)?o.push(this.allBlockSpriteFrames.get(a)):console.log("initBlockSkinConfig Error: ",a)}for(var s=0;s<=8;s++){var c="shadow"+s;this.allBlockSpriteFrames.has(c)?o.push(this.allBlockSpriteFrames.get(c)):console.log("initBlocksSkinConfig Error: ",c)}i.blocks=o,i.localId=e[t],this.blockConfigs.push(i)}this.blockImages=this.blockConfigs[0].blocks,this.onChangeBlocks({idx:r.default.info.defaultSkin}),this.opponentsBlockImages=this.blockConfigs[4].blocks,this.initGemFrames()},initGemFrames:function(){this.gemFrames=[];for(var e=0;e<3;e++){var t="zhubao_"+e;this.allBlockSpriteFrames.has(t)&&this.gemFrames.push(this.allBlockSpriteFrames.get(t))}},initGemAnimations:function(){this.gemAnimations&&this.gemAnimations.length>0&&this.gemAnimations.forEach(function(e){e.destroy()}),this.gemAnimations=[],this.createNewGemAnimations()},createNewGemAnimations:function(){for(var e=0;e<3;e++){var t=cc.instantiate(this.prefabZhuBaoAnimation);t.parent=this.node.getChildByName("render_effect"),t.active=!1,this.gemAnimations.push(t)}},getGemAnimation:function(){var e=null;return this.gemAnimations.length>0&&(e=this.gemAnimations[0],this.gemAnimations.splice(0,1)),this.gemAnimations.length<=2&&this.createNewGemAnimations(),e},getGemAnimationByRowAndCol:function(e,t){var i=null,o=e+"_"+t;return this.gemAnimationMap=this.gemAnimationMap||new Map,this.gemAnimationMap.has(o)?i=this.gemAnimationMap.get(o):(i=this.getGemAnimation(),this.gemAnimationMap.set(o,i)),i.active=!0,i},resetGemAnimations:function(){var e=this;this.gemAnimationMap=this.gemAnimationMap||new Map,this.gemAnimationMap.forEach(function(t){e.gemAnimations.push(t),t.active=!1}),this.gemAnimationMap.clear()},onAddGemAnimations:function(e){var t=this.getGemAnimationByRowAndCol(e.row,e.col);t.getComponent("els_view_block").showGemAnimationByIdx(e.type-112),t.position=this.blocks[0][e.row][e.col].rawpos;var i=h.default.game;t.active=1==i.model.endlessLevel},onEndelssShowLevelEnd:function(){this.gemAnimationMap=this.gemAnimationMap||new Map,this.gemAnimationMap.forEach(function(e){e.active=!0})},onRefreshGemAnimation:function(e){var t=this.getGemAnimationByRowAndCol(e.row,e.col),i=e.is_down?e.row-1:e.row+1,o=i+"_"+e.col;if(this.gemAnimationMap.has(o))throw new Error("onRefreshGemAnimation");this.gemAnimationMap.set(o,t),this.gemAnimationMap.delete(e.row+"_"+e.col),t.position=this.blocks[0][i][e.col].rawpos},onDeleteGemAnimation:function(e){var t=this.getGemAnimationByRowAndCol(e.row,e.col);t.active=!1,this.gemAnimationMap.delete(e.row+"_"+e.col),this.gemAnimations.push(t)},onEndlessGemChange:function(e){var t=this;this.shadow.active&&(this.resetGemAnimations(),e.forEach(function(e){var i=t.getGemAnimationByRowAndCol(e.row,e.col);i.position=t.blocks[0][e.row][e.col].rawpos,i.getComponent("els_view_block").showGemAnimationByIdx(e.type-112)}))},onChangeBlocks:function(e){var t=e.idx||r.default.info.defaultSkin;(t=p.default.skinServer2Local(t))>=this.blockImages.length&&(t=0),this.blockImages=this.blockConfigs[t].blocks},init:function(){var e=this;this.lbl_next=this.node.getChildByName("next"),this.lbl_hold=this.node.getChildByName("hold"),this.backmask=this.node.getChildByName("backmask"),this.add5step=this.gleNode.getChildByName("add5step"),this.add5step.opacity=0,this.share5line=this.gvsNode.getChildByName("share-5"),this.share5line.active=!1,this.share5step=this.gleNode.getChildByName("share+5"),this.share5line.active=!1,this.animShareDecLine=cc.instantiate(this.prefabGiftAnimation),this.animShareDecLine.getComponent("shareGiftAnimationView").init("Share to -5 lines"),this.animShareDecLine.parent=this.share5line,this.animShareIncStep=cc.instantiate(this.prefabGiftAnimation),this.animShareIncStep.getComponent("shareGiftAnimationView").init("Share to +10 steps"),this.animShareIncStep.parent=this.share5step,this.lbl_time=this.node.getChildByName("time"),this.lbl_antiscore=this.node.getChildByName("lbl_antiscore"),this.lbl_progress=this.node.getChildByName("lbl_progress"),this.lbl_title=this.node.getChildByName("lbl_title"),this.lbl_myscore=this.node.getChildByName("lbl_myscore"),this.lbl_endless_score=this.node.getChildByName("lbl_endless_score"),this.view=this.node.getChildByName("view"),this.shadow=this.node.getChildByName("shadow"),this.shadow.scale=9.8/n.default.COLUMNS,this.mask=this.node.getChildByName("mask"),this.timestep=this.node.getChildByName("timestep"),this.combo=[],this.combo[0]=this.node.getChildByName("combo0"),this.combo[1]=this.node.getChildByName("combo1"),this.view.removeAllChildren(),this.blocks=[[],[]];for(var t=0;t<2;t++)for(var i=0,o=n.default.ROWS;i<o;i++){this.blocks[t][i]=new Array(n.default.COLUMNS+1);for(var a=0,s=n.default.COLUMNS+1;a<s;a++){var c=cc.instantiate(this.prefabblock);this.blocks[t][i][a]=c;var r=0==t?6.6/n.default.COLUMNS:2.4/n.default.COLUMNS,l=72*r+2;c.scale=r,c.rawscale=c.scale,this.setBlockColor(!0,c,0,8),0==t&&(c.position=cc.v2(n.default.USER_POS_X+(a+.5)*l,n.default.USER_POS_Y+(i+.5)*l),c.rawpos=c.position),1==t&&(c.position=cc.v2(n.default.AI_POS_X+(a+.5)*l,n.default.AI_POS_Y+(i+.5)*l),c.rawpos=c.position),c.parent=this.view}}this.ice_blocks=[],cc.resources.load("prefab/ice_block",function(t,i){if(t)console.log(t);else for(var o=0,a=n.default.COLUMNS;o<a;o++){var s=cc.instantiate(i),c=6.6/n.default.COLUMNS,r=72*c+2;s.scale=c,s.rawscale=s.scale,s.opacity=0,s.position=cc.v2(n.default.USER_POS_X+(o+.5)*r,n.default.USER_POS_Y+.5*r),s.rawpos=s.position,s.parent=e.node.getChildByName("render_effect"),e.ice_blocks[o]=s}}),this.holdNext=[[],[],[]];for(var d=[300,580,465],u=0;u<3;u++)for(var f=0;f<4;f++){this.holdNext[u][f]=[];for(var h=0;h<4;h++){var m=cc.instantiate(this.prefabblock);this.holdNext[u][f].push(m),m.scale=.3,m.opacity=50,m.getComponent(cc.Sprite).spriteFrame=this.blockImages[0];var p=72*m.scale+2;m.position=cc.v2(60+(h+.5)*p,170+d[u]-(f+.5)*p),m.parent=this.view}}this.node.getChildByName("anim").removeAllChildren(),this.attani=[[[],[],[],[],[]],[[],[],[],[],[]]];for(var g=[2,1.5,1.35,1.2,1.05,.9],_=[255,255,220,190,160,130],v=0;v<2;v++)for(var E=0;E<5;E++){this.attani[v][E]=[];for(var S=0;S<6;S++){var C=0==S?cc.instantiate(this.prefabattack0):cc.instantiate(this.prefabattack1);this.attani[v][E].push(C),C.scale=g[S],C.opacity=_[S],C.getComponent(cc.Sprite).setVisible(!1),C.parent=this.node.getChildByName("anim")}}this.magicAni=[];for(var A=0;A<40;A++){var I=A%2==0?cc.instantiate(this.prefabattack0):cc.instantiate(this.prefabattack1);this.magicAni.push(I),I.opacity=180,I.active=!1,I.parent=this.node.getChildByName("anim")}this.nodeProp1Using.active=!1,this.nodeProp2Effect.active=!1},onUpdateIceBlock:function(e){var t=(e=e>5?5:e)>0?30*e:0;this.ice_blocks.forEach(function(e){e.opacity=t})},start:function(){var e=this;this.init(),this.singleView=this.gleNode.getComponent("gameSinglemode"),this.vsView=this.gvsNode.getComponent("gameVSmode");var t=new u.default,i=new s.default(t),o=new a.default(i);this.tou=o,t.tou=o,i.initGame(this.node,0,Math.round(1e4*Math.random())),t.setGameStatus(n.default.GAME_STATE.HOMEPAGE),this.game=i,h.default.init(this.game),i.model.beginHelp1st=-1,i.model.begin_win_partical=-1,i.model.needHelp1st=0==r.default.info.help1st,i.model.pkStar=r.default.info.pkStar,i.model.pkStar=i.model.pkStar?i.model.pkStar:0,i.updatePKStar(0),this.frametime=0,h.default.showUI(n.default.GAME_LAYER.HOMEPAGE,null,!1),this.magicBottle=this.nodeMaticBottle.getComponent("MagicBottleView"),this.magicBottle&&(this.magicBottle.reset(),this.magicBottle.init(this.game)),this.refreshPropCount(),this.gift_view=cc.instantiate(this.prefabGiftPropView),this.gift_view.parent=this.nodePop,this.gift_view.active=!1,this.nodeProp2Effect.getComponent(cc.Animation).on("finished",function(t,i){e.nodeProp2Effect.active=!1,e.game.model.grid[0].clearBottomLinesByCount(1)},this),this.checkReward()},checkReward:function(){var e=this;p.default.UserInfo.loginReward&&1==p.default.UserInfo.loginReward.get&&cc.resources.load("prefab/els_view_daily_login",function(t,i){if(t)console.log(t);else{var o=cc.instantiate(i);o.getComponent("els_view_daily_login").init(),o.parent=e.nodePop}})},showAddMagicEffect2:function(){this.magicBottle.showAddMagicEffect()},onStatusChange:function(e){switch(e){case n.default.GAME_STATE.PREPARE:this.refreshShow(this.game.model.config.mode);break;case n.default.GAME_STATE.RESULT_LOSE:this.showGameLose();break;case n.default.GAME_STATE.RESULT_WIN:this.showGameWin();break;case n.default.GAME_STATE.KEEPSTAR:this.vsView.showKeepStar();break;case n.default.GAME_STATE.SEARCH_AI:h.default.showUI(n.default.GAME_LAYER.GAME_SEARCH_AI);break;case n.default.GAME_STATE.SHOW_REVIVE:this.singleView.showRevive()}},emergencyShare:function(){this.game.emergencyShare()},showGameLose:function(){this.game.model.config.mode==n.default.MODE_SINGLE?this.singleView.showLose():this.vsView.showLose()},showGameWin:function(){this.game.model.config.mode==n.default.MODE_SINGLE?this.singleView.showWin():this.vsView.showWin()},btnPause:function(){this.game.model.getGameStatus()==n.default.GAME_STATE.PLAYING&&(this.pause.active=!0,this.game.pauseGame(),this.refreshSoundTag())},btnContinue:function(){this.pause.active=!1,this.game.continueGame()},btnBackToHome:function(){this.pause.active=!1,h.default.hideAllUI(),this.game._backToHomePage(),h.default.showUI(n.default.GAME_LAYER.HOMEPAGE)},touchStart:function(e){var t=e.getLocation(),i=this.node.convertToNodeSpaceAR(t);this.tou.began(i.x,i.y)},touchMove:function(e){var t=e.getLocation(),i=this.node.convertToNodeSpaceAR(t);this.tou.moved(i.x,i.y)},touchEnd:function(e){var t=e.getLocation(),i=this.node.convertToNodeSpaceAR(t);this.tou.ended(i.x,i.y)},update:function(e){this.frametime+=e,this.frametime>=.02&&(this.frametime=0,o.default.run(this.game))},getShadowFrame:function(e){return this.blockImages[e+11]},getBlockFrame:function(e,t){var i=[0,9,1,2,3,4,5,6,7,8,0,0];return e?this.blockImages[i[t]]:this.opponentsBlockImages[i[t]]},setBlockColor:function(e,t,i,o,n,a){t.rawpos&&(t.position=t.rawpos),t.rawscale&&(t.scale=t.rawscale),t.opacity=i,t.angle=a?0:-a,t.scale=t.scale||t.scale*n,l.default.isGem(o+100)?this.gemFrames&&(t.getComponent(cc.Sprite).spriteFrame=this.gemFrames[o-12]):this.blockImages&&(t.getComponent(cc.Sprite).spriteFrame=this.getBlockFrame(e,o))},refreshShow:function(e){this.pause.active=!1,e!=n.default.MODE_SINGLE?(this.timestep.getComponent(cc.Label).string="Time",this.nodeProp0.active=!1,this.nodeProp1.active=!1,this.nodeProp2.active=!1,this.nodeProp3.active=!1,this.nodeMaticBottle.active=!1,this.onUpdateIceBlock(0)):(this.timestep.getComponent(cc.Label).string="Steps",this.nodeProp0.active=!0,this.nodeProp1.active=!0,this.game.model.config.isEndless?(this.nodeProp3.active=!0,this.nodeProp2.active=!1):(this.nodeProp2.active=!0,this.nodeProp3.active=!1,this.onUpdateIceBlock(0)),this.nodeMaticBottle.active=!0)},showCombo:function(e){var t=cc.instantiate(this.prefabCombo);t.parent=this.node,t.position=cc.v2(400,840),t.getComponent("ComboAnimation").init(!0,e)},showClearAnimation:function(e){var t=cc.instantiate(this.prefabCombo);t.parent=this.node,t.position=cc.v2(420,840),t.getComponent("ComboAnimation").init(!1,e)},useCollapseHammer:function(){var e=this,t=this.game.model.endlessLevel,i=this.game.model.config.isEndless;this.showHammerEffect(0,function(){var o=e.game.model.endlessLevel;i&&o==t&&e.game.sinkAllCol(0),i||e.game.sinkAllCol(0)})},useFillRocket:function(){var e=this.game.fillRandomBlock(0,5);this.showRocketEffectByData(0,e)},useMagicWand:function(){this.nodeProp2Effect.active=!0;var e=this.nodeProp2Effect.getComponent(cc.Animation);e&&e.play()},useIceBoom:function(){this.game.setFreezeStep(),this.onUpdateIceBlock(5)},showRocketEffectByData:function(e,t){var i=this;f.default.trigger(c.GameEvent.SET_MAGIC_BUSY,!0),this.nodeProp1Using.active=!0;var o=this,a=0,s=function(){--a<=0&&(o.nodeProp1Using.active=!1,o.game.clearRow(e),f.default.trigger(c.GameEvent.SET_MAGIC_BUSY,!1))};this.game.model.playMusic(n.default.SOUND.ROCKET,!1);for(var r,l=function(){var t=r.value,c=t[0],l=parseInt((t[1]-2-c)/n.default.GRIDW),d=i.blocks[e][n.default.ROWS-l-1][c],u=i.arrPropPlaceHolder[1],f=i.view,h=cc.instantiate(i.prefabAimAtBlock);h.parent=f,h.position=d.position;var m=cc.instantiate(i.prefabRocketMoveParticle);m.parent=f,m.position=u.position;m.runAction(cc.sequence(cc.moveTo(.5,d.position),cc.callFunc(function(){m.removeFromParent(),h.removeFromParent();var n=cc.instantiate(i.prefabRocketMoveEndBoom);n.parent=f,n.position=d.position,n.runAction(cc.sequence(cc.callFunc(function(){o.game.fillGridByIndex(e,t[1])}),cc.delayTime(.1),cc.callFunc(s),cc.removeSelf()))}))),a++},d=_(t);!(r=d()).done;)l()},showHammerEffect:function(e,t){f.default.trigger(c.GameEvent.SET_MAGIC_BUSY,!0);var i=cc.instantiate(this.prefabProp0Effect);i.parent=this.nodeProp0Effect;var o=i.getComponent(cc.Animation),a=this;this.game.model.playMusic(n.default.SOUND.CHUI,!1),this.showClearTopCol(.3),o.on("finished",function(o,n){t&&t(),i.runAction(cc.sequence(cc.delayTime(.3),cc.callFunc(function(){a.game.clearRow(e),f.default.trigger(c.GameEvent.SET_MAGIC_BUSY,!1)}),cc.removeSelf()))},this)},showGiftProp:function(){if(this.gift_view)return this.gift_view.getComponent("els_gift_prop_view").init(this.game),this.gift_view.getComponent("els_gift_prop_view").showGiftBox(),void(this.gift_view.active=!0);this.gift_view=cc.instantiate(this.prefabGiftPropView),this.gift_view.parent=this.nodePop,this.gift_view.getComponent("els_gift_prop_view").init(this.game),this.gift_view.getComponent("els_gift_prop_view").showGiftBox()},onHideGift:function(){this.game.continueGame(),this.gift_view.active=!1},usePropByKey:function(e,t){var i=p.default.propLocal2Server(parseInt(t));i!=r.default.ITEM_TYPES.COLLAPSE_HAMMER||0!=r.default.getPropByKey(i)?d.default.consumeItem(i)&&(this.doConsumeItem(i),this.refreshPropCount()):this.showUnlockUI()},showUnlockUI:function(){var e=this;cc.resources.load("prefab/unlock",function(t,i){t?console.log(t):(e.game.pauseGame(),cc.instantiate(i).parent=h.default.getCurrentUI())})},refreshPropCount:function(){this.arrPropCount.forEach(function(e,t){var i=p.default.propLocal2Server(t),o=r.default.getPropByKey(i);e.string=""+o})},addMagic:function(e){this.game.model.config.mode==n.default.MODE_SINGLE&&this.magicBottle.addMagic(e)},showAddMagicEffect:function(){if(this.game.model.config.mode==n.default.MODE_SINGLE)for(var e=this.nodeMagicBottlePlaceHolder.position,t=this,i=0,o=function(e){e.active=!1,0==--i&&t.magicBottle.showAddMagicEffect()},a=this.game.model.grid[0].core.fullRows,s=0;s<a.length;s++)for(var c=0;c<n.default.COLUMNS;c++){if(i>=this.magicAni.length)return;var r=this.magicAni[i],l=this.blocks[0][s][c];i++,r.position=l.rawpos,r.active=!0,r.runAction(cc.sequence(cc.delayTime(.2*Math.random()),cc.spawn(cc.rotateBy(.5,1800),cc.moveTo(.5,e)),cc.callFunc(o,r)))}},consume_item_success:function(e){var t=this;e.result.items.forEach(function(e){t.doConsumeItem(e.itemId)})},doConsumeItem:function(e){switch(e){case r.default.ITEM_TYPES.COLLAPSE_HAMMER:this.useCollapseHammer();break;case r.default.ITEM_TYPES.FILL_ROCKET:this.useFillRocket();break;case r.default.ITEM_TYPES.MAGIC_WAND:this.useMagicWand();break;case r.default.ITEM_TYPES.ICE_BOOM:this.useIceBoom()}},showClearTopCol:function(e){var t=this;void 0===e&&(e=.5);for(var i=this.game.model.grid[0],o=i.core.columnTop,a=this.view,s=0;s<o.length;s++){var c=(n.default.ROWS-o[s])*n.default.GRIDW+s+2;if(i.core.grid[c]>100&&200!=i.core.grid[c]){var r=this.blocks[0][o[s]-1][s],l=cc.instantiate(this.prefabAimAtBlock);l.parent=a,l.position=r.position,l.runAction(cc.sequence(cc.delayTime(e),cc.removeSelf()))}}setTimeout(function(){t.game.useMagicWand(0)},1e3*e/2)},onHelpHandler:function(){h.default.showUI(n.default.GAME_LAYER.HELP)},unSelectSound:function(){r.default.switchMusicMute(),this.refreshSoundTag()},refreshSoundTag:function(){r.default.getIsMusicMute()?(this.soundTag.active=!0,this.game.model.stopBgMusic()):this.soundTag.active=!1},onShowGiftAnimation:function(e){var t=this;cc.resources.load("prefab/els_view_prop_animation_display",function(i,o){if(i)console.log(i);else{var n=cc.instantiate(o);n.getComponent("els_view_prop_animation_display").init(e.id,e.type),n.parent=t.nodePop}})},onShowclearRowEffect:function(e){var t=e.row,i=e.cb||null;this.showClearnLineEffectByRow(t,i)},showClearnLineEffectByRow:function(e,t){var i=this;void 0===t&&(t=null);var o=6.6/n.default.COLUMNS*72+2,a=cc.v2(195+5.5*o,n.default.USER_POS_Y+(e+1)*o-.5*o),s=this,c=function(){for(var t=n.default.ROWS-e-1,i=0;i<n.default.COLUMNS;i++)s.blocks[0][e][i].opacity=0,s.blocks[0][t][i].opacity=0};cc.resources.load("prefab/els_view_effect_clean_line",function(e,o){if(e)cc.err(e.message||e);else{var n=cc.instantiate(o);n.parent=i.node.getChildByName("render_effect"),n.position=a;var s=n.getComponent(cc.Animation);s.on("finished",function(e,i){n.destroy(),t&&t(),c()},i),s.play()}})},onShowAddGemEffect:function(e){var t=this;if(e){var i=this.blocks[0][e.x][e.y].position;cc.resources.load("prefab/els_view_effect_get_zhubao",function(o,n){if(o)cc.err(o.message||o);else{var a=cc.instantiate(n);a.getChildByName("siprite_display").getComponent(cc.Sprite).spriteFrame=t.gemFrames[e.type-112],a.parent=t.node.getChildByName("render_effect"),a.position=i;var s=t.node.getChildByName("render_effect").getChildByName("z_"+(e.type-112)),c=i,r=s.position,l=c.sub(r).mag(),d=r.sub(c).normalizeSelf(),u=[cc.v2(c.x+30,c.y+d.y*l/2),cc.v2(c.x+d.x*l/4*3,c.y+d.y*l/4*3),r];a.runAction(cc.sequence(cc.bezierTo(.5,u).easing(cc.easeSineIn()),cc.callFunc(function(){a.destroy()})))}})}},onShowEndlessLevelUpEffect:function(){var e=this;cc.resources.load("prefab/els_view_level_up",function(t,i){if(t)cc.err(t.message||t);else{var o=cc.instantiate(i);o.parent=e.node.getChildByName("render_effect");var n=e.node.getChildByName("render_effect");o.position=cc.v2(.35*n.width+.3*n.width,.7*n.height),o.runAction(cc.sequence(cc.scaleTo(.2,1),cc.scaleTo(.3,.8),cc.delayTime(1),cc.callFunc(function(){o.destroy()})))}}),cc.resources.load("prefab/els_view_add_magic",function(t,i){if(t)cc.err(t.message||t);else{var o=cc.instantiate(i);o.parent=e.node.getChildByName("render_effect");var a=e.node.getChildByName("render_effect");o.getComponent("els_view_add_magic").init(n.default.ENDLESS_VALUES.GetGemAddScore),o.position=cc.v2(a.width/2,.7*a.height)}})}}),cc._RF.pop()},{"./common/BlockQuest":"BlockQuest","./common/Msg":"Msg","./common/NotificationCenter":"NotificationCenter","./core/Engine":"Engine","./core/Game":"Game","./core/GameEvent":"GameEvent","./core/GameTouch":"GameTouch","./core/GameUtil":"GameUtil","./core/Profile":"Profile","./core/data/Config":"Config","./core/model/GameModel":"GameModel","./ui/StarControl":"StarControl","./ui/UiManager":"UiManager"}],mall:[function(e,t,i){"use strict";cc._RF.push(t,"3d91e6AMAVMXICKlzOpbnSc","mall");var o=e("../../core/GameEvent"),n=r(e("../../core/Profile")),a=r(e("../../common/Msg")),s=r(e("../../common/NotificationCenter")),c=r(e("../../common/Data"));function r(e){return e&&e.__esModule?e:{default:e}}var l=0,d=1,u=2;cc.Class({extends:cc.Component,properties:{mall_btn_nodes:[cc.Node],my_btn_nodes:[cc.Node],diamond_btn_nodes:[cc.Node],mall_content:cc.Node,page_view:cc.PageView,my_page_view:cc.PageView,diamond_page_view:cc.PageView,diamond_label:cc.Label,mall_cell:cc.Prefab,item_cell:cc.Prefab,diamond_cell:cc.Prefab,page_prefab:cc.Prefab,x_node:cc.Node},onLoad:function(){this.diamond_label.active=!1,this.page_views=[];for(var e=0;e<3;e++){var t=cc.instantiate(this.page_prefab);t.position=this.x_node.position,t.parent=this.mall_content,this.page_views.push(t)}this.curIndex=l,this.btn_nodes=[this.mall_btn_nodes,this.my_btn_nodes,this.diamond_btn_nodes],this.select_page_view(this.curIndex),this.page_view=this.page_views[0].getComponent(cc.PageView),this.my_page_view=this.page_views[1].getComponent(cc.PageView),this.diamond_page_view=this.page_views[2].getComponent(cc.PageView),s.default.listen(o.GameEvent.UPDATE_BAG,this.updateUI,this),s.default.listen(o.GameEvent.UPDATE_ITEMS,this._onMsgUpdateBag,this)},start:function(){this.curIndex==u?this.diamond_btn_click():this.mall_btn_click(),this.load_product_config()},load_product_config:function(){c.default.StoreList?this.updateUI():a.default.getStoreList()},updateBag:function(){var e=this;this.diamond_label.active=!0,this.diamond_label.string=n.default.info.coin;var t=[];n.default.info.bag.forEach(function(e){var i=n.default.getKindId(e);c.default.StoreList.items.some(function(e){if(e.kindId==i)return!0})&&!n.default.isCoin(i)&&t.push(e)}),this.item_cells=[];for(var i=function(i){var o=Math.floor(i/4),a=void 0;e.my_page_view.getPages().length>o?a=e.my_page_view.getPages()[o]:((a=new cc.Node).width=540,a.height=699,e.my_page_view.addPage(a));var s=i%2==0?-124.5:124.5,r=i%4<2?173.5:-154.5,l=t[i],d=n.default.getKindId(l),u=n.default.getCount(l),f=null;if(!c.default.StoreList.items.some(function(e){if(e.kindId==d)return(f=e).count=u,!0}))return{v:void 0};cc.resources.load("prefab/mall/item_cell",function(t,i){if(t)console.log(t);else{var o=cc.instantiate(i);o.getComponent("item_cell").init(f),o.position=cc.v2(s,r),e.item_cells.push(o),o.parent=a}})},o=0;o<t.length;o++){var a=i(o);if("object"==typeof a)return a.v}},_onMsgUpdateBag:function(){this.item_cells.forEach(function(e){e.getComponent("item_cell").updateSelect()})},updateUI:function(){this.updateBag();for(var e=0;e<c.default.StoreList.coin.length;e++){var t=Math.floor(e/4),i=void 0;this.page_view.getPages().length>t?i=this.page_view.getPages()[t]:((i=new cc.Node).width=540,i.height=699,this.page_view.addPage(i));var o=e%2==0?-124.5:124.5,n=e%4<2?173.5:-154.5,a=cc.instantiate(this.mall_cell);a.getComponent("product_cell").init(c.default.StoreList.coin[e]),a.position=cc.v2(o,n),a.parent=i}var s=c.default.StoreList.cash.length+2;cc.sys.os==cc.sys.OS_IOS&&cc.sys.isBrowser&&(s=2);for(var r=0;r<s;r++){var l=Math.floor(r/4),d=void 0;this.diamond_page_view.getPages().length>l?d=this.diamond_page_view.getPages()[l]:((d=new cc.Node).width=540,d.height=699,this.diamond_page_view.addPage(d));var u=r%2==0?-124.5:124.5,f=r%4<2?173.5:-154.5,h=cc.instantiate(this.diamond_cell);r-2>=0?h.getComponent("diamond_cell").init(c.default.StoreList.cash[r-2],r):h.getComponent("diamond_cell").init(void 0,r),h.position=cc.v2(u,f),h.parent=d}},mall_btn_click:function(){this.curIndex=l,this.select_page_view()},my_btn_click:function(){this.curIndex=d,this.select_page_view()},diamond_btn_click:function(){this.curIndex=u,this.select_page_view()},select_page_view:function(){var e=this.curIndex,t=this;this.page_views.forEach(function(t,i){t.active=!1,i==e&&(t.active=!0)}),this.btn_nodes.forEach(function(i,o){t.selectBtn(i,!1),o==e&&t.selectBtn(i,!0)})},dismiss_UI:function(){this.node.active=!1,this.node.removeFromParent(),this.node.destroyAllChildren(),this.node.destroy(),s.default.trigger(o.GameEvent.CLEAR_MALL)},selectBtn:function(e,t){e[0].active=t,e[1].active=!t},onDestroy:function(){s.default.ignoreScope(this)}}),cc._RF.pop()},{"../../common/Data":"Data","../../common/Msg":"Msg","../../common/NotificationCenter":"NotificationCenter","../../core/GameEvent":"GameEvent","../../core/Profile":"Profile"}],product_cell:[function(e,t,i){"use strict";cc._RF.push(t,"52ce73V2wtG279XIPraMg8q","product_cell");var o=c(e("../../core/Profile")),n=c(e("../../core/data/Config")),a=c(e("../../common/Msg")),s=c(e("../../util/Toast"));function c(e){return e&&e.__esModule?e:{default:e}}cc.Class({extends:cc.Component,properties:{product_name:cc.Label,product_icon:cc.Sprite,product_count:cc.Label,product_price:cc.Label,product_tag:cc.Sprite},init:function(e){e&&(this.canPay=!0,this.product_tag.node.active=!1,this._product_info=e)},start:function(){this.updateCell()},updateCell:function(){this.product_name.getComponent(cc.Label).string=this._product_info.displayName,o.default.isSkin(this._product_info.itemId)?(this.product_count.getComponent(cc.Label).string="",this.hasSkin(this._product_info.itemId)&&(this.product_tag.node.active=!0,this.canPay=!1)):this.product_count.getComponent(cc.Label).string="",this.product_price.getComponent(cc.Label).string=this._product_info.priceCoin,this.setImage(this.product_icon,this._product_info.itemId)},hasSkin:function(e){var t=!1;return!!o.default.info.bag.some(function(i){if(o.default.itemIsKind(i,e))return o.default.getCount(i)>0&&(t=!0),!0})&&t},setImage:function(e,t){var i=n.default.PRODUCT_CONFIG[t];i?(i.rotation&&(e.node.angle=-i.rotation),i.scale&&(e.node.scale=i.scale),cc.resources.load(i.url,cc.SpriteFrame,function(t,i){t?console.log(t):e.getComponent(cc.Sprite).spriteFrame=i})):console.log("local config not exist",t)},showAward:function(){cc.resources.load("prefab/diamond_award/award",function(e,t){e?console.log(e):cc.instantiate(t).parent=UIManager.getCurrentUI()})},buy_btn_click:function(){this.canPay?o.default.info.coin<this._product_info.priceCoin?s.default.show("There are not enough coins",2e3):a.default.buyProduct(o.default.ITEM_TYPES.COIN,this._product_info.itemId,this._product_info.priceCoin):s.default.show("Already",2e3)}}),cc._RF.pop()},{"../../common/Msg":"Msg","../../core/Profile":"Profile","../../core/data/Config":"Config","../../util/Toast":"Toast"}],searchAIPage:[function(e,t,i){"use strict";cc._RF.push(t,"dca40LyRWhEfrt9nqPoYpVO","searchAIPage");var o=s(e("../core/data/Config")),n=s(e("../ui/UiManager")),a=s(e("../ReadyGo"));function s(e){return e&&e.__esModule?e:{default:e}}cc.Class({extends:cc.Component,properties:{gameNode:cc.Node,searchdone:cc.Node,searchai_msg:cc.Node,mogu:cc.Node},onLoad:function(){},start:function(){this.game=n.default.game,this.model=this.game.model},showMe:function(){var e=this;this.mogu.active=!0,this.searchai_msg.active=!0,this.searchdone.active=!1,this.searchai_msg.string="Matching opponent...",setTimeout(function(){e._searchResult(),setTimeout(function(){n.default.hideAllUI(),n.default.showUI(o.default.GAME_LAYER.GAME_VS),e.model.setGameStatus(o.default.GAME_STATE.PREPARE),e.gameNode.getComponent("main").readyGo.getComponent(a.default).playCountdown(function(){e.model.setGameStatus(o.default.GAME_STATE.PLAYING),e.game.startTimerCountdown(o.default.TIMER_COUNT)})},2e3)},1500)},_searchResult:function(){this.mogu.active=!1,this.searchai_msg.active=!1,this.searchdone.active=!0;var e=Math.floor(13*Math.random()),t=this.searchdone.getChildByName("headsprite").getComponent(cc.Sprite),i=this.searchdone.getChildByName("info_level_msg").getComponent(cc.Label),n=this.gameNode.getComponent("main");if(n.headAtlas){var a=n.headAtlas.getSpriteFrame(e+1);t.spriteFrame=a}var s=o.default.PLAYER_TITLE.length-1,c=parseInt(Math.abs(this.model.pkStarLevel+1.5-3*Math.random()));c>s&&(c=s),i.string=o.default.PLAYER_TITLE[c][1]}}),cc._RF.pop()},{"../ReadyGo":"ReadyGo","../core/data/Config":"Config","../ui/UiManager":"UiManager"}],select_gift_item:[function(e,t,i){"use strict";cc._RF.push(t,"898cfPCE5NFNYLdAWhwd/CD","select_gift_item");var o=s(e("../core/data/Config")),n=e("../core/GameEvent"),a=s(e("../common/NotificationCenter"));function s(e){return e&&e.__esModule?e:{default:e}}cc.Class({extends:cc.Component,properties:{product_icon:cc.Sprite,product_price:cc.Label,product_name_node:cc.Sprite,product_name:cc.Label,product_select_tag:cc.Sprite},onLoad:function(){this.product_select_tag.node.active=!1},init:function(e,t){if(this.product_price.string="",this._data=e,this._index=t,this._select=!1,this.product_name_node.node.active=!1,this.product_price.node.active=!1,e){this._data.showName&&(this.product_name_node.node.active=!0,this.product_name.string=this._data.displayName);var i=e.priceCoin+"";this.itemId=e.content.items[0].itemId,this.setImage(this.product_icon,this.itemId),this.product_price.string=i,this.product_price.node.active=!0}},updateSelect:function(e){this._select=e,this.product_select_tag.node.active=e},setImage:function(e,t){var i=o.default.PRODUCT_CONFIG[t];if(i){var n=i.url;e.node.angle=-i.rotation,e.node.scale=i.scale,e.node.y=i.y,cc.resources.load(n,cc.SpriteFrame,function(t,i){t?console.log(t):e.getComponent(cc.Sprite).spriteFrame=i})}else console.log("local config not exist")},selectItem:function(){this._data&&a.default.trigger(n.GameEvent.SELECT_GIFT,{item:this._data,index:this._index,select:this._select})}}),cc._RF.pop()},{"../common/NotificationCenter":"NotificationCenter","../core/GameEvent":"GameEvent","../core/data/Config":"Config"}],select_gift:[function(e,t,i){"use strict";cc._RF.push(t,"941e0vMyspEjpY2FV4Ptwp1","select_gift");var o=e("../core/GameEvent"),n=u(e("../core/Profile")),a=u(e("../core/data/Config")),s=u(e("../common/Msg")),c=u(e("../common/NotificationCenter")),r=u(e("../ui/UiManager")),l=u(e("../common/BlockQuest")),d=u(e("../common/Data"));function u(e){return e&&e.__esModule?e:{default:e}}cc.Class({extends:cc.Component,properties:{no_gift_tips:cc.Sprite,gift_item:cc.Prefab},onLoad:function(){d.default.StoreList||s.default.getStoreList(),this.showWithData(d.default.StoreList.gift),this.no_gift_tips.node.active=!0,c.default.listen(o.GameEvent.SELECT_GIFT,this.updateUI,this),c.default.listen(o.GameEvent.CLEAR_MALL,this.updateUI,this)},init:function(e){this.showData=e},showWithData:function(e){this.data=e;this.items=[];for(var t=0;t<9;t++){var i=this.data.length>t?this.data[t]:void 0,o=cc.instantiate(this.gift_item),n=177*(t%3-1),a=parseInt(t/3)<1?413.5:65.5;1==parseInt(t/3)&&(a=239.5),o.position=cc.v2(n,a),o.getComponent("select_gift_item").init(i,t),this.items.push(o),o.parent=this.node}},updateUI:function(e){var t=this;if(!e&&this.select_para){if(parseInt(this.select_para.item.priceCoin)>n.default.info.coin)return;e=this.select_para}this.items&&(this.select_para=e,this.items.forEach(function(i,a){if(a==e.index){if(e.select)c.default.trigger(o.GameEvent.CLEAR_GIFT_ANIMATION),t.no_gift_tips.node.active=!0,l.default.UserInfo.select_gift_item=void 0;else{if(c.default.trigger(o.GameEvent.CLEAR_GIFT_ANIMATION),parseInt(e.item.priceCoin)>n.default.info.coin)return void(t.no_gift_tips.node.active=!0);t.no_gift_tips.node.active=!1,c.default.trigger(o.GameEvent.SHOW_GIFT_ANIMATION,{type:1,id:1e3+parseInt(e.item.productId.substr(-3))}),l.default.UserInfo.select_gift_item=e.item}i.getComponent("select_gift_item").updateSelect(!e.select)}else i.getComponent("select_gift_item").updateSelect(!1)}))},showMall:function(){cc.resources.load("prefab/mall/mall",function(e,t){if(!e){var i=cc.instantiate(t);i.parent=r.default.getCurrentUI(),i.getComponent("mall").curIndex=2}})},hidden_tips:function(){this.no_gift_tips.node.active=!1},back_btn_click:function(){this.node.active=!1,this.node.destroyAllChildren(),this.node.removeAllChildren(),this.node.destroy()},onDestroy:function(){c.default.trigger(o.GameEvent.CLEAR_GIFT_ANIMATION),c.default.ignoreScope(this)},share_btn_click:function(){r.default.getUI(a.default.GAME_LAYER.HOMEPAGE).node.getComponent("homePage").make_share.active=!0,this.back_btn_click()}}),cc._RF.pop()},{"../common/BlockQuest":"BlockQuest","../common/Data":"Data","../common/Msg":"Msg","../common/NotificationCenter":"NotificationCenter","../core/GameEvent":"GameEvent","../core/Profile":"Profile","../core/data/Config":"Config","../ui/UiManager":"UiManager"}],shareGiftAnimationView:[function(e,t,i){"use strict";cc._RF.push(t,"e0534ExQmhCR4IR94fQvehg","shareGiftAnimationView"),cc.Class({extends:cc.Component,properties:{spineAnimation:{default:null,type:sp.Skeleton},lableGiftContent:cc.Label,nodeContent:cc.Node},onLoad:function(){this.nodeContent.active=!1,this.local=this.node.position},start:function(){var e=this;this.spineAnimation.setCompleteListener(function(t,i){e.showContent()})},showContent:function(){this.nodeContent.active=!0},init:function(e){this.lableGiftContent.string=e},show:function(){this.node.active||(this.node.active=!0,this.nodeContent.active=!0,this.node.position=this.local.sub(cc.v2(0,300)),this.node.runAction(cc.moveBy(2,cc.v2(0,300))))},hide:function(){this.node.active=!1,this.nodeContent.active=!1,this.local?this.node.position=this.local:this.local=this.node.position}}),cc._RF.pop()},{}],star:[function(e,t,i){"use strict";cc._RF.push(t,"03a5fK/wd5DWLH8Bor22l2+","star"),cc.Class({extends:cc.Component,properties:{small_get:cc.Sprite,small_not:cc.Sprite,large_get:cc.Sprite,large_not:cc.Sprite,ani_add_node:cc.Node,ani_del_node:cc.Node},onLoad:function(){this._addAnimation=this.ani_add_node.getComponent(cc.Animation),this._delAnimation=this.ani_del_node.getComponent(cc.Animation)},init:function(e,t){this._resetState(),this._type=e,this._state=t,0==e?(0==t?this.small_not.node.active=!0:this.small_get.node.active=!0,this.size_w=10):(0==t?this.large_not.node.active=!0:this.large_get.node.active=!0,this.size_w=46)},playAniAdd:function(){0!=this._type&&(this.ani_add_node.active=!0,this._addAnimation.play())},playAnidel:function(){0!=this._type&&(this.ani_del_node.active=!0,this._delAnimation.play())},_resetState:function(){this.small_get.node.active=!1,this.small_not.node.active=!1,this.large_get.node.active=!1,this.large_not.node.active=!1,this.ani_add_node.active=!1,this.ani_del_node.active=!1},start:function(){var e=this;this._addAnimation.on("finished",function(){e._state=1,e.large_not.node.active=!1,e.large_get.node.active=!0},this),this._delAnimation.on("finished",function(){e._state=0,e.large_not.node.active=!0,e.large_get.node.active=!1},this)}}),cc._RF.pop()},{}],unlock_item:[function(e,t,i){"use strict";cc._RF.push(t,"f8d0cm1CtZEo7psvrQfk7fj","unlock_item");var o=s(e("../../core/data/Config")),n=s(e("../../common/Msg")),a=s(e("../../common/ShareInterface"));function s(e){return e&&e.__esModule?e:{default:e}}cc.Class({extends:cc.Component,properties:{product_icon:cc.Node,user_icon_l:cc.Node,user_name_l:cc.Label,user_icon_r:cc.Node,user_name_r:cc.Label,button_title:cc.Label,button_nodes:[cc.Node]},onLoad:function(){this.user_name_l.string="",this.user_name_r.string=""},init:function(e,t){if(this._index=t,this.button_state=2,e){this._itemId=e.itemId,1===parseInt(e.getDianmond)?this.button_state=1:this.button_state=0;var i=e.users;i.length<2&&(this.button_state=2);var o=this;i.forEach(function(e,t){var i=0===t?o.user_icon_l:o.user_icon_r,n=0===t?o.user_name_l:o.user_name_r;o.setUserInfo(e,i,n)})}this.update_button()},update_button:function(){var e=this;this.button_nodes.forEach(function(t,i){t.active=!1,i==parseInt(e.button_state)&&(t.active=!0)})},setUserInfo:function(e,t,i){i.active=!0,i.string=e.name;var o=e.purl;-1!==o.indexOf("https://wx.qlogo.cn")?o+="?aaa=aaa.png":(o="image/prop_icons/invited_icon.png",i.string="\u5df2\u9080\u8bf7"),this.setImage(t,o)},setImage:function(e,t){-1!==t.indexOf("https://wx.qlogo.cn")?cc.assetManager.loadRemote(t,function(t,i){t||(e.getComponent(cc.Sprite).spriteFrame=new cc.SpriteFrame(i))}):cc.resources.load(t,cc.SpriteFrame,function(t,i){t?console.log(t):e.getComponent(cc.Sprite).spriteFrame=i})},button_click:function(){switch(this.button_state){case 0:break;case 1:n.default.addItems(7,this._index);break;case 2:a.default.shareMsg({type:o.default.SHARE_TYPE.UNLOCK_GIFT})}}}),cc._RF.pop()},{"../../common/Msg":"Msg","../../common/ShareInterface":"ShareInterface","../../core/data/Config":"Config"}],unlock:[function(e,t,i){"use strict";cc._RF.push(t,"7bddfxR5wJANJxP1a79H/Lo","unlock");var o=e("../../core/GameEvent"),n=e("../../common/EventType"),a=l(e("../../common/Msg")),s=l(e("../../common/AdManager")),c=l(e("../../common/NotificationCenter")),r=l(e("../UiManager"));function l(e){return e&&e.__esModule?e:{default:e}}cc.Class({extends:cc.Component,properties:{unlock_content:cc.Node,item_prefab:cc.Prefab},onLoad:function(){this.addNodes(),c.default.listen(o.GameEvent.REWARD_INFO,this._MsgELSWX,this),a.default.getRewardItems()},addNodes:function(){this.items=[];for(var e=0;e<4;e++){var t=cc.instantiate(this.item_prefab),i=e%2==0?-130:130,o=e>=2?-178:190;t.position=cc.v2(i,o),t.getComponent("unlock_item").init(void 0,e),t.parent=this.unlock_content,this.items.push(t)}},_MsgELSWX:function(e){if(e.result.action==n.EventType.CMD_ACTION_REWARD_ITEMS){var t=e.result.rewardItems;this.show_with_data(t)}e.result.action==n.EventType.CMD_ACTION_ADD_ITEMS&&a.default.getRewardItems()},show_with_data:function(e){if(cc.sys.platform==cc.sys.WECHAT_GAME){wx.hideToast();for(var t=0;t<4;t++)this.items[t].getComponent("unlock_item").init(e[t],t)}},dismiss_unlock_node:function(){s.default.destroyBannerAd(),this.node.active=!1,this.node.removeFromParent(),this.node.destroyAllChildren(),this.node.destroy(),this.fromHome||(this.fromHome=!1,r.default.game.continueGame())},onDestroy:function(){c.default.ignoreScope(this)}}),cc._RF.pop()},{"../../common/AdManager":"AdManager","../../common/EventType":"EventType","../../common/Msg":"Msg","../../common/NotificationCenter":"NotificationCenter","../../core/GameEvent":"GameEvent","../UiManager":"UiManager"}],"use_v2.0.x_cc.Toggle_event":[function(e,t,i){"use strict";cc._RF.push(t,"fef9eyzKGRDOpxz5WRr5mh0","use_v2.0.x_cc.Toggle_event"),cc.Toggle&&(cc.Toggle._triggerEventInScript_check=!0),cc._RF.pop()},{}]},{},["use_v2.0.x_cc.Toggle_event","Loading","ReadyGo","AdManager","Bilog","BlockQuest","Data","EncodeDecode","EventType","HttpUtil","IapSdk","Msg","NotificationCenter","PropagateInterface","Receiver","ShareInterface","TCPClient","Timer","Util","Engine","Game","GameCore","GameEvent","GameGrid","GameRender","GameTouch","GameUtil","Profile","AI","AiAdventureMode","AiVsMode","Bitmap","BlockClassic","BlockCrazy","Config","CTimer","GameConfig","GameModel","GameReplay","GameState","GameTimer","main","Facebook","Sdkbox","AnimationMagicProgressCtrl","ComboAnimation","MagicBottleView","StarControl","UiManager","WisperStartAnimation","diamond_award_cell","els_gift_prop_view","els_view_add_magic","els_view_block","els_view_daily_login","els_view_daily_login_item","els_view_daily_login_prop_icon","els_view_magic_bottle","els_view_prop_animation_display","float_ani","gameAward","gameSinglemode","gameVSmode","help","homePage","diamond_cell","item_cell","mall","product_cell","searchAIPage","select_gift","select_gift_item","shareGiftAnimationView","star","unlock","unlock_item","CaptureToNative","TextureRenderUtils","Toast"]);